"use strict";(self["webpackChunkhard_diancan_front"]=self["webpackChunkhard_diancan_front"]||[]).push([[385],{93326:function(e,t,a){var n=a(66848),s=a(59916),o=a(56178),r=a(64527),i=a(64289),c=a(13979),m=a(39314),l=a(48362),p=a(34984),h=a(12793),u=a(89025),d=a(69878),g=a(12970),f=a(74556),A=a(89325),v=a(80226),y=a(53704),w=a(67137),b=a(91489),$=a(31682),k=a(14058),C=a(96562),P=a(8972),I=a(18977),W=a(68128),x=a(69739),E=a(20887),j=a(88977),O=a(7858),S=a(58372),N=a(8463),T=a(99604),U=a(74837),q=a(54400),z=a(74210),_=a(72413),R=a(14919),L=a(42257),G=a(95512),J=a(28533),M=a(77139),B=a(65431),K=a(41395);n["default"].use(o.Ay);const F=[{path:"/",redirect:"/userhome"},{path:"/login",name:"login",component:r.A},{path:"/register",name:"register",component:i.A},{path:"/register",name:"register",component:i.A},{path:"/userhomedetail",name:"userhomedetail",component:k.A},{path:"/userindex",name:"userindex",component:c.A,redirect:"/userhome",children:[{path:"/userhome",name:"homee",component:$.A},{path:"/usertest",name:"usertest",component:q.A},{path:"/userquestion",name:"userquestion",component:L.A},{path:"/usertypedetail",name:"usertypedetail",component:C.A},{path:"/userlearn",name:"userlearn",component:_.A},{path:"/usersourcedetail",name:"usersourcedetail",component:P.A},{path:"/usersource",name:"usersource",component:W.A},{path:"/userblog",name:"userblog",component:I.A},{path:"/usercheckin",name:"usercheckin",component:j.A},{path:"/userinfo",name:"userinfo",component:E.A},{path:"/myaddress",name:"myaddress",component:M.A},{path:"/myorder",name:"myorder",component:B.A}]},{path:"/index",name:"index",component:m.A,redirect:"/home",children:[{path:"/article",name:"article",component:J.A},{path:"/home",name:"homee",component:l.A},{path:"/teacher",name:"teacher",component:p.A},{path:"/businessPersonal",name:"businessPersonal",component:h.A},{path:"/password",name:"password",component:u.A},{path:"/category",name:"category",component:d.A},{path:"/room",name:"room",component:g.A},{path:"/qanda",name:"qanda",component:R.A},{path:"/jinghua",name:"jinghua",component:G.A},{path:"/xztl",name:"xztl",component:z.A},{path:"/type",name:"type",component:O.A},{path:"/ai-settings",name:"AiSettings",component:K.A},{path:"/tiku",name:"tiku",component:N.A},{path:"/shijuan",name:"shijuan",component:U.A},{path:"/source",name:"source",component:S.A},{path:"/banner",name:"banner",component:f.A},{path:"/ruzhu",name:"ruzhu",component:x.A},{path:"/order",name:"order",component:y.A},{path:"/comment",name:"comment",component:w.A},{path:"/collect",name:"collect",component:b.A},{path:"/admin",name:"admin",component:A.A},{path:"/question",name:"question",component:T.A},{path:"/user",name:"user",component:v.A}]},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,43662))}],H=new o.Ay({routes:F}),Z=["/login","/register","/about","/index","/home","/article","/teacher","/businessPersonal","/password","/category","/room","/qanda","/jinghua","/xztl","/type","/ai-settings","/tiku","/shijuan","/source","/banner","/ruzhu","/userhome","/userhomedetail"];H.beforeEach(((e,t,a)=>{const n=localStorage.getItem("token");n?"/login"===e.path?a("/userhome"):a():Z.includes(e.path)?a():e.path.startsWith("/userindex")&&!Z.includes(e.path)||e.path.startsWith("/usertest")||e.path.startsWith("/userquestion")||e.path.startsWith("/usertypedetail")||e.path.startsWith("/userlearn")||e.path.startsWith("/usersourcedetail")||e.path.startsWith("/usersource")||e.path.startsWith("/userblog")||e.path.startsWith("/usercheckin")||e.path.startsWith("/userinfo")||e.path.startsWith("/myaddress")||e.path.startsWith("/myorder")||e.path.startsWith("/admin")||e.path.startsWith("/order")||e.path.startsWith("/comment")||e.path.startsWith("/collect")||e.path.startsWith("/user")||e.path.startsWith("/question")?a(`/login?redirect=${e.path}`):a()})),H.afterEach(((e,t)=>{e.meta.title&&(document.title=e.meta.title)}));var D=H,Q=a(89143),V=a.n(Q);n["default"].config.productionTip=!1,n["default"].use(V()),new n["default"]({router:D,render:e=>e(s.A)}).$mount("#app")},18962:function(e,t,a){var n=a(94373),s=a(89143),o=a(40981);const r=n.A.create({baseURL:"https://orkj406039jmw6me.top/api",timeout:15e3,withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8"}});function i(e){if(e.response&&401===e.response.status)return o.A.error("401 æœªæˆæƒ:",e.response.data),Promise.resolve(e.response.data||{code:401,msg:"æœªæˆæƒ",data:null});s.Message.closeAll();let t="è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",a=-1;if("ECONNABORTED"===e.code&&e.message.includes("timeout"))t="è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•",a=408;else if(e.response)switch(a=e.response.status,e.response.status){case 403:t="æ‹’ç»è®¿é—®ï¼Œæƒé™ä¸è¶³";break;case 404:t="è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨";break;case 500:t="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯";break;case 504:t="ç½‘å…³è¶…æ—¶";break;default:t=e.response.data?.message||"è¯·æ±‚å¤±è´¥"}else e.request;return(0,s.Message)({message:t,type:"error",duration:3e3,showClose:!0,customClass:"custom-error-message"}),o.A.error("è¯·æ±‚é”™è¯¯è¯¦æƒ…:",e),Promise.reject({code:a,msg:t,data:null,isError:!0,originalError:null})}r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),console.log(`ğŸŒ ç”Ÿäº§ç¯å¢ƒè¯·æ±‚: ${e.method.toUpperCase()} ${e.baseURL}${e.url}`),e.url.includes("/code")&&console.log("ğŸ“ éªŒè¯ç è¯·æ±‚ï¼Œåº”è¯¥ä¼šæºå¸¦å¹¶è®¾ç½® Session Cookie"),o.A.log(`ğŸ“¤ è¯·æ±‚: ${e.method.toUpperCase()} ${e.baseURL}${e.url}`),e}),(e=>(s.Message.error("è¯·æ±‚é…ç½®é”™è¯¯"),Promise.reject({code:-1,msg:"è¯·æ±‚é…ç½®é”™è¯¯",isError:!0})))),r.interceptors.response.use((e=>{o.A.log(`ğŸ“¥ å“åº”: ${e.config.url}`,e.data);const t=e.data;return t}),(e=>i(e))),t.A=r},36197:function(e,t,a){a(44114),a(98992),a(54520),a(3949),a(81454);const n={GEMINI:"gemini",OPENAI:"openai",ANTHROPIC:"anthropic"},s={protocol:n.OPENAI,baseUrl:"https://api.openai.com/v1",apiKey:"",modelId:"gpt-4-turbo",systemPrompt:"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„è®ºå›åŠ©æ‰‹ç«è‹—ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å›ç­”é—®é¢˜ã€æä¾›å»ºè®®ã€‚"};class o{constructor(){this.config=this.loadConfig()}loadConfig(){const e=localStorage.getItem("huomiao_ai_config"),t=e?{...s,...JSON.parse(e)}:{...s};return console.log("aiService.loadConfig() åŠ è½½çš„é…ç½®:",t),t}saveConfig(e){const t=this.loadConfig();this.config={...t,...e},localStorage.setItem("huomiao_ai_config",JSON.stringify(this.config)),console.log("aiService.saveConfig() ä¿å­˜çš„é…ç½®:",this.config)}async chat(e,t=[]){this.config=this.loadConfig();const{protocol:a,baseUrl:s,apiKey:o,modelId:r,systemPrompt:i}=this.config;if(!o)throw new Error("è¯·å…ˆé…ç½® API Key");const c=this.buildEnhancedSystemPrompt(i,t);try{let t;switch(a){case n.GEMINI:t=await this.chatWithGemini(e,o,r,c);break;case n.OPENAI:case"openai-compatible":t=await this.chatWithOpenAI(e,s,o,r,c);break;case n.ANTHROPIC:t=await this.chatWithAnthropic(e,s,o,r,c);break;default:throw console.error("ä¸æ”¯æŒçš„åè®®ç±»å‹:",a),new Error(`ä¸æ”¯æŒçš„åè®®ç±»å‹: ${a}`)}return t}catch(m){throw console.error("AI æœåŠ¡è°ƒç”¨å¤±è´¥:",m),m}}buildEnhancedSystemPrompt(e,t){if(!t||0===t.length)return e;const a=t.map((e=>`[${e.category||"General"}] ${e.title}\n${e.content}`)).join("\n\n");return`${e}\n\n=== çŸ¥è¯†åº“ä¿¡æ¯ ===\n${a}\n=== ä»¥ä¸ŠçŸ¥è¯†åº“ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œè¯·åœ¨å›ç­”æ—¶çµæ´»è¿ç”¨ ===`}async chatWithGemini(e,t,a,n){const s=`https://generativelanguage.googleapis.com/v1beta/models/${a}:generateContent?key=${t}`,o=e.map((e=>({role:"assistant"===e.role?"model":"user",parts:[{text:e.text}]})));n&&o.unshift({role:"user",parts:[{text:`[ç³»ç»ŸæŒ‡ä»¤]: ${n}`}]});const r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:o,generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(!r.ok){const e=await r.json();throw new Error(e.error?.message||"Gemini API è°ƒç”¨å¤±è´¥")}const i=await r.json();return i.candidates?.[0]?.content?.parts?.[0]?.text||"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£ä½ çš„é—®é¢˜ã€‚"}async chatWithOpenAI(e,t,a,n,s){const o=`${t.replace(/\/+$/,"")}/chat/completions`,r=[];s&&r.push({role:"system",content:s}),e.forEach((e=>{const t="model"===e.role?"assistant":e.role;r.push({role:t,content:e.text})}));const i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:n,messages:r,temperature:.7,max_tokens:1024})});if(!i.ok){const e=await i.json();throw new Error(e.error?.message||"OpenAI API è°ƒç”¨å¤±è´¥")}const c=await i.json();return c.choices?.[0]?.message?.content||"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£ä½ çš„é—®é¢˜ã€‚"}async chatWithAnthropic(e,t,a,n,s){const o=`${t.replace(/\/+$/,"")}/messages`,r=e.filter((e=>"system"!==e.role)).map((e=>({role:"model"===e.role?"assistant":e.role,content:e.text}))),i=await fetch(o,{method:"POST",headers:{"x-api-key":a,"anthropic-version":"2023-06-01","content-type":"application/json","dangerously-allow-browser":"true"},body:JSON.stringify({model:n,max_tokens:1024,system:s||"",messages:r})});if(!i.ok){const e=await i.json();throw new Error(e.error?.message||"Claude API è°ƒç”¨å¤±è´¥")}const c=await i.json();return c.content?.[0]?.text||"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£ä½ çš„é—®é¢˜ã€‚"}async testConnection(){try{const e=await this.chat([{role:"user",text:"ä½ å¥½ï¼Œè¯·ç®€å•å›å¤ä¸€ä¸‹ç¡®è®¤è¿æ¥æ­£å¸¸ã€‚"}]);return{success:!0,message:"è¿æ¥æˆåŠŸ",response:e}}catch(e){return{success:!1,message:e.message}}}}t.A=new o},40981:function(e,t){const a=!1;class n{log(...e){}info(...e){}warn(...e){}error(...e){console.error(...e)}debug(...e){a&&console.debug(...e)}group(e){a&&console.group(e)}groupEnd(){a&&console.groupEnd()}table(e){a&&console.table(e)}}t.A=new n},64643:function(e,t,a){a(14603),a(47566),a(98721);class n{validateUsername(e){if(!e||"string"!==typeof e)return{valid:!1,message:"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"};const t=e.trim();if(t.length<3||t.length>20)return{valid:!1,message:"ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´"};const a=/^[a-zA-Z0-9_]+$/;return a.test(t)?{valid:!0,value:t}:{valid:!1,message:"ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿"}}validatePassword(e){if(!e||"string"!==typeof e)return{valid:!1,message:"å¯†ç ä¸èƒ½ä¸ºç©º"};if(e.length<6)return{valid:!1,message:"å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä¸ªå­—ç¬¦"};if(e.length>32)return{valid:!1,message:"å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡32ä¸ªå­—ç¬¦"};const t=/[a-zA-Z]/.test(e),a=/[0-9]/.test(e);return t&&a?{valid:!0}:{valid:!0,message:"å»ºè®®å¯†ç åŒ…å«å­—æ¯å’Œæ•°å­—ï¼Œä»¥æé«˜å®‰å…¨æ€§"}}validateConfirmPassword(e,t){return t?e!==t?{valid:!1,message:"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"}:{valid:!0}:{valid:!1,message:"è¯·ç¡®è®¤å¯†ç "}}validateEmail(e){if(!e||"string"!==typeof e)return{valid:!1,message:"é‚®ç®±ä¸èƒ½ä¸ºç©º"};const t=e.trim(),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.test(t)?{valid:!0,value:t.toLowerCase()}:{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"}}validatePhone(e){if(!e||"string"!==typeof e)return{valid:!1,message:"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"};const t=e.trim(),a=/^1[3-9]\d{9}$/;return a.test(t)?{valid:!0,value:t}:{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ç "}}validateTitle(e){if(!e||"string"!==typeof e)return{valid:!1,message:"æ ‡é¢˜ä¸èƒ½ä¸ºç©º"};const t=e.trim();return t.length<2?{valid:!1,message:"æ ‡é¢˜é•¿åº¦è‡³å°‘ä¸º2ä¸ªå­—ç¬¦"}:t.length>100?{valid:!1,message:"æ ‡é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦"}:{valid:!0,value:t}}validateContent(e){if(!e||"string"!==typeof e)return{valid:!1,message:"å†…å®¹ä¸èƒ½ä¸ºç©º"};const t=e.trim();return 0===t.length?{valid:!1,message:"å†…å®¹ä¸èƒ½ä¸ºç©º"}:t.length<10?{valid:!1,message:"å†…å®¹é•¿åº¦è‡³å°‘ä¸º10ä¸ªå­—ç¬¦"}:t.length>5e4?{valid:!1,message:"å†…å®¹é•¿åº¦ä¸èƒ½è¶…è¿‡50000ä¸ªå­—ç¬¦"}:{valid:!0,value:t}}sanitizeInput(e){return e&&"string"===typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):""}validateURL(e){if(!e||"string"!==typeof e)return{valid:!1,message:"URLä¸èƒ½ä¸ºç©º"};try{return new URL(e),{valid:!0,value:e}}catch{return{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„URLåœ°å€"}}}validateLength(e,t=0,a=1/0,n="å­—æ®µ"){if(!e||"string"!==typeof e)return{valid:!1,message:`${n}ä¸èƒ½ä¸ºç©º`};const s=e.trim();return s.length<t?{valid:!1,message:`${n}é•¿åº¦è‡³å°‘ä¸º${t}ä¸ªå­—ç¬¦`}:s.length>a?{valid:!1,message:`${n}é•¿åº¦ä¸èƒ½è¶…è¿‡${a}ä¸ªå­—ç¬¦`}:{valid:!0,value:s}}}t.A=new n}}]);