"use strict";(self["webpackChunkhard_diancan_front"]=self["webpackChunkhard_diancan_front"]||[]).push([[869],{41395:function(t,e,a){a.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-settings-container"},[t._m(0),e("AdminDashboard",{attrs:{systemPrompt:t.systemPrompt,isOnline:t.isOnline,isScanning:t.isScanning,language:t.language,knowledgeBase:t.knowledgeBase,posts:t.posts,deletedPosts:t.deletedPosts,aiConfig:t.aiConfig},on:{"update:aiConfig":t.handleUpdateAiConfig,setOnline:t.handleSetOnline,addKnowledge:t.handleAddKnowledge,editKnowledge:t.handleEditKnowledge,removeKnowledge:t.handleRemoveKnowledge,runModerationScan:t.handleRunModerationScan,"update:systemPrompt":t.handleUpdateSystemPrompt,"update:language":t.handleUpdateLanguage,updatePosts:t.handleUpdatePosts}})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h2",[t._v("AI 设置管理")]),e("p",[t._v("配置 AI 服务、管理知识库和审核系统")])])}],o=(a(44114),a(98992),a(54520),a(18962)),r=a(36197),l=a(87468),n={name:"AiSettings",components:{AdminDashboard:l.A},data(){return{systemPrompt:"你是一个友好的论坛助手，可以帮助用户回答问题、提供建议。",isOnline:!1,isScanning:!1,language:"cn",knowledgeBase:[],posts:[],deletedPosts:[],aiConfig:{protocol:"openai",apiKey:"",baseUrl:"https://api.openai.com/v1",modelId:"gpt-4-turbo",systemPrompt:"你是一个友好的论坛助手火苗，可以帮助用户回答问题、提供建议。"}}},mounted(){this.loadAiConfig(),this.loadKnowledgeBase(),this.loadSystemPrompt(),this.loadLanguage(),this.loadPosts()},methods:{loadAiConfig(){try{const t=r.A.loadConfig();this.aiConfig={...this.aiConfig,...t};const e=localStorage.getItem("huomiao_ai_online");this.isOnline=null!==e?"true"===e:!(!t.apiKey||!t.apiKey.trim())}catch(t){console.error("加载 AI 配置失败:",t)}},loadKnowledgeBase(){try{const t=localStorage.getItem("huomiao_knowledge_base");t&&(this.knowledgeBase=JSON.parse(t))}catch(t){console.error("加载知识库失败:",t),this.knowledgeBase=[]}},saveKnowledgeBase(){localStorage.setItem("huomiao_knowledge_base",JSON.stringify(this.knowledgeBase))},loadSystemPrompt(){const t=localStorage.getItem("ai_system_prompt");t&&(this.systemPrompt=t)},loadLanguage(){const t=localStorage.getItem("ai_language");t&&(this.language=t)},async loadPosts(){try{const t=await o.A.post("/article/list",{pageNum:1,pageSize:100});200!==t.code&&1!==t.code||(this.posts=t.data.records||[])}catch(t){console.error("加载帖子失败:",t)}},handleUpdateAiConfig(t){this.aiConfig={...this.aiConfig,...t};try{r.A.saveConfig(t),this.isOnline=!(!this.aiConfig.apiKey||!this.aiConfig.apiKey.trim()),console.log("AI 配置已保存:",this.aiConfig),console.log("API Key 已设置:",!!this.aiConfig.apiKey),this.$message.success("AI 配置已更新")}catch(e){console.error("更新 AI 配置失败:",e),this.$message.error("更新配置失败")}},handleSetOnline(t){if(this.isOnline=t,localStorage.setItem("huomiao_ai_online",t.toString()),t){if(!this.aiConfig.apiKey||!this.aiConfig.apiKey.trim())return this.$message.warning("请先配置 API Key"),this.isOnline=!1,void localStorage.setItem("huomiao_ai_online","false");this.$message.success("AI 服务已连接")}else localStorage.removeItem("huomiao_chat_history"),localStorage.setItem("huomiao_chat_cleared",Date.now().toString()),this.$message.info("AI 服务已断开，聊天记录已清除")},handleAddKnowledge(t){try{t.id=Date.now().toString(),this.knowledgeBase.push(t),this.saveKnowledgeBase(),this.$message.success("知识条目已添加")}catch(e){console.error("添加知识条目失败:",e),this.$message.error("添加失败")}},handleEditKnowledge(t,e){try{const a=this.knowledgeBase.findIndex((e=>e.id===t));-1!==a&&(this.$set(this.knowledgeBase,a,{...this.knowledgeBase[a],...e}),this.saveKnowledgeBase(),this.$message.success("知识条目已更新"))}catch(a){console.error("更新知识条目失败:",a),this.$message.error("更新失败")}},handleRemoveKnowledge(t){try{this.knowledgeBase=this.knowledgeBase.filter((e=>e.id!==t)),this.saveKnowledgeBase(),this.$message.success("知识条目已删除")}catch(e){console.error("删除知识条目失败:",e),this.$message.error("删除失败")}},async handleRunModerationScan(){this.isScanning=!0;try{this.$message.info("审核扫描功能暂不可用（需要后端支持）")}catch(t){console.error("审核扫描失败:",t),this.$message.error("审核扫描失败")}finally{this.isScanning=!1}},handleUpdateSystemPrompt(t){this.systemPrompt=t,localStorage.setItem("ai_system_prompt",t),r.A.saveConfig({systemPrompt:t})},handleUpdateLanguage(t){this.language=t,localStorage.setItem("ai_language",t)},handleUpdatePosts(t){this.posts=t}}},c=n,d=a(81656),u=(0,d.A)(c,s,i,!1,null,"16d95226",null),m=u.exports},64527:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg"},[e("div",{staticClass:"login-container"},[e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.rules,"label-position":"left","label-width":"0px"}},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-platform"}),e("span",[t._v("论坛登录")])]),e("el-form-item",{attrs:{prop:"userName"}},[e("el-input",{staticClass:"login-input",attrs:{type:"text",autocomplete:"off","prefix-icon":"el-icon-user",placeholder:"请输入用户名"},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{staticClass:"login-input",attrs:{type:"password",autocomplete:"off","prefix-icon":"el-icon-lock",placeholder:"请输入密码"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),e("el-form-item",{attrs:{prop:"code"}},[e("div",{staticClass:"captcha-wrapper"},[e("el-input",{staticClass:"login-input captcha-input",attrs:{"prefix-icon":"el-icon-key",placeholder:"请输入验证码答案"},model:{value:t.loginForm.checkcode,callback:function(e){t.$set(t.loginForm,"checkcode",e)},expression:"loginForm.checkcode"}}),e("div",{staticClass:"captcha-box",class:{loading:t.codeLoading},on:{click:t.getcode}},[t.codeLoading?e("i",{staticClass:"el-icon-loading"}):e("span",[t._v(t._s(t.captchaQuestion||"获取验证码"))]),e("i",{staticClass:"refresh-icon el-icon-refresh-right"})])],1)]),e("el-form-item",{attrs:{prop:"role"}},[e("el-select",{staticClass:"login-input role-select",attrs:{placeholder:"请选择角色","prefix-icon":"el-icon-user-solid"},model:{value:t.loginForm.role,callback:function(e){t.$set(t.loginForm,"role",e)},expression:"loginForm.role"}},[e("el-option",{attrs:{label:"管理员",value:1}},[e("i",{staticClass:"el-icon-s-custom"}),t._v(" 管理员 ")]),e("el-option",{attrs:{label:"用户",value:2}},[e("i",{staticClass:"el-icon-user"}),t._v(" 用户 ")])],1)],1),e("el-form-item",[e("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:t.codeLoading},on:{click:t.handleLogin}},[e("i",{staticClass:"el-icon-upload2"}),t._v(" 登录 ")])],1),e("div",{staticClass:"tip"},[e("span",[t._v("还没有账号？")]),e("span",{staticClass:"register-link",on:{click:function(e){return t.sjzhuce()}}},[t._v("立即注册")])])],1)],1)])},i=[],o=(a(44114),a(18962)),r={data(){return{image:"",codeLoading:!1,captchaQuestion:"",captchaId:"",loginForm:{userName:"",password:"",checkcode:"",captchaId:"",role:2},fileList:[],rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},mounted(){this.getcode()},methods:{handleExceed(t){console.log(t)},async getcode(){if(!this.codeLoading){this.codeLoading=!0;try{const t=await o.A.get("/code");200===t.code&&t.data?(this.captchaQuestion=t.data.question,this.captchaId=t.data.captchaId,this.loginForm.captchaId=t.data.captchaId,console.log("验证码获取成功:",{question:this.captchaQuestion,captchaId:this.captchaId})):this.$message.error(t.msg||"获取验证码失败")}catch(t){console.error("获取验证码失败:",t),this.$message.error("获取验证码失败，请稍后重试")}finally{this.codeLoading=!1}}},sjzhuce(){this.$router.push({path:"/register"})},handleLogin(){this.$refs.loginForm.validate((async t=>{if(!t)return console.log("表单校验失败"),!1;try{const t={userName:this.loginForm.userName,password:this.loginForm.password,captchaId:this.loginForm.captchaId,captchaAnswer:this.loginForm.checkcode,role:this.loginForm.role};console.log("发送登录请求:",t),console.log("当前环境 API 地址:","https://orkj406039jmw6me.top/api");const e=await o.A.post("/login",t);console.log("登录响应===",e),200==e.code||1==e.code?(this.$message.success("登录成功"),window.localStorage.setItem("token",e.data.token),2!==this.loginForm.role?this.$router.push({path:"/index"}):this.$router.push({path:"/userindex"})):(this.$message.warning(e.msg||"登录失败"),console.warn("登录失败，重新获取验证码"),this.loginForm.checkcode="",this.getcode())}catch(e){console.error("登录请求异常:",e),this.$message.error(e.msg||"登录失败，请检查网络连接"),this.loginForm.checkcode="",this.getcode()}}))}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"2c1d16eb",null),d=c.exports},39314:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global"},[e("el-container",{staticClass:"global-contain"},[e("el-header",[e("div",{staticClass:"head"},[e("div",{staticClass:"headtitle"},[t._v("博客论坛系统")]),e("div",[null==t.user.avatar?e("img",{staticStyle:{"margin-right":"10px",width:"50px",height:"50px","border-radius":"50%","vertical-align":"middle"},attrs:{src:a(33153),alt:"",srcset:""}}):e("img",{staticStyle:{"margin-right":"10px",width:"50px",height:"50px","border-radius":"50%","vertical-align":"middle"},attrs:{src:t.user.avatar,alt:"",srcset:""}}),e("el-dropdown",[e("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#fff"}},[t._v(" "+t._s(t.user.userName)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.personal()}}},[t._v("个人信息")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.logout.apply(null,arguments)}}},[t._v("退出登录")])],1)],1)],1)])]),e("el-container",{staticClass:"contain"},[e("el-aside",{staticClass:"aside",attrs:{width:"200px"}},[e("el-menu",{staticClass:"el-menu-demo menu",attrs:{"default-active":t.$route.path,router:""}},[e("el-menu-item",{attrs:{index:"/home"}},[e("i",{staticClass:"el-icon-s-home menuicon"}),t._v("首页")]),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-user menuicon"}),t._v("信息管理")]),e("el-menu-item",{attrs:{index:"/type"}},[t._v("板块管理")]),e("el-menu-item",{attrs:{index:"/article"}},[t._v("文章管理")]),e("el-menu-item",{attrs:{index:"/ai-settings"}},[t._v("AI设置管理")])],2)],1)],1),e("el-main",[e("router-view")],1)],1)],1)],1)},i=[],o=(a(44114),a(18962)),r={data(){return{user:{}}},mounted(){this.getinfo()},methods:{async getinfo(){const t=await o.A.get("/info");console.log(t),this.user=t.data,window.localStorage.setItem("userinfo",JSON.stringify(this.user))},personal(){this.$router.push({path:"/businessPersonal"})},updatepassword(){this.$router.push({path:"/password"})},async logout(){await o.A.post("/logout");window.localStorage.clear(),this.$router.push("/userhome")}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"295f90dd",null),d=c.exports},89325:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"username",label:"账号"}}),e("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"role",label:"角色"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"管理员信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"账号",prop:"username"}},[e("el-input",{attrs:{placeholder:"账号"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/admin/common/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.avatar?e("img",{staticClass:"avatar",attrs:{src:t.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:JSON.parse(localStorage.getItem("userinfo")||"{}"),rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],type:[{required:!0,message:"请选择商家类型",trigger:"blur"}]},ids:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.getlist()},methods:{del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/admin/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.license=t.license,this.form.timeRange=t.time_range,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/admin/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,this.form.role="ADMIN";const t=await o.A.post("/admin/addandupdate",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"2a8ef290",null),d=c.exports},28533:function(t,e,a){a.d(e,{A:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-cascader",{staticStyle:{"margin-right":"20px",width:"300px"},attrs:{placeholder:"请选择分类",options:t.typelist,props:t.categoryProps,clearable:"","show-all-levels":!1},on:{change:t.queryCategoryChange},model:{value:t.queryCategory,callback:function(e){t.queryCategory=e},expression:"queryCategory"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sortedTableData,stripe:""}},[e("el-table-column",{attrs:{label:"置顶",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{attrs:{content:1==a.row.topType?"已置顶":"未置顶"}},[e("i",{class:1==a.row.topType?"el-icon-top top-icon top-active":"el-icon-top top-icon",on:{click:function(e){return t.toggleTop(a.row)}}})])]}}])}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.topType?e("span",{staticClass:"top-badge"},[t._v("顶")]):t._e(),t._v(" "+t._s(a.$index+1)+" ")]}}])}),e("el-table-column",{attrs:{prop:"title",label:"标题",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"title-content"},[e("el-tooltip",{attrs:{content:a.row.title}},[e("div",{staticClass:"title",class:{"top-title":1==a.row.topType}},[t._v(t._s(a.row.title))])]),1==a.row.topType?e("el-tag",{staticClass:"top-tag",attrs:{type:"danger",size:"mini"}},[t._v("置顶")]):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"content",label:"内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.chakan(a.row.content)}}},[t._v("查看")])]}}])}),e("el-table-column",{attrs:{prop:"cover",label:"封面",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.cover?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.cover,"preview-src-list":[a.row.cover]}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"boardName",label:"分类",width:"120"}}),e("el-table-column",{attrs:{prop:"pboardName",label:"标签",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{size:"small"}},[t._v(t._s(a.row.pboardName))])]}}])}),e("el-table-column",{attrs:{prop:"nickName",label:"发布人",width:"100"}}),e("el-table-column",{attrs:{prop:"postTime",label:"发布日期",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"date-cell"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(t._s(t.formatDate(a.row.postTime)))])])]}}])}),e("el-table-column",{attrs:{prop:"readCount",label:"浏览量",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"read-count"},[e("i",{staticClass:"el-icon-view"}),e("span",[t._v(t._s(a.row.readCount||0))])])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"action-buttons"},[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("修改")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])],1)]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"内容",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},[e("div",{domProps:{innerHTML:t._s(t.sanitizedContent)}})]),e("el-dialog",{attrs:{title:t.formTitle,visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"custom-class":"article-edit-dialog"},on:{"update:visible":function(e){t.fromVisible=e},close:t.handleDialogClose}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"标题",prop:"title",required:""}},[e("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"分类",required:""}},[e("el-cascader",{key:"cascader-"+(t.form.id||"new"),staticStyle:{width:"100%"},attrs:{options:t.typelist,props:t.categoryProps,"show-all-levels":!1,placeholder:"请选择文章分类",clearable:""},on:{change:t.handleCategoryChange},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),t.showCategoryError?e("div",{staticClass:"category-error-tip"},[t._v(" 请选择文章分类 ")]):t._e()],1),e("el-form-item",{attrs:{label:"摘要"}},[e("el-input",{attrs:{placeholder:"请输入摘要",type:"textarea",rows:3},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),e("el-form-item",{attrs:{label:"文章置顶"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"置顶","inactive-text":"普通"},model:{value:t.form.topType,callback:function(e){t.$set(t.form,"topType",e)},expression:"form.topType"}}),1==t.form.topType?e("div",{staticClass:"top-tip"},[e("i",{staticClass:"el-icon-warning"}),t._v(" 置顶文章会显示在列表最前面 ")]):t._e()],1),e("el-form-item",{attrs:{label:"封面"}},[e("div",{staticClass:"cover-upload"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.getUploadUrl(),"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.cover?e("div",{staticClass:"upload-area"},[e("img",{staticClass:"avatar",attrs:{src:t.coverPreview}}),e("div",{staticClass:"upload-mask"},[e("i",{staticClass:"el-icon-upload2"}),e("span",[t._v("更换封面")])])]):e("div",{staticClass:"upload-area empty"},[e("i",{staticClass:"el-icon-plus"}),e("div",{staticClass:"upload-text"},[t._v("上传封面图片")])])]),t.form.cover?e("div",{staticClass:"cover-tip"},[e("el-button",{staticClass:"remove-cover",attrs:{type:"text"},on:{click:function(e){t.form.cover=""}}},[e("i",{staticClass:"el-icon-delete"}),t._v("移除封面 ")])],1):t._e()],1)]),e("el-form-item",{attrs:{label:"内容",required:""}},[e("div",{staticClass:"editor-wrapper"},[e("div",{staticClass:"wang-editor-container",attrs:{id:"editor"}}),t.form.content?t._e():e("div",{staticClass:"editor-tip"},[t._v("文章内容不能为空")])])])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.submitting},on:{click:t.save}},[t._v(" "+t._s(t.submitting?"保存中...":"确 定")+" ")])],1)],1)],1)},i=[],o=a(18962),r=a(5507),l=a.n(r),n=a(40981),c=a(64643),d={data(){return{fileList:[],typelist:[],tableData:[],pageNum:1,pageSize:20,total:0,username:null,token:"",queryCategory:[],selectedCategory:[],showCategoryError:!1,categoryProps:{value:"id",label:"name",checkStrictly:!0},name:null,fromVisible1:!1,fromVisible:!1,avatar:"",submitting:!1,queryform:{boardId:"",pageNum:1,pBoardId:"",status:"",pageSize:20},license:"",form:{id:"",title:"",summary:"",cover:"",pBoardId:"",boardId:"",topType:0,content:""},user:{},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}]},content:"",editor:null}},computed:{formTitle(){return this.form.id?"编辑文章":"新增文章"},coverPreview(){if(!this.form.cover)return"";if(/^https?:\/\//.test(this.form.cover))return this.form.cover;const t="https://orkj406039jmw6me.top/";return`${t}${this.form.cover}`},sanitizedContent(){return this.content?this.sanitizeHTML(this.content):""},sortedTableData(){return this.tableData&&0!==this.tableData.length?[...this.tableData].sort(((t,e)=>t.topType!==e.topType?e.topType-t.topType:new Date(e.postTime)-new Date(t.postTime))):[]}},watch:{fromVisible(t){t?this.$nextTick((()=>{this.initEditor()})):this.editor&&(this.editor.destroy(),this.editor=null)}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getall(),this.getlist()},beforeDestroy(){this.editor&&(this.editor.destroy(),this.editor=null)},methods:{getImageUrl(t){return t?"string"===typeof t&&(t.startsWith("http://")||t.startsWith("https://"))?t:"https://orkj406039jmw6me.top/api/file/getImage/"+t:""},getUploadUrl(){return"https://orkj406039jmw6me.top/api/file/upload"},sanitizeHTML(t){if(!t)return"";const e=document.createElement("div");e.innerHTML=t;const a=["SCRIPT","STYLE","IFRAME","OBJECT","EMBED","FORM","INPUT","BUTTON"],s=["onload","onerror","onclick","onmouseover","onfocus","onblur","onkeydown","onkeyup","onsubmit","javascript:","data:text/html"],i=t=>{if(1===t.nodeType){if(a.includes(t.tagName))return void t.remove();const e=t.attributes;for(let a=e.length-1;a>=0;a--){const i=e[a],o=i.name.toLowerCase(),r=i.value.toLowerCase();s.some((t=>o.includes(t.toLowerCase())||r.includes(t.toLowerCase())))&&t.removeAttribute(i.name)}const o=t.childNodes;for(let t=o.length-1;t>=0;t--)i(o[t])}},o=e.childNodes;for(let r=o.length-1;r>=0;r--)i(o[r]);return e.innerHTML},queryCategoryChange(t){n.A.log("查询分类变化:",t),t&&t.length>0?this.queryform.boardId=t[t.length-1]:this.queryform.boardId=""},handleCategoryChange(t){n.A.log("编辑分类变化:",t),this.showCategoryError=!1,t&&t.length>0?t.length>1?(this.form.pBoardId=t[0],this.form.boardId=t[1]):1===t.length&&(this.form.pBoardId=t[0],this.form.boardId=""):(this.form.pBoardId="",this.form.boardId="",this.showCategoryError=!0)},chakan(t){this.content=t,this.fromVisible1=!0},async getall(){const t=await o.A.get("/board/list");n.A.log("分类列表:",t),this.typelist=t.data},del(t){this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/article/delete",{id:t});n.A.log(e),200!=e.code&&1!=e.code||(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},toggleTop(t){const e=1==t.topType?"取消置顶":"置顶";this.$confirm(`确定要${e}这篇文章吗？`,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const a=1==t.topType?0:1,s=await o.A.post("/article/setTop",{id:t.id,topType:a});200==s.code||1==s.code?(this.$message.success(`${e}成功`),t.topType=a,this.sortTableData()):this.$message.error(s.message||`${e}失败`)}catch(a){n.A.error(`${e}失败:`,a),this.$message.error(`${e}失败，请稍后重试`)}})).catch((()=>{}))},sortTableData(){this.tableData=this.tableData.sort(((t,e)=>t.topType!==e.topType?e.topType-t.topType:new Date(e.postTime)-new Date(t.postTime)))},handleEdit(t){n.A.log("编辑文章数据:",t),this.form={id:t.id,title:t.title||"",summary:t.summary||"",cover:t.cover||"",topType:t.topType||0,pBoardId:"",boardId:"",content:t.content||""};let e=t.pboardId||t.pBoardId,a=t.boardId;n.A.log("文章分类ID:",{pId:e,bId:a}),this.selectedCategory=[],e&&a?(this.selectedCategory=[parseInt(e),parseInt(a)],this.form.pBoardId=parseInt(e),this.form.boardId=parseInt(a)):e&&(this.selectedCategory=[parseInt(e)],this.form.pBoardId=parseInt(e),this.form.boardId=""),n.A.log("设置后的分类值:",this.selectedCategory),n.A.log("设置后的表单:",this.form),this.fromVisible=!0,this.$nextTick((()=>{n.A.log("弹窗打开后的分类值:",this.selectedCategory)}))},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.boardId="",this.queryform.pBoardId="",this.queryform.pageNum=1,this.queryCategory=[],this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.post("/article/list",this.queryform);n.A.log("文章列表:",t),200!=t.code&&1!=t.code||(this.tableData=t.data.records,this.total=t.data.total,this.sortTableData())},add(){this.form={id:"",title:"",summary:"",cover:"",topType:0,pBoardId:"",boardId:"",content:""},this.selectedCategory=[],this.showCategoryError=!1,this.fromVisible=!0,this.$nextTick((()=>{n.A.log("新增文章表单已重置:",this.form)}))},initEditor(){this.$nextTick((()=>{this.editor&&(this.editor.destroy(),this.editor=null),this.editor=new(l())("#editor"),this.editor.config.placeholder="请输入文章内容...",this.editor.config.uploadFileName="file",this.editor.config.uploadImgServer=this.getUploadUrl(),this.editor.config.zIndex=100,this.editor.config.uploadImgMaxSize=5242880,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","webp"],this.editor.config.uploadImgResult="json",this.editor.config.uploadImgHooks={customInsert:(t,e)=>{let a="";try{console.log("图片上传后端响应:",e),console.log("响应码:",e.code),console.log("响应数据:",e.data),200===e.code||1===e.code?(console.log("上传成功，响应码:",e.code),"string"===typeof e.data?a=e.data.startsWith("http://")||e.data.startsWith("https://")?e.data:this.getImageUrl(e.data):e.data&&e.data.url?a=e.data.url:e.data&&(a=this.getImageUrl(e.data))):0===e.errno&&e.data?a=e.data.url||this.getImageUrl(e.data):e.data?a=this.getImageUrl(e.data):e.url?a=e.url:"string"===typeof e&&(a=e),console.log("最终图片URL:",a),a?(t(a),this.$message.success("图片上传成功")):(console.error("无法获取图片地址，响应数据:",e),this.$message.error("图片上传失败：无法获取图片地址"))}catch(s){console.error("customInsert 处理异常:",s),this.$message.error("图片处理失败")}}},this.editor.config.onchange=t=>{this.form.content=t},this.editor.create(),this.form.content&&this.editor.txt.html(this.form.content)}))},validateForm(){const t=c.A.validateTitle(this.form.title);if(!t.valid)return this.$message.warning(t.message),!1;if(!this.form.pBoardId)return this.showCategoryError=!0,this.$message.warning("请选择文章分类"),!1;const e=c.A.validateContent(this.form.content);return!!e.valid||(this.$message.warning(e.message),!1)},async save(){const t=this.validateForm();if(t){this.submitting=!0;try{const t={title:this.form.title,summary:this.form.summary||"",cover:this.form.cover||"",pBoardId:this.form.pBoardId,boardId:this.form.boardId||"",topType:this.form.topType||0,content:this.form.content};let e;this.form.id?(t.id=this.form.id,e=await o.A.post("/article/update",t)):e=await o.A.post("/article/post",t),200==e.code||1==e.code?(this.$message.success(this.form.id?"文章更新成功":"文章发布成功"),this.fromVisible=!1,this.getlist()):this.$message.error(e.message||"操作失败")}catch(e){n.A.error("保存失败:",e),this.$message.error("操作失败，请稍后重试")}finally{this.submitting=!1}}},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},handleAvatarSuccess(t){200===t.code?(this.form.cover=t.data,n.A.log(this.form.cover),this.$message.success("封面图片上传成功")):this.$message.error("图片上传失败")},beforeAvatarUpload(t){const e=/^image\/(jpeg|png|jpg|gif|webp)$/.test(t.type),a=t.size/1024/1024<5;return e?!!a||(this.$message.error("图片大小不能超过5MB!"),!1):(this.$message.error("只能上传图片格式文件!"),!1)},handleDialogClose(){this.selectedCategory=[],this.showCategoryError=!1},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}}},u=d,m=a(81656),p=(0,m.A)(u,s,i,!1,null,"7ce75a05",null),h=p.exports},74556:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"img",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[a.row.img?e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:a.row.img,"preview-src-list":[a.row.img]}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"name",label:"商家"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"广告信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"图片",prop:"img"}},[e("el-upload",{attrs:{action:"/files/upload",headers:{token:t.user.token},"file-list":t.fileList,"on-success":t.handleFileSuccess}},[e("el-button",{attrs:{type:"primary"}},[t._v("上传")])],1)],1),"ADMIN"==t.user.role?e("el-form-item",{attrs:{label:"商家",prop:"business_id"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.business_id,callback:function(e){t.$set(t.form,"business_id",e)},expression:"form.business_id"}},t._l(t.sjlist,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a(44114),a(18962)),r={data(){return{fileList:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getall(),this.getlist()},methods:{handleFileSuccess(t){console.log(t),this.form.img=t.data},async getall(){const t=await o.A.get("/Business/all");console.log(t),this.sjlist=t.data.list},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/Banner/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.fileList=[],this.fileList.push({name:"图片",url:t.img}),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"BUSINESS"==this.user.role&&(this.queryform.businessId=this.user.id);const t=await o.A.post("/Banner/list",this.queryform);console.log(t),1==t.code&&(this.tableData=t.data.rows,this.total=t.data.total)},add(){this.avatar="",this.license="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){let t="";if(t="BUSINESS"==this.user.role?this.user.id:this.form.business_id,this.form.id){const e=await o.A.post("/Banner/update",{id:this.form.id,img:this.form.img,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}else{const e=await o.A.post("/Banner/add",{img:this.form.img,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"f079ceb8",null),d=c.exports},12793:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticStyle:{width:"50%"}},[e("el-form",{staticStyle:{"padding-right":"50px"},attrs:{model:t.user,"label-width":"100px"}},[e("div",{staticStyle:{margin:"15px","text-align":"center"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/files/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.user.avatar?e("img",{staticClass:"avatar",attrs:{src:t.user.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"账号",prop:"userName"}},[e("el-input",{attrs:{disabled:"",placeholder:"账号"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),e("el-form-item",{attrs:{label:"当前登陆地",prop:"phone"}},[e("el-input",{attrs:{readonly:"",placeholder:"当前登陆地"},model:{value:t.user.loginAddress,callback:function(e){t.$set(t.user,"loginAddress",e)},expression:"user.loginAddress"}})],1),e("el-form-item",{attrs:{label:"当前登录IP",prop:"email"}},[e("el-input",{attrs:{readonly:"",placeholder:"当前登录IP"},model:{value:t.user.loginIp,callback:function(e){t.$set(t.user,"loginIp",e)},expression:"user.loginIp"}})],1),e("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("保 存")])],1)],1)],1)],1)},i=[],o=a(18962),r={name:"AdminPerson",data(){return{user:{}}},created(){},mounted(){console.log(window.localStorage.getItem("userinfo")),this.user=JSON.parse(window.localStorage.getItem("userinfo"))},methods:{handleAvatarSuccess(t,e,a){this.$set(this.user,"avatar",t.data)},async update(){const t=await o.A.post("/admin/addandupdate",this.user);console.log(t),1==t.code&&(this.$message.success(t.data),window.localStorage.setItem("userinfo",JSON.stringify(this.user)))},handleAvatarSuccess1(t,e,a){this.$set(this.user,"license",t.data)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"eb3ed938",null),d=c.exports},69878:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),"HOTEL"==t.user.role?e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")]):t._e()],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"img",label:"房间图片"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[a.row.img?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.img,"preview-src-list":[a.row.img]}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"name",label:"分类"}}),e("el-table-column",{attrs:{prop:"description",label:"分类描述"}}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{attrs:{prop:"hotalname",label:"酒店"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"房间分类",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"分类",prop:"cname"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/files/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.img?e("img",{staticClass:"avatar",attrs:{src:t.img}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"分类描述",prop:"description"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("el-form-item",{attrs:{label:"价格",prop:"price"}},[e("el-input",{attrs:{placeholder:"价格"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,img:"",token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{img:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist()},methods:{del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/hotal/typedelete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.img=t.img,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"HOTEL"==this.user.role?this.queryform.hotelId=this.user.id:this.queryform.hotelId="";const t=await o.A.get("/hotal/typelist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.img="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){let t="";t="HOTEL"==this.user.role?this.user.id:this.form.hotelId,this.form.hotelId=t,this.form.img=this.img;const e=await o.A.post("/hotal/typeadd",this.form);1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.img=t.data,console.log(this.img)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"69bd758c",null),d=c.exports},91489:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"content",label:"名称"}}),e("el-table-column",{attrs:{prop:"name",label:"评分"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-rate",{model:{value:a.row.star,callback:function(e){t.$set(a.row,"star",e)},expression:"scope.row.star"}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"商家名称"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"商家分类",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"分类",prop:"cname"}},[e("el-input",{attrs:{placeholder:"分类"},model:{value:t.form.cname,callback:function(e){t.$set(t.form,"cname",e)},expression:"form.cname"}})],1),"ADMIN"==t.user.role?e("el-form-item",{attrs:{label:"商家",prop:"business_id"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.business_id,callback:function(e){t.$set(t.form,"business_id",e)},expression:"form.business_id"}},t._l(t.sjlist,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],sjlist:[],fromVisible1:!1}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getall(),this.getlist()},methods:{chakan(t){this.content=t,this.fromVisible1=!0},async getall(){const t=await o.A.get("/Business/all");console.log(t),this.sjlist=t.data.list},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/comment/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.license=t.license,this.form.timeRange=t.time_range,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"BUSINESS"==this.user.role&&(this.queryform.businessId=this.user.id);const t=await o.A.post("/comment/list",this.queryform);console.log(t),1==t.code&&(this.tableData=t.data.rows,this.total=t.data.total)},add(){this.avatar="",this.license="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){let t="";if(t="BUSINESS"==this.user.role?this.user.id:this.form.business_id,this.form.id){const e=await o.A.post("/Category/update",{id:this.form.id,cname:this.form.cname,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}else{const e=await o.A.post("/Category/add",{cname:this.form.cname,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"51abb2fc",null),d=c.exports},67137:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"username",label:"用户"}}),e("el-table-column",{attrs:{prop:"content",label:"评价信息"}}),e("el-table-column",{attrs:{prop:"createTime",label:"评价时间"}}),e("el-table-column",{attrs:{prop:"gname",label:"商品名称"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"商家分类",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"分类",prop:"cname"}},[e("el-input",{attrs:{placeholder:"分类"},model:{value:t.form.cname,callback:function(e){t.$set(t.form,"cname",e)},expression:"form.cname"}})],1),"ADMIN"==t.user.role?e("el-form-item",{attrs:{label:"商家",prop:"business_id"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.business_id,callback:function(e){t.$set(t.form,"business_id",e)},expression:"form.business_id"}},t._l(t.sjlist,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist()},methods:{async getall(){const t=await o.A.get("/Business/all");console.log(t),this.sjlist=t.data.list},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/comment/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.license=t.license,this.form.timeRange=t.time_range,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/comment/allist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){let t="";if(t="BUSINESS"==this.user.role?this.user.id:this.form.business_id,this.form.id){const e=await o.A.post("/Category/update",{id:this.form.id,cname:this.form.cname,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}else{const e=await o.A.post("/Category/add",{cname:this.form.cname,businessId:t});1==e.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"09cd67b1",null),d=c.exports},48362:function(t,e,a){a.d(e,{A:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("h3",[t._v("欢迎使用本系统")]),e("div",{staticClass:"main"},[e("div",{attrs:{id:"main"}}),e("div",{attrs:{id:"main1"}})])])],1)},i=[],o=a(84823),r=a(18962),l={data(){return{cs:"",name:"各门店商品量",xdata:[],user:{},ydata:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo"))},methods:{async initEcharts(){const t=await r.A.post("/chart/sptj");console.log(t);const e={tooltip:{trigger:"item"},title:{text:"分类商品统计"},xAxis:{type:"category",data:t.data.x},yAxis:{type:"value"},series:[{name:"分类商品统计",type:"pie",radius:"55%",data:t.data}]},a=o.Ts(document.getElementById("main"));a.setOption(e),window.addEventListener("resize",(()=>{a.resize()}))},async initEcharts1(){const t=await r.A.post("/chart/xstj");console.log(t);const e={title:{text:"热门商品排行",subtext:"Fake Data",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},xAxis:{type:"category",boundaryGap:!1,data:t.data.x},yAxis:{type:"value"},series:[{type:"bar",data:t.data.y}]},a=o.Ts(document.getElementById("main1"));a.setOption(e),window.addEventListener("resize",(()=>{a.resize()}))}}},n=l,c=a(81656),d=(0,c.A)(n,s,i,!1,null,null,null),u=d.exports},95512:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"rightreply",label:"答案"}}),e("el-table-column",{attrs:{prop:"tikuname",label:"所属题库"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"题库信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"名称",prop:"gname"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"类型",prop:"score"}},[e("el-select",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[e("el-option",{attrs:{value:"选择题",label:"选择题"}}),e("el-option",{attrs:{value:"判断题",label:"判断题"}})],1)],1),"选择题"==t.form.type?e("el-form-item",{attrs:{label:"A",prop:"optiona"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.optiona,callback:function(e){t.$set(t.form,"optiona",e)},expression:"form.optiona"}})],1):t._e(),"选择题"==t.form.type?e("el-form-item",{attrs:{label:"B",prop:"optionb"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.optionb,callback:function(e){t.$set(t.form,"optionb",e)},expression:"form.optionb"}})],1):t._e(),"选择题"==t.form.type?e("el-form-item",{attrs:{label:"C",prop:"optionc"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.optionc,callback:function(e){t.$set(t.form,"optionc",e)},expression:"form.optionc"}})],1):t._e(),e("el-form-item",{attrs:{label:"正确答案",prop:"rightreply"}},[e("el-input",{attrs:{placeholder:"正确答案"},model:{value:t.form.rightreply,callback:function(e){t.$set(t.form,"rightreply",e)},expression:"form.rightreply"}})],1),e("el-form-item",{attrs:{label:"所属题库",prop:"score"}},[e("el-select",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:t.form.tikuid,callback:function(e){t.$set(t.form,"tikuid",e)},expression:"form.tikuid"}},t._l(t.tikulist,(function(t){return e("el-option",{attrs:{value:t.id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"是否重点题目",prop:"score"}},[e("el-select",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:t.form.isim,callback:function(e){t.$set(t.form,"isim",e)},expression:"form.isim"}},[e("el-option",{attrs:{value:"是",label:"是"}}),e("el-option",{attrs:{value:"否",label:"否"}})],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{fileList:[],teacherlist:[],tikulist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist(),this.getall()},methods:{shenhe(t){},async selectca(t){console.log(t);const e=await o.A.get("/hotal/typeByhotel?id="+t);console.log(e),this.categoryList=e.data},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/tiku/all");console.log(t),this.tikulist=t.data},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/tiku/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.form.teacherid=t.teacherid,"ADMIN"==this.user.role&&this.getall(),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/tiku/qlistim",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){const t=await o.A.post("/tiku/savequestion",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"17d5889a",null),d=c.exports},77139:function(t,e,a){a.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.fbsp}},[t._v("新增")])],1),e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"联系人"}}),e("el-table-column",{attrs:{prop:"addressname",label:"地址"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{visible:t.fromVisible,title:"地址信息",width:"40%"},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"联系人",prop:"name",required:""}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"地址",prop:"addressname",required:""}},[e("el-input",{model:{value:t.form.addressname,callback:function(e){t.$set(t.form,"addressname",e)},expression:"form.addressname"}})],1),e("el-form-item",{attrs:{label:"电话",prop:"phone",required:""}},[e("el-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("保存")])],1)],1)],1)],1)},i=[],o=a(18962),r=a(5507),l=a.n(r),n={data(){return{content:"",queryform:{pageNum:1,pageSize:10},total:0,fromVisible:!1,tableData:[],typelist:[],form:{},fromVisible1:!1}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getall(),this.getlist()},methods:{chakan(t){this.content=t.detail,this.fromVisible1=!0},handleEdit(t){this.form=t,this.fromVisible=!0},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},async save(){const t=await o.A.post("/address/add",this.form);console.log(t),this.fromVisible=!1,this.getlist()},async getall(){const t=await o.A.get("/type/getall");console.log(t),this.typelist=t.data},handleAvatarSuccesss(t){this.form.img=t.data},fbsp(){this.form={},this.fromVisible=!0},initE(){this.editor=new(l())("#e"),this.editor.create()},del(t){this.$confirm("是否确认退课?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/address/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},async getlist(){const t=await o.A.get("/address/list",{params:this.queryform});console.log(t),this.tableData=t.data.records,this.total=t.data.total}}},c=n,d=a(81656),u=(0,d.A)(c,s,i,!1,null,"60cf1867",null),m=u.exports},65431:function(t,e,a){a.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("el-table",{attrs:{data:t.tableData,stripe:"",height:"300"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{attrs:{data:a.row.detail,stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"avatar",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()]}}],null,!0)}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{attrs:{prop:"amount",label:"数量"}})],1)]}}])}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"number",label:"订单编号"}}),e("el-table-column",{attrs:{prop:"price",label:"总价"}}),e("el-table-column",{attrs:{prop:"ordertime",label:"下单时间"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",[t._v(t._s(a.row.status))])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{visible:t.fromVisible,title:"地址信息",width:"40%"},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"联系人",prop:"name",required:""}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"地址",prop:"addressname",required:""}},[e("el-input",{model:{value:t.form.addressname,callback:function(e){t.$set(t.form,"addressname",e)},expression:"form.addressname"}})],1),e("el-form-item",{attrs:{label:"电话",prop:"phone",required:""}},[e("el-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("保存")])],1)],1)],1)],1)},i=[],o=a(18962),r=a(5507),l=a.n(r),n={data(){return{content:"",activeName:"first",queryform:{pageNum:1,pageSize:10},total:0,tableData1:[],fromVisible:!1,tableData:[],typelist:[],form:{},fromVisible1:!1}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getlist()},methods:{chakan(t){this.content=t.detail,this.fromVisible1=!0},handleEdit(t){this.form=t,this.fromVisible=!0},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},async save(){const t=await o.A.post("/address/add",this.form);console.log(t),this.fromVisible=!1,this.getlist()},async getall(){const t=await o.A.get("/type/getall");console.log(t),this.typelist=t.data},handleAvatarSuccesss(t){this.form.img=t.data},fbsp(){this.form={},this.fromVisible=!0},initE(){this.editor=new(l())("#e"),this.editor.create()},zhifu(t){this.$confirm("是否确认支付?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/order/zhifu",{id:t.id,zt:"已支付"});console.log(e),1==e.code&&(this.$message({type:"success",message:"支付成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},sh(t){this.$confirm("是否确认收货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/order/quxiao",{id:t.id,zt:"已收货"});console.log(e),1==e.code&&(this.$message({type:"success",message:"收货成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},del(t){this.$confirm("是否确认取消?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/guke/orderdelete?id="+t.id);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},async getlist(){const t=await o.A.get("/guke/order/list");console.log(t),this.tableData=t.data}}},c=n,d=a(81656),u=(0,d.A)(c,s,i,!1,null,"f4fbb2ba",null),m=u.exports},53704:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,stripe:"",height:"300"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{attrs:{data:a.row.detail,stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"avatar",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()]}}],null,!0)}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{attrs:{prop:"amount",label:"数量"}})],1)]}}])}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"number",label:"订单编号"}}),e("el-table-column",{attrs:{prop:"price",label:"总价"}}),e("el-table-column",{attrs:{prop:"ordertime",label:"下单时间"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",[t._v(t._s(a.row.status))])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"当前物流",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"当前地址",prop:"intime"}},[e("el-input",{model:{value:t.form.dqdz,callback:function(e){t.$set(t.form,"dqdz",e)},expression:"form.dqdz"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a(98992),a(3949),a(18962)),r={data(){return{fileList:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],roomlist:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist()},methods:{async fh(t){this.$confirm("是否确认发货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/order/quxiao",{id:t.id,zt:"待收货"});console.log(e),1==e.code&&(this.$message({type:"success",message:"发货成功!"}),this.getlist())})).catch((t=>{console.log(t),this.$message({type:"info",message:"已取消"})}))},async selectca(t){console.log(t);const e=await o.A.get("/hotal/orderall");console.log(e),this.categoryList=e.data},async selectcaf(t){this.categoryList.forEach((async(e,a)=>{if(e.id==t){this.form.outtime=this.categoryList[a].outtime,this.form.userid=this.categoryList[a].userid,this.form.hotelid=this.categoryList[a].hotelid,this.form.typeid=this.categoryList[a].typeid,console.log(this.categoryList[a]);const t=await o.A.get(`/hotal/roomByhotalId?hotelId=${this.categoryList[a].hotelid}&&typeId=${this.categoryList[a].typeid}`);console.log(t),this.roomlist=t.data,this.$forceUpdate()}}))},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/hotal/all");console.log(t),this.hotellist=t.data},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/admin/orderdelete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/admin/order/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){const t=await o.A.post("/order/quxiao",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"5f6d8d4d",null),d=c.exports},89025:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticStyle:{width:"50%"}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.user,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"原始密码",prop:"password"}},[e("el-input",{attrs:{"show-password":"",placeholder:"原始密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[e("el-input",{attrs:{"show-password":"",placeholder:"新密码"},model:{value:t.user.newPassword,callback:function(e){t.$set(t.user,"newPassword",e)},expression:"user.newPassword"}})],1),e("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[e("el-input",{attrs:{"show-password":"",placeholder:"确认密码"},model:{value:t.user.confirmPassword,callback:function(e){t.$set(t.user,"confirmPassword",e)},expression:"user.confirmPassword"}})],1),e("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确认修改")])],1)],1)],1)],1)},i=[],o=a(18962),r={name:"AdminPerson",data(){return{user:{}}},created(){},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo"))},methods:{handleAvatarSuccess(t,e,a){this.$set(this.user,"avatar",t.data)},async update(){if(this.user.passnewPassword!==this.user.confirmPassword)this.$message.warning("新密码和确认密码不一样");else if("BUSINESS"==this.user.role){const t=await o.A.post("/Business/updatePassword",{id:this.user.id,username:this.user.username,password:this.user.newPassword});console.log(t),1==t.code&&this.$message.success(t.data)}},handleAvatarSuccess1(t,e,a){this.$set(this.user,"license",t.data)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,null,null),d=c.exports},14919:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"teacherName",label:"创建人"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.wtch(a.row.id)}}},[t._v("查看回答")]),e("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.wtch1(a.row.id)}}},[t._v("评价")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"回答信息",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},t._l(t.commentlist,(function(a){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[null!==a.avatar?e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.avatar,alt:""}}):e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.teacheravatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(null==a.username?a.teachername:a.username))]),e("div",{staticClass:"username"},[t._v(t._s(a.name))])]),e("div",{staticClass:"dianzan",staticStyle:{flex:"1","text-align":"right"}},[1==a.dianzan?e("i",{staticClass:"el-icon-star-off",staticStyle:{color:"blue"},on:{click:function(e){return t.changestar(a)}}}):t._e(),0==a.dianzan?e("i",{staticClass:"el-icon-star-off",on:{click:function(e){return t.changestar(a)}}}):t._e()])])})),0),e("el-dialog",{attrs:{title:"评价",visible:t.fromVisible2,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible2=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"内容",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible2=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save1}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"问答信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"问题名称",prop:"gname"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"小组",prop:"gname"}},[e("el-select",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:t.form.groupid,callback:function(e){t.$set(t.form,"groupid",e)},expression:"form.groupid"}},t._l(t.grouplist,(function(t){return e("el-option",{attrs:{value:t.id,label:t.name}})})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a(98992),a(3949),a(18962)),r={data(){return{fileList:[],teacherlist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,tableData1:[],grouplist:[],token:"",name:null,fromVisible:!1,fromVisible1:!1,fromVisible2:!1,avatar:"",queryform:{keyword:"",pageNum:1,tid:0,pageSize:10},license:"",form:{avatar:"",license:""},user:{},commentlist:[],rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist(),this.getall()},methods:{shenhe(t){},async changestar(t){t.dianzan=!t.dianzan,this.commentlist=JSON.parse(JSON.stringify(this.commentlist));const e=await o.A.post("/star/star",{aid:t.id,tid:this.user.id,qqid:this.qid});console.log(e)},async save1(){await o.A.post("/answer/add",{name:this.form.content,qid:this.qid,tid:this.user.id});this.fromVisible2=!1,this.$message.success("成功")},wtch1(t){this.qid=t,this.fromVisible2=!0},async wtch(t){this.qid=t;const e=await o.A.get("/answer/list?id="+t);console.log(e),this.commentlist=e.data,this.commentlist.forEach((t=>{t.dianzan=!1})),console.log(this.commentlist),this.fromVisible1=!0},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/group/all");console.log(t),this.grouplist=t.data},del1(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/group/deleteusergroup?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.fromVisible1=!1)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/group/qdelete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.form.teacherid=t.teacherid,"ADMIN"==this.user.role&&this.getall(),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"TEACHER"==this.user.role&&(this.queryform.tid=this.user.id);const t=await o.A.get("/group/qlist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,"TEACHER"==this.user.role&&(this.form.tid=this.user.id);const t=await o.A.post("/group/addgroupquestion",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"24e3d6ef",null),d=c.exports}}]);