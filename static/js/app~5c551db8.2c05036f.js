"use strict";(self["webpackChunkhard_diancan_front"]=self["webpackChunkhard_diancan_front"]||[]).push([[385],{368:function(e,t,n){var a=n(86674),o=n(88691),s=n(56178),r=n(27946),i=n(62432),c=n(58919),l=n(92010),m=n(54307),u=n(64262),p=n(96871),g=n(87258),d=n(15932),h=n(52743),f=n(90245),v=n(48106),A=n(57695),y=n(88433),w=n(77782),b=n(63907),S=n(80476),C=n(32147),k=n(36108),I=n(39311),E=n(88195),O=n(26710),P=n(79881),L=n(44225),$=n(53911),U=n(84052),T=n(15863),j=n(48604),q=n(17021),x=n(2621),K=n(19688),_=n(76417),z=n(55044),N=n(7090),R=n(18478),B=n(47797),F=n(61720),M=n(3780),J=n(32219),W=n(92058);a["default"].use(s.Ay);const Z=[{path:"/",redirect:"/userhome"},{path:"/login",name:"login",component:r.A},{path:"/register",name:"register",component:i.A},{path:"/userhomedetail",name:"userhomedetail",component:C.A},{path:"/userindex",name:"userindex",component:c.A,redirect:"/userhome",children:[{path:"/userhome",name:"homee",component:S.A},{path:"/usertest",name:"usertest",component:K.A},{path:"/userquestion",name:"userquestion",component:R.A},{path:"/usertypedetail",name:"usertypedetail",component:k.A},{path:"/userlearn",name:"userlearn",component:z.A},{path:"/usersourcedetail",name:"usersourcedetail",component:I.A},{path:"/usersource",name:"usersource",component:O.A},{path:"/userblog",name:"userblog",component:E.A},{path:"/usercheckin",name:"usercheckin",component:$.A},{path:"/userinfo",name:"userinfo",component:L.A},{path:"/myaddress",name:"myaddress",component:M.A},{path:"/myorder",name:"myorder",component:J.A}]},{path:"/index",name:"index",component:l.A,redirect:"/home",children:[{path:"/article",name:"article",component:F.A},{path:"/home",name:"homee",component:m.A},{path:"/teacher",name:"teacher",component:u.A},{path:"/businessPersonal",name:"businessPersonal",component:p.A},{path:"/password",name:"password",component:g.A},{path:"/category",name:"category",component:d.A},{path:"/room",name:"room",component:h.A},{path:"/qanda",name:"qanda",component:N.A},{path:"/jinghua",name:"jinghua",component:B.A},{path:"/xztl",name:"xztl",component:_.A},{path:"/type",name:"type",component:U.A},{path:"/ai-settings",name:"AiSettings",component:W.A},{path:"/tiku",name:"tiku",component:j.A},{path:"/shijuan",name:"shijuan",component:x.A},{path:"/source",name:"source",component:T.A},{path:"/banner",name:"banner",component:f.A},{path:"/ruzhu",name:"ruzhu",component:P.A},{path:"/order",name:"order",component:y.A},{path:"/comment",name:"comment",component:w.A},{path:"/collect",name:"collect",component:b.A},{path:"/admin",name:"admin",component:v.A},{path:"/question",name:"question",component:q.A},{path:"/user",name:"user",component:A.A}]},{path:"/about",name:"about",component:()=>n.e(594).then(n.bind(n,8196))}],D=new s.Ay({routes:Z}),G=["/login","/register","/about","/index","/home","/article","/teacher","/businessPersonal","/password","/category","/room","/qanda","/jinghua","/xztl","/type","/ai-settings","/tiku","/shijuan","/source","/banner","/ruzhu","/userhome","/userhomedetail"],H=["/userindex","/usertest","/userquestion","/usertypedetail","/userlearn","/usersourcedetail","/usersource","/userblog","/usercheckin","/userinfo","/myaddress","/myorder"],Q=["/admin","/order","/comment","/collect","/user","/question"];function V(e){return!!H.some((t=>e.startsWith(t)))||!!Q.some((t=>e.startsWith(t)))}D.beforeEach(((e,t,n)=>{const a=localStorage.getItem("token");a?"/login"===e.path?n("/userhome"):n():G.includes(e.path)?n():V(e.path)?n(`/login?redirect=${e.path}`):n()})),D.afterEach(((e,t)=>{e.meta.title&&(document.title=e.meta.title)}));var X=D,Y=n(89143),ee=n.n(Y);function te(e){return e?/^https?:\/\//.test(e)?e:"https://orkj406039jmw6me.top/api/file/getImage/"+e:""}a["default"].prototype.$getImageUrl=te,a["default"].config.productionTip=!1,a["default"].use(ee()),new a["default"]({router:X,render:e=>e(o.A)}).$mount("#app")},18962:function(e,t,n){var a=n(94373),o=n(89143),s=n(40981);const r=a.A.create({baseURL:"https://orkj406039jmw6me.top/api",timeout:15e3,withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8"}});function i(e){let t="è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",n=-1;if(e.response&&401===e.response.status)t="ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•",n=401,s.A.error("401 æœªæˆæƒ:",e.response.data);else if("ECONNABORTED"===e.code&&e.message.includes("timeout"))t="è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•",n=408;else if(e.response)switch(n=e.response.status,e.response.status){case 403:t="æ‹’ç»è®¿é—®ï¼Œæƒé™ä¸è¶³";break;case 404:t="è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨";break;case 500:t="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯";break;case 504:t="ç½‘å…³è¶…æ—¶";break;default:t=e.response.data?.message||e.response.data?.msg||"è¯·æ±‚å¤±è´¥"}else e.request&&(e.message.includes("Network Error")?(t="ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥",n=0):(t="æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨",n=0));return s.A.error("è¯·æ±‚é”™è¯¯è¯¦æƒ…:",e),Promise.reject({code:n,msg:t,data:e.response?.data||null,isError:!0,originalError:null})}r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),s.A.log(`ğŸ“¤ è¯·æ±‚: ${e.method.toUpperCase()} ${e.baseURL}${e.url}`),e}),(e=>(o.Message.error("è¯·æ±‚é…ç½®é”™è¯¯"),Promise.reject({code:-1,msg:"è¯·æ±‚é…ç½®é”™è¯¯",isError:!0})))),r.interceptors.response.use((e=>{s.A.log(`ğŸ“¥ å“åº”: ${e.config.url}`,e.data);const t=e.data;return t}),(e=>i(e))),t.A=r},36197:function(e,t,n){n(98992),n(54520),n(81454);var a=n(24492);const o={GEMINI:"gemini",OPENAI_COMPATIBLE:"openai-compatible",ANTHROPIC:"anthropic"},s={protocol:o.OPENAI_COMPATIBLE,baseUrl:"https://api.openai.com/v1",apiKey:"",modelId:"gpt-4-turbo",systemPrompt:"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„è®ºå›åŠ©æ‰‹ç«å¦™ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å›ç­”é—®é¢˜ã€æä¾›å»ºè®®ã€‚",isOnline:1};class r{constructor(){this.config=this.loadConfig()}async syncFromBackend(){try{const e=await a.Ay.config.get();if((1===e.code||200===e.code)&&e.data){const t=this.config.apiKey;return this.config={...s,...e.data},t&&(this.config.apiKey=t),this.config.isOnline=1,this.saveToLocalStorage(this.config),console.log("aiService ä»åç«¯åŒæ­¥é…ç½®:",this.config),this.config}}catch(e){return console.log("aiService ä»åç«¯åŒæ­¥é…ç½®å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°é…ç½®"),this.config}}loadConfig(){const e=localStorage.getItem("huomiao_ai_config"),t=e?{...s,...JSON.parse(e)}:{...s};return t.isOnline=1,t}saveToLocalStorage(e){localStorage.setItem("huomiao_ai_config",JSON.stringify(e))}async saveConfig(e){try{const t=this.loadConfig();this.config={...t,...e};const n=await a.Ay.config.save({protocol:this.config.protocol,apiKey:this.config.apiKey,baseUrl:this.config.baseUrl,modelId:this.config.modelId,systemPrompt:this.config.systemPrompt});if(1===n.code||200===n.code){const e={...this.config};return e.isOnline=1,this.saveToLocalStorage(e),console.log("aiService.saveConfig() é…ç½®å·²ä¿å­˜åˆ°åç«¯"),{success:!0,message:n.msg||"é…ç½®ä¿å­˜æˆåŠŸ"}}return console.error("aiService.saveConfig() ä¿å­˜å¤±è´¥:",n.msg,"code:",n.code),{success:!1,message:n.msg||"é…ç½®ä¿å­˜å¤±è´¥"}}catch(t){return console.error("aiService.saveConfig() è¯·æ±‚å¤±è´¥:",t),this.saveToLocalStorage(this.config),{success:!1,message:t.message||"ç½‘ç»œé”™è¯¯"}}}async getConfigFromBackend(){try{const e=await a.Ay.config.get();if((1===e.code||200===e.code)&&e.data){const t=this.loadConfig(),n=t.apiKey;return this.config={...s,...e.data},n&&(this.config.apiKey=n),this.config.isOnline=1,this.saveToLocalStorage(this.config),this.config}throw new Error(e.msg||"è·å–é…ç½®å¤±è´¥")}catch(e){throw console.error("aiService.getConfigFromBackend() è¯·æ±‚å¤±è´¥:",e),e}}async testConnection(e=null){try{const t=e||this.config,n=await a.Ay.config.test({apiKey:t.apiKey,baseUrl:t.baseUrl,modelId:t.modelId,protocol:t.protocol});return 1!==n.code&&200!==n.code||!n.data?{success:!1,message:n.msg||"è¿æ¥å¤±è´¥"}:{success:n.data.connected,message:n.data.connected?"è¿æ¥æˆåŠŸ":"è¿æ¥å¤±è´¥",latency:n.data.latency}}catch(t){return console.error("aiService.testConnection() è¯·æ±‚å¤±è´¥:",t),{success:!1,message:t.message||"ç½‘ç»œé”™è¯¯"}}}chatStream(e,t,n,o,s){try{const r=e.filter((e=>"user"===e.role)).pop();if(!r)throw new Error("æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·æ¶ˆæ¯");const i=r.text||r.content;return a.Ay.chat.send({question:i},((e,a)=>{"content"===e?t&&t(a):"references"===e&&n&&n(a)}),(e=>{console.error("aiService.chatStream() é”™è¯¯:",e),s&&s(e)}),(()=>{o&&o()}))}catch(r){return console.error("aiService.chatStream() è¯·æ±‚å¤±è´¥:",r),s&&s(r),()=>{}}}async chat(e,t,n){if(t)return new Promise(((a,o)=>{let s="",r=[];const i=this.chatStream(e,(e=>{s+=e,t(e)}),(e=>{r=e,n&&n(e)}),(()=>{a({reply:s,usedKnowledge:r,latency:0})}),(e=>{o(e)}));a.cancel=i}));try{const t=e.map((e=>{let t=e.role;return"model"===t&&(t="assistant"),{role:t,content:e.text||e.content}})),n=await a.Ay.chat.send({messages:t});if(1!==n.code&&200!==n.code||!n.data)throw new Error(n.msg||"AI èŠå¤©å¤±è´¥");return{reply:n.data.reply,usedKnowledge:n.data.usedKnowledge||[],latency:n.data.latency}}catch(o){throw console.error("aiService.chat() è¯·æ±‚å¤±è´¥:",o),o}}isOnline(){return 1===this.config.isOnline}setOnline(){this.config.isOnline=1,this.saveToLocalStorage(this.config)}}t.A=new r},40981:function(e,t){const n=!1;class a{log(...e){}info(...e){}warn(...e){}error(...e){console.error(...e)}debug(...e){n&&console.debug(...e)}group(e){n&&console.group(e)}groupEnd(){n&&console.groupEnd()}table(e){n&&console.table(e)}}t.A=new a},64643:function(e,t,n){n(14603),n(47566),n(98721);class a{validateUsername(e){if(!e||"string"!==typeof e)return{valid:!1,message:"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"};const t=e.trim();if(t.length<3||t.length>20)return{valid:!1,message:"ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´"};const n=/^[a-zA-Z0-9_]+$/;return n.test(t)?{valid:!0,value:t}:{valid:!1,message:"ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿"}}validatePassword(e){if(!e||"string"!==typeof e)return{valid:!1,message:"å¯†ç ä¸èƒ½ä¸ºç©º"};if(e.length<6)return{valid:!1,message:"å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä¸ªå­—ç¬¦"};if(e.length>32)return{valid:!1,message:"å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡32ä¸ªå­—ç¬¦"};const t=/[a-zA-Z]/.test(e),n=/[0-9]/.test(e);return t&&n?{valid:!0}:{valid:!0,message:"å»ºè®®å¯†ç åŒ…å«å­—æ¯å’Œæ•°å­—ï¼Œä»¥æé«˜å®‰å…¨æ€§"}}validateConfirmPassword(e,t){return t?e!==t?{valid:!1,message:"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"}:{valid:!0}:{valid:!1,message:"è¯·ç¡®è®¤å¯†ç "}}validateEmail(e){if(!e||"string"!==typeof e)return{valid:!1,message:"é‚®ç®±ä¸èƒ½ä¸ºç©º"};const t=e.trim(),n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return n.test(t)?{valid:!0,value:t.toLowerCase()}:{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"}}validatePhone(e){if(!e||"string"!==typeof e)return{valid:!1,message:"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"};const t=e.trim(),n=/^1[3-9]\d{9}$/;return n.test(t)?{valid:!0,value:t}:{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ç "}}validateTitle(e){if(!e||"string"!==typeof e)return{valid:!1,message:"æ ‡é¢˜ä¸èƒ½ä¸ºç©º"};const t=e.trim();return t.length<2?{valid:!1,message:"æ ‡é¢˜é•¿åº¦è‡³å°‘ä¸º2ä¸ªå­—ç¬¦"}:t.length>100?{valid:!1,message:"æ ‡é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦"}:{valid:!0,value:t}}validateContent(e){if(!e||"string"!==typeof e)return{valid:!1,message:"å†…å®¹ä¸èƒ½ä¸ºç©º"};const t=e.trim();return 0===t.length?{valid:!1,message:"å†…å®¹ä¸èƒ½ä¸ºç©º"}:t.length<10?{valid:!1,message:"å†…å®¹é•¿åº¦è‡³å°‘ä¸º10ä¸ªå­—ç¬¦"}:t.length>5e4?{valid:!1,message:"å†…å®¹é•¿åº¦ä¸èƒ½è¶…è¿‡50000ä¸ªå­—ç¬¦"}:{valid:!0,value:t}}sanitizeInput(e){return e&&"string"===typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):""}validateURL(e){if(!e||"string"!==typeof e)return{valid:!1,message:"URLä¸èƒ½ä¸ºç©º"};try{return new URL(e),{valid:!0,value:e}}catch{return{valid:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„URLåœ°å€"}}}validateLength(e,t=0,n=1/0,a="å­—æ®µ"){if(!e||"string"!==typeof e)return{valid:!1,message:`${a}ä¸èƒ½ä¸ºç©º`};const o=e.trim();return o.length<t?{valid:!1,message:`${a}é•¿åº¦è‡³å°‘ä¸º${t}ä¸ªå­—ç¬¦`}:o.length>n?{valid:!1,message:`${a}é•¿åº¦ä¸èƒ½è¶…è¿‡${n}ä¸ªå­—ç¬¦`}:{valid:!0,value:o}}}t.A=new a}}]);