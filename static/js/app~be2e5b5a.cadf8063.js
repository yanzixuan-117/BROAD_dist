(function(){"use strict";var t={8463:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"avatar",label:"题库图片"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()]}}])}),e("el-table-column",{attrs:{prop:"score",label:"分数"}}),e("el-table-column",{attrs:{prop:"num",label:"题目数"}}),e("el-table-column",{attrs:{prop:"teachername",label:"教课教师"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"题库信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"名称",prop:"gname"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"图片",prop:"avatar"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/files/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.avatar?e("img",{staticClass:"avatar",attrs:{src:t.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"分数",prop:"score"}},[e("el-input",{attrs:{placeholder:"分数"},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),e("el-form-item",{attrs:{label:"数量",prop:"num"}},[e("el-input",{attrs:{placeholder:"数量"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{fileList:[],teacherlist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,tid:0,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist(),"ADMIN"==this.user.role&&this.getall()},methods:{shenhe(t){},async selectca(t){console.log(t);const e=await o.A.get("/hotal/typeByhotel?id="+t);console.log(e),this.categoryList=e.data},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/teacher/all");console.log(t),this.teacherlist=t.data},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/tiku/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.form.teacherid=t.teacherid,"ADMIN"==this.user.role&&this.getall(),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"TEACHER"==this.user.role&&(this.queryform.tid=this.user.id);const t=await o.A.get("/tiku/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,"TEACHER"==this.user.role&&(this.form.teacherid=this.user.id);const t=await o.A.post("/tiku/add",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"11c934c6",null),d=c.exports},7858:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:"","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[e("el-table-column",{attrs:{prop:"id",label:"id"}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"desc",label:"描述"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1)],1)]),e("el-dialog",{attrs:{title:"板块信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"父id",prop:"pid"}},[e("el-input",{attrs:{placeholder:"请输入父id默认0"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"desc"}},[e("el-input",{attrs:{placeholder:"描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{fileList:[],teacherlist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist()},methods:{shenhe(t){},async selectca(t){console.log(t);const e=await o.A.get("/hotal/typeByhotel?id="+t);console.log(e),this.categoryList=e.data},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/teacher/all");console.log(t),this.teacherlist=t.data},guidang(t){this.$confirm("是否确认归档？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/subject/guidang?id="+t);console.log(e),200!=e.code&&1!=e.code||(this.$message({type:"success",message:"归档成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.post("/board/delete",{id:t});console.log(e),200!=e.code&&1!=e.code||(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/board/list",{params:this.queryform});console.log(t),200!=t.code&&1!=t.code||(this.tableData=t.data)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){const t=await o.A.post("/board/add",this.form);200!=t.code&&1!=t.code||(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"ea0ac780",null),d=c.exports},80226:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"username",label:"账号"}}),e("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"用户信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"账号",prop:"username"}},[e("el-input",{attrs:{placeholder:"账号"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/admin/common/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.avatar?e("img",{staticClass:"avatar",attrs:{src:t.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{keyword:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:JSON.parse(localStorage.getItem("userinfo")||"{}"),rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],type:[{required:!0,message:"请选择商家类型",trigger:"blur"}]},ids:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.getlist()},methods:{del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/user/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.license=t.license,this.form.timeRange=t.time_range,this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){const t=await o.A.get("/user/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,this.form.role="ADMIN";const t=await o.A.post("/user/useraddandupdate",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"733a8dea",null),d=c.exports},88977:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"id",label:"订单编号"}}),e("el-table-column",{attrs:{prop:"username",label:"用户"}}),e("el-table-column",{attrs:{prop:"hotelname",label:"酒店"}}),e("el-table-column",{attrs:{prop:"typename",label:"客房"}}),e("el-table-column",{attrs:{prop:"roomname",label:"房间号"}}),e("el-table-column",{attrs:{prop:"intime",label:"入住时间"}}),e("el-table-column",{attrs:{prop:"outtime",label:"退房时间"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return["已退房"!==a.row.status?e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("退房")]):t._e(),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"入住信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"订单编号",prop:"categoryId"}},[e("el-select",{staticStyle:{width:"100%"},on:{change:t.selectcaf},model:{value:t.form.orderid,callback:function(e){t.$set(t.form,"orderid",e)},expression:"form.orderid"}},t._l(t.categoryList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"房间号",prop:"categoryId"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.roomid,callback:function(e){t.$set(t.form,"roomid",e)},expression:"form.roomid"}},t._l(t.roomlist,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"入住日期",prop:"intime"}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"入住时间"},model:{value:t.form.intime,callback:function(e){t.$set(t.form,"intime",e)},expression:"form.intime"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a(98992),a(3949),a(18962)),r={data(){return{fileList:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,avatar:"",queryform:{uid:"",pageNum:1,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],roomlist:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist()},methods:{async selectca(t){console.log(t);const e=await o.A.get("/hotal/orderall");console.log(e),this.categoryList=e.data},async selectcaf(t){this.categoryList.forEach((async(e,a)=>{if(e.id==t){this.form.outtime=this.categoryList[a].outtime,this.form.userid=this.categoryList[a].userid,this.form.hotelid=this.categoryList[a].hotelid,this.form.typeid=this.categoryList[a].typeid,console.log(this.categoryList[a]);const t=await o.A.get(`/hotal/roomByhotalId?hotelId=${this.categoryList[a].hotelid}&&typeId=${this.categoryList[a].typeid}`);console.log(t),this.roomlist=t.data,this.$forceUpdate()}}))},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/hotal/all");console.log(t),this.hotellist=t.data},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/hotal/checkdelete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.$confirm("是否确认退房?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/hotal/checklogout?id="+t.orderid);console.log(e),1==e.code&&(this.$message({type:"success",message:"退房成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){this.queryform.uid=this.user.id;const t=await o.A.get("/hotal/percheckinlist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){const t=await o.A.post("/hotal/addcheckin",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"5b7af92f",null),d=c.exports},67134:function(t,e,a){a.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-container"},[e("div",{staticClass:"action-card"},[e("div",{staticClass:"search-section"},[e("el-button",{staticClass:"btn-back",attrs:{type:"text"},on:{click:t.goBack}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v("返回 ")]),e("div",{staticClass:"search-input"},[e("el-input",{staticClass:"search-box",attrs:{placeholder:"请输入关键词搜索文章标题或内容",clearable:""},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}},[e("template",{slot:"prefix"},[e("i",{staticClass:"el-icon-search"})])],2)],1),e("div",{staticClass:"action-buttons"},[e("el-button",{staticClass:"btn-primary",attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[e("i",{staticClass:"el-icon-search"}),t._v("查询 ")]),e("el-button",{staticClass:"btn-reset",on:{click:function(e){return t.research()}}},[e("i",{staticClass:"el-icon-refresh"}),t._v("重置 ")]),e("el-button",{staticClass:"btn-add",attrs:{type:"warning"},on:{click:function(e){return t.add()}}},[e("i",{staticClass:"el-icon-plus"}),t._v("发布新文章 ")])],1)],1)]),e("div",{staticClass:"content-card"},[e("div",{staticClass:"table-wrapper"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"article-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#f8fafc",color:"#2c3e50",fontWeight:"600",fontSize:"14px"},"element-loading-text":"正在加载数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"article-id"},[t._v("#"+t._s(a.row.id))])]}}])}),e("el-table-column",{attrs:{prop:"title",label:"文章标题",width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"article-title-cell"},[e("div",{staticClass:"title-text",attrs:{title:a.row.title}},[t._v(" "+t._s(a.row.title)+" ")]),a.row.summary?e("div",{staticClass:"title-summary"},[t._v(" "+t._s(a.row.summary)+" ")]):t._e()])]}}])}),e("el-table-column",{attrs:{prop:"cover",label:"封面",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"cover-container"},[a.row.cover?e("el-image",{staticClass:"cover-image",attrs:{src:t.getImageUrl(a.row.cover),"preview-src-list":[t.getImageUrl(a.row.cover)],fit:"cover"}},[e("div",{staticClass:"image-error",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture"})])]):e("div",{staticClass:"no-cover"},[e("i",{staticClass:"el-icon-picture-outline"})])],1)]}}])}),e("el-table-column",{attrs:{prop:"boardName",label:"分类",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{staticClass:"category-tag",attrs:{size:"small",type:"info"}},[t._v(" "+t._s(a.row.boardName||"未分类")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"pboardName",label:"标签",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{staticClass:"tag-item",attrs:{size:"small",type:t.getTagType(a.row.pboardName)}},[t._v(" "+t._s(a.row.pboardName||"无标签")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"nickName",label:"作者",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"author-info"},[e("i",{staticClass:"el-icon-user"}),e("span",[t._v(t._s(a.row.nickName))])])]}}])}),e("el-table-column",{attrs:{prop:"postTime",label:"发布日期",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"date-cell"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(t._s(t.formatDate(a.row.postTime)))])])]}}])}),e("el-table-column",{attrs:{prop:"readCount",label:"浏览量",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"stat-item"},[e("i",{staticClass:"el-icon-view"}),e("span",{staticClass:"stat-value"},[t._v(t._s(a.row.readCount||0))])])]}}])}),e("el-table-column",{attrs:{prop:"content",label:"内容预览",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"preview-btn",attrs:{type:"info",size:"mini"},on:{click:function(e){return t.chakan(a.row.content)}}},[e("i",{staticClass:"el-icon-document"}),t._v("查看内容 ")])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"200",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"action-buttons-cell"},[e("el-button",{staticClass:"edit-btn",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[e("i",{staticClass:"el-icon-edit"}),t._v("编辑 ")]),e("el-button",{staticClass:"delete-btn",attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除 ")])],1)]}}])})],1),0!==t.tableData.length||t.loading?t._e():e("div",{staticClass:"empty-state"},[e("i",{staticClass:"el-icon-document-delete"}),e("p",[t._v("暂无文章数据")]),e("p",{staticClass:"empty-tip"},[t._v('点击"发布新文章"按钮创建您的第一篇文章')])])],1),e("div",{staticClass:"pagination-wrapper"},[e("el-pagination",{staticClass:"custom-pagination",attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)]),e("el-dialog",{attrs:{title:"文章内容预览",visible:t.fromVisible1,width:"60%","close-on-click-modal":!1,"custom-class":"content-preview-dialog"},on:{"update:visible":function(e){t.fromVisible1=e}}},[e("div",{staticClass:"content-preview",domProps:{innerHTML:t._s(t.content)}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible1=!1}}},[t._v("关闭")])],1)]),e("el-dialog",{attrs:{title:t.form.id?"编辑文章":"发布新文章",visible:t.fromVisible,width:"800px","close-on-click-modal":!1,"custom-class":"article-edit-dialog"},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticClass:"article-form",attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"文章标题",prop:"title",required:""}},[e("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"文章分类",prop:"typeid",required:""}},[e("el-cascader",{staticClass:"cascader-selector",staticStyle:{width:"100%"},attrs:{options:t.typelist,props:t.props,"show-all-levels":!1,placeholder:"请选择文章分类"},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e("el-form-item",{attrs:{label:"文章摘要",prop:"summary"}},[e("el-input",{attrs:{placeholder:"请输入文章摘要（选填）",type:"textarea",rows:3,maxlength:"200","show-word-limit":""},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),e("el-form-item",{attrs:{label:"封面图片"}},[e("div",{staticClass:"cover-upload"},[e("el-upload",{staticClass:"cover-uploader",attrs:{action:t.getUploadUrl(),"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.cover?e("div",{staticClass:"upload-area"},[e("img",{staticClass:"cover-image-preview",attrs:{src:t.getImageUrl(t.form.cover)}}),e("div",{staticClass:"upload-mask"},[e("i",{staticClass:"el-icon-upload2"}),e("span",[t._v("更换封面")])])]):e("div",{staticClass:"upload-area empty"},[e("i",{staticClass:"el-icon-plus"}),e("div",{staticClass:"upload-text"},[t._v("上传封面图片")]),e("div",{staticClass:"upload-tip"},[t._v("建议尺寸：1200×600px")])])]),t.form.cover?e("div",{staticClass:"cover-tip"},[e("el-button",{staticClass:"remove-cover",attrs:{type:"text"},on:{click:function(e){t.form.cover=""}}},[e("i",{staticClass:"el-icon-delete"}),t._v("移除封面 ")])],1):t._e()],1)]),e("el-form-item",{attrs:{label:"文章内容",prop:"content",required:""}},[e("div",{staticClass:"editor-wrapper"},[e("div",{staticClass:"wang-editor",attrs:{id:"editor"}}),e("div",{staticClass:"editor-tip"},[t._v("文章内容不能为空")])])])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",loading:t.saving},on:{click:t.save}},[t._v(" "+t._s(t.saving?"保存中...":"确定保存")+" ")])],1)],1)],1)},i=[],o=(a(44114),a(18962)),r=a(5507),l=a.n(r),n={data(){return{tableData:[],pageNum:1,pageSize:10,total:0,username:null,token:"",name:null,fromVisible:!1,fromVisible1:!1,avatar:"",content:"",loading:!1,saving:!1,queryform:{keyword:"",pageNum:1,pageSize:10},license:"",value:[],form:{avatar:"",license:"",cover:""},user:{},props:{value:"id",label:"name",checkStrictly:!0},rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}]},ids:[],typelist:[],sjlist:[],editor:null}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getall(),this.getlist()},methods:{getImageUrl(t){return t?/^https?:\/\//.test(t)?t:"https://orkj406039jmw6me.top/api/file/getImage/"+t:""},getUploadUrl(){return"https://orkj406039jmw6me.top/api/file/upload"},goBack(){this.$router.push("/userhome")},handleChange(t){t&&t.length>1?(this.form.pBoardId=t[0],this.form.boardId=t[1]):t&&1==t.length&&(this.form.pBoardId=t[0])},add(){this.value=[],this.form={cover:""},this.fromVisible=!0,this.$nextTick((()=>{setTimeout((()=>{this.initWangEditor("")}),300)}))},initWangEditor(t){this.$nextTick((()=>{this.editor&&(this.editor.destroy(),this.editor=null),this.editor=new(l())("#editor"),this.editor.config.placeholder="请输入文章内容...",this.editor.config.uploadFileName="file",this.editor.config.uploadImgServer=this.getUploadUrl(),this.editor.config.zIndex=100,this.editor.config.uploadImgMaxSize=5242880,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","webp"],this.editor.config.uploadImgResult="json",this.editor.config.uploadImgHooks={before:(t,e,a)=>(console.log("before 钩子触发",a),this.$message.info("正在上传图片..."),!0),success:(t,e,a)=>{console.log("success 钩子触发",a),this.$message.success("图片上传成功！")},fail:(t,e,a)=>{console.log("fail 钩子触发",a),this.$message.error(`图片上传失败: ${a.message||"未知错误"}`)},error:(t,e,a)=>{console.log("error 钩子触发",a),this.$message.error("上传过程中发生错误")},timeout:(t,e)=>{console.log("timeout 钩子触发"),this.$message.error("图片上传超时")},customInsert:(t,e)=>{console.log("customInsert 钩子触发，收到结果:",e);let a="";try{200===e.code?a=this.getImageUrl(e.data):0===e.errno&&e.data?a=e.data.url||this.getImageUrl(e.data):e.data?a=this.getImageUrl(e.data):e.url?a=e.url:"string"===typeof e&&(a=e),console.log("构建的图片URL:",a),a?(t(a),console.log("图片插入成功")):(console.error("无法获取图片URL，result结构:",JSON.stringify(e)),this.$message.error("图片上传失败：无法获取图片地址"))}catch(s){console.error("customInsert 处理异常:",s),this.$message.error("图片处理失败")}}},this.editor.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","todo","justify","quote","emoticon","image","video","table","code","splitLine","undo","redo"],this.editor.config.onchange=t=>{this.form.content=t},this.editor.config.uploadImgParams={type:"article"},this.editor.create(),this.form.content&&this.editor.txt.html(this.form.content),window.testEditor=this.editor}))},chakan(t){this.content=t,this.fromVisible1=!0},async getall(){try{const t=await o.A.get("/board/list");200==t.code&&(this.typelist=t.data)}catch(t){console.error(t)}},del(t){this.$confirm("确定要删除这篇文章吗？删除后不可恢复。","删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",customClass:"delete-confirm-dialog"}).then((async()=>{try{const e=await o.A.post("/article/delete",{id:t});200==e.code&&(this.$message.success("删除成功"),this.getlist())}catch(e){console.error(e)}})).catch((()=>{}))},handleEdit(t){this.form={...t},this.value=[],t.pboardId&&t.boardId?this.value=[t.pboardId,t.boardId]:t.pboardId&&(this.value=[t.pboardId]),this.fromVisible=!0,this.$nextTick((()=>{setTimeout((()=>{this.initWangEditor(t.content||"")}),300)}))},search(){this.queryform.pageNum=1,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.getlist()},async getlist(){this.loading=!0;try{const t=await o.A.post("/article/myarticle",this.queryform);200==t.code&&(this.tableData=t.data.records||[],this.total=t.data.total||0)}catch(t){console.error(t),this.$message.error("加载失败，请稍后重试")}finally{this.loading=!1}},async save(){if(this.form.title&&this.form.title.trim())if(this.editor&&this.editor.txt.html()&&""!==this.editor.txt.text().trim()){this.form.content=this.editor.txt.html(),this.saving=!0;try{let t;t=this.form.id?await o.A.post("/article/update",this.form):await o.A.post("/article/post",this.form),200==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())}catch(t){console.error(t),this.$message.error("保存失败，请稍后重试")}finally{this.saving=!1}}else this.$message.warning("请输入文章内容");else this.$message.warning("请输入文章标题")},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},handleAvatarSuccess(t){200==t.code?(this.form.cover=t.data,this.$message.success("封面图片上传成功")):this.$message.error("图片上传失败")},beforeAvatarUpload(t){const e=/^image\/(jpeg|png|jpg|gif|webp)$/.test(t.type),a=t.size/1024/1024<5;return e||this.$message.error("只能上传图片格式文件!"),a||this.$message.error("图片大小不能超过5MB!"),e&&a},getTagType(t){const e={"前端":"success","后端":"warning","设计":"danger","测试":"info","热门":"danger","精华":"success","推荐":"warning"};return e[t]||"info"},formatDate(t){if(!t)return"-";const e=new Date(t);return e.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}},beforeDestroy(){this.editor&&(this.editor.destroy(),this.editor=null)}},c=n,d=a(81656),u=(0,d.A)(c,s,i,!1,null,"121c6765",null),m=u.exports},77940:function(t,e,a){a.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"forum-container"},[e("div",{staticClass:"sidebar"},[e("div",{staticClass:"nav-group"},[e("div",{staticClass:"group-title"},[t._v("主要内容")]),e("a",{staticClass:"nav-item",class:{active:!t.$route.query.pBoardId&&!t.$route.query.boardId},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goHome.apply(null,arguments)}}},[t._m(0),e("div",{staticClass:"nav-text"},[t._v("主页")])]),t._m(1)]),e("div",{staticClass:"theme-section"},[t._m(2),e("el-tree",{ref:"treeRef",staticClass:"forum-tree",attrs:{data:t.treedata,props:t.defaultProps,"node-key":"id","default-expanded-keys":t.expandedKeys,"highlight-current":!0,"current-node-key":t.currentNodeKey},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function({node:a,data:s}){return e("span",{staticClass:"custom-tree-node"},[e("i",{staticClass:"tree-icon",class:t.getTreeIcon(s)}),e("span",{staticClass:"tree-label"},[t._v(t._s(a.label))]),s.count?e("span",{staticClass:"tree-count"},[t._v(t._s(s.count))]):t._e()])}}])})],1)]),e("div",{staticClass:"main-content"},[e("div",{staticClass:"filter-bar"},[e("div",{staticClass:"filter-info"},[t._v(" 当前显示："),e("span",{staticClass:"active-filter"},[t._v(t._s(t.currentFilter||"全部帖子"))]),t.$route.query.boardId||t.$route.query.pBoardId?e("span",{staticClass:"reset-filter",on:{click:t.resetFilter}},[e("i",{staticClass:"el-icon-close"}),t._v(" 重置筛选 ")]):t._e()]),t.isLoggedIn?e("div",{staticClass:"publish-section"},[e("publish-article",{attrs:{"button-text":"发布新文章","button-icon":"el-icon-edit","button-type":"warning","button-round":!0},on:{success:t.handleArticlePublished}})],1):t._e()]),e("div",{staticClass:"posts-container"},[0===t.contentlist.length?e("div",{staticClass:"empty-state"},[e("i",{staticClass:"el-icon-document"}),e("p",[t._v("暂无帖子内容")])]):t._e(),t._l(t.contentlist,(function(a){return e("div",{key:a.id,staticClass:"post-card",on:{click:function(e){return t.godetail(a)}}},[e("div",{staticClass:"post-header"},[e("h3",{staticClass:"post-title"},[a.readCount>100?e("span",{staticClass:"post-hot"},[e("i",{staticClass:"el-icon-fire"}),t._v(" 热 ")]):t._e(),t._v(" "+t._s(a.title)+" ")]),e("div",{staticClass:"post-summary"},[t._v(t._s(a.summary))])]),e("div",{staticClass:"post-body"},[e("div",{staticClass:"post-content"},[e("div",{staticClass:"post-text"},[t._v(t._s(t.getPlainText(a.content)||"暂无内容预览"))]),e("div",{staticClass:"post-meta-info"},[a.createTime?e("span",{staticClass:"post-time"},[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.formatTime(a.createTime))+" ")]):t._e()])]),a.cover?e("div",{staticClass:"post-cover"},[e("img",{staticClass:"cover-image",attrs:{src:t.getImageUrl(a.cover),alt:"封面图111"}})]):t._e()]),e("div",{staticClass:"post-footer"},[e("div",{staticClass:"post-author-info"},[e("div",{staticClass:"post-author"},[e("i",{staticClass:"el-icon-user-solid"}),e("span",{staticClass:"author-name"},[t._v(t._s(a.nickName||"匿名用户"))])])]),e("div",{staticClass:"post-stats"},[e("div",{staticClass:"post-tags"},[a.pboardName?e("el-tag",{staticClass:"tag-category",attrs:{size:"small",type:t.getTagType(a.pboardName)}},[t._v(" "+t._s(a.pboardName)+" ")]):t._e(),a.boardName?e("el-tag",{staticClass:"tag-board",attrs:{size:"small",type:t.getTagType(a.boardName)}},[t._v(" "+t._s(a.boardName)+" ")]):t._e()],1),e("div",{staticClass:"stat-item"},[e("i",{staticClass:"el-icon-view stat-icon"}),e("span",{staticClass:"stat-count"},[t._v(t._s(a.readCount||0))]),e("span",{staticClass:"stat-label"},[t._v("阅读")])]),e("div",{staticClass:"stat-item"},[e("i",{staticClass:"el-icon-star-on stat-icon"}),e("span",{staticClass:"stat-count"},[t._v(t._s(a.goodCount||0))]),e("span",{staticClass:"stat-label"},[t._v("点赞")])]),e("div",{staticClass:"stat-item"},[e("i",{staticClass:"el-icon-chat-line-round stat-icon"}),e("span",{staticClass:"stat-count"},[t._v(t._s(a.commentCount||0))]),e("span",{staticClass:"stat-label"},[t._v("评论")])])])])])}))],2),e("div",{staticClass:"pagination-container"},[e("el-pagination",{staticClass:"forum-pagination",attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)]),e("div",{staticClass:"ai-chat-float"},[e("ChatWindow",{attrs:{messages:t.chatMessages,isChatLoading:t.isChatLoading,isOnline:t.isAiOnline,knowledgeBase:t.knowledgeBase},on:{sendMessage:t.handleSendMessage}})],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-icon"},[e("i",{staticClass:"fas fa-home"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"nav-item",attrs:{href:"#"}},[e("div",{staticClass:"nav-icon"},[e("i",{staticClass:"fas fa-users"})]),e("div",{staticClass:"nav-text"},[t._v("社区广场")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"theme-title"},[e("i",{staticClass:"el-icon-menu"}),e("span",[t._v("主题板块分类")])])}],o=(a(44114),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(18962)),r=a(12135),l=a(91797),n={name:"UserHome",components:{PublishArticle:r.A,ChatWindow:l.A},data(){return{defaultProps:{children:"children",label:"name"},total:0,treedata:[],contentlist:[],queryform:{boardId:"",pageNum:1,pBoardId:"",pageSize:10,status:1},user:{},currentFilter:"",expandedKeys:[1,2,5],currentNodeKey:null,isInitialized:!1,chatMessages:[{id:"welcome",role:"model",text:"你好！我是论坛小助手火苗，有什么可以帮你的吗？",timestamp:Date.now()}],isChatLoading:!1,isAiOnline:!1,knowledgeBase:[]}},computed:{isLoggedIn(){return!!window.localStorage.getItem("token")}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")||"{}"),this.initData()},watch:{"$route.query":{immediate:!0,handler(t){this.handleRouteQuery(t)}}},methods:{getImageUrl(t){return t?/^https?:\/\//.test(t)?t:"https://orkj406039jmw6me.top/api/"+t.replace(/^api\//,""):""},initData(){this.getlist().then((()=>{this.isInitialized=!0,this.handleRouteQuery(this.$route.query)}))},handleRouteQuery(t){this.isInitialized&&(this.queryform.boardId="",this.queryform.pBoardId="",this.queryform.pageNum=1,this.currentNodeKey=null,t.pBoardId||t.boardId?(this.queryform.pBoardId=t.pBoardId||"",this.queryform.boardId=t.boardId||"",t.boardId?this.currentNodeKey=parseInt(t.boardId):t.pBoardId&&(this.currentNodeKey=parseInt(t.pBoardId)),this.updateExpandedKeys(),this.updateCurrentFilter(),this.getcontent()):(this.currentFilter="全部帖子",this.getcontent()))},updateExpandedKeys(){const t=new Set([...this.expandedKeys]);if(this.queryform.pBoardId&&t.add(parseInt(this.queryform.pBoardId)),this.queryform.boardId&&this.treedata.length>0){const e=(t,a)=>{for(const s of t)if(s.children){for(const e of s.children)if(e.id==a)return s.id;const t=e(s.children,a);if(t)return t}return null},a=e(this.treedata,this.queryform.boardId);a&&t.add(a)}this.expandedKeys=Array.from(t)},getPlainText(t){return t?t.replace(/<[^>]+>/g,""):""},handleNodeClick(t){console.log("点击节点:",t);const e={};0!=t.pid?(e.boardId=t.id,e.pBoardId=t.pid):e.pBoardId=t.id;const a=this.$route.query,s=a.boardId==e.boardId&&a.pBoardId==e.pBoardId;s?(this.queryform.boardId=e.boardId||"",this.queryform.pBoardId=e.pBoardId||"",this.queryform.pageNum=1,this.currentNodeKey=t.id,this.updateExpandedKeys(),this.updateCurrentFilter(),this.getcontent()):this.$router.push({path:"/userhome",query:e}).catch((t=>{"NavigationDuplicated"!==t.name&&console.error("导航错误:",t)}))},goHome(){"/userhome"!==this.$route.path&&this.$router.push({path:"/userhome",query:{}})},resetFilter(){this.goHome()},getTreeIcon(t){return t.children&&t.children.length>0?"el-icon-folder":"el-icon-document"},getTagType(t){const e={"前端":"success","后端":"warning",OPC:"danger","测试":"info"};return e[t]?e[t]:"info"},formatTime(t){return t?t.split(" ")[0]:""},godetail(t){this.$router.push({path:"/userhomedetail",query:{id:t.id}})},handleCurrentChange(t){this.queryform.pageNum=t,this.getcontent()},async getlist(){try{const t=await o.A.get("/board/list");return 200==t.code||1==t.code?(this.treedata=t.data,Promise.resolve()):Promise.reject(new Error(t.msg))}catch(t){return Promise.reject(t)}},async getcontent(){try{const t={pageNum:this.queryform.pageNum,pageSize:this.queryform.pageSize,statusInteger:1};this.queryform.pBoardId&&(t.pBoardId=this.queryform.pBoardId),this.queryform.boardId&&(t.boardId=this.queryform.boardId);const e=await o.A.post("/article/list",t);200==e.code||1==e.code?(this.$set(this,"contentlist",e.data.records||[]),this.$set(this,"total",e.data.total||0)):(this.$set(this,"contentlist",[]),this.$set(this,"total",0))}catch(t){this.$set(this,"contentlist",[]),this.$set(this,"total",0)}},updateCurrentFilter(){if(!this.queryform.boardId&&!this.queryform.pBoardId)return void(this.currentFilter="全部帖子");const t=(e,a)=>{for(const s of e){if(s.id==a)return s.name;if(s.children&&s.children.length>0){const e=t(s.children,a);if(e)return e}}return null};let e="";this.queryform.boardId?e=t(this.treedata,this.queryform.boardId):this.queryform.pBoardId&&(e=t(this.treedata,this.queryform.pBoardId)),this.currentFilter=e||"筛选内容"},handleArticlePublished(t){this.$message.success("文章发布成功！"),this.getcontent()},async handleSendMessage(t){if(t.trim()){this.chatMessages.push({id:Date.now().toString(),role:"user",text:t,timestamp:Date.now()}),this.isChatLoading=!0;try{const e=await this.callAiService(t);this.chatMessages.push({id:(Date.now()+1).toString(),role:"model",text:e||"抱歉，我现在无法回答这个问题。",timestamp:Date.now()})}catch(e){console.error("AI 服务调用失败:",e),this.chatMessages.push({id:(Date.now()+1).toString(),role:"system",text:"AI 服务暂时不可用，请稍后再试。",timestamp:Date.now()})}finally{this.isChatLoading=!1}}},async callAiService(t){try{return new Promise((t=>{setTimeout((()=>{const e=["这是一个很有趣的问题！","我明白了，让我来帮你解答。","根据我的理解，这个问题的答案是...","好的，我来帮你分析一下。","这个问题需要更多上下文信息。"],a=e[Math.floor(Math.random()*e.length)];t(a)}),1e3)}))}catch(e){return console.error("AI 服务错误:",e),"抱歉，发生了错误，请稍后再试。"}}}},c=n,d=a(81656),u=(0,d.A)(c,s,i,!1,null,"0e19100e",null),m=u.exports},71611:function(t,e,a){a.d(e,{A:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-container"},[t.loadingPage?e("div",{staticClass:"page-loading"},[t._m(0)]):t._e(),e("div",{staticClass:"detail-layout"},[e("sidebar-nav",{attrs:{"tree-data":t.treedata,"active-nav":t.activeNav},on:{"node-click":t.handleNodeClick,"nav-click":t.handleNavClick}}),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"back-button-container"},[e("el-button",{staticClass:"back-button",attrs:{icon:"el-icon-arrow-left",type:"text"},on:{click:t.goBack}},[t._v(" 返回上一页 ")])],1),e("div",{staticClass:"container-box"},[e("div",{staticClass:"article-card"},[e("div",{staticClass:"article-header"},[e("h1",{staticClass:"article-title"},[t._v(t._s(t.info.title))]),e("div",{staticClass:"article-meta"},[e("div",{staticClass:"meta-item"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(t._s(t.info.postTime))])]),e("div",{staticClass:"meta-item"},[e("i",{staticClass:"el-icon-user"}),e("span",[t._v(t._s(t.info.nickName))])])])]),e("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.info.content)}}),t.fjlist.length>0?e("div",{staticClass:"attachments"},[t._m(1),e("div",{staticClass:"attachments-list"},t._l(t.fjlist,(function(a){return e("div",{key:a.fileId,staticClass:"attachment-item",on:{click:function(e){return t.xiazai(a)}}},[e("i",{staticClass:"el-icon-download attachment-icon"}),e("span",{staticClass:"attachment-name"},[t._v(t._s(a.fileName))]),a.fileSize?e("span",{staticClass:"attachment-size"},[t._v(t._s(t.formatFileSize(a.fileSize)))]):t._e()])})),0)]):t._e(),e("div",{staticClass:"article-actions"},[e("div",{staticClass:"action-btn",class:{active:t.havelike},on:{click:t.like}},[e("i",{class:t.havelike?"el-icon-star-on":"el-icon-star-off"}),e("span",{staticClass:"action-text"},[t._v("点赞")]),e("span",{staticClass:"action-count"},[t._v(t._s(t.info.goodCount||0))])]),e("div",{staticClass:"action-btn"},[e("i",{staticClass:"el-icon-s-comment"}),e("span",{staticClass:"action-text"},[t._v("评论")]),e("span",{staticClass:"action-count"},[t._v(t._s(t.info.commentCount||0))])]),e("div",{staticClass:"action-btn"},[e("i",{staticClass:"el-icon-view"}),e("span",{staticClass:"action-text"},[t._v("浏览")]),e("span",{staticClass:"action-count"},[t._v(t._s(t.info.readCount||0))])]),e("el-button",{staticClass:"comment-btn",attrs:{type:"primary"},on:{click:t.pl}},[e("i",{staticClass:"el-icon-edit"}),t._v(" 发表评论 ")])],1)]),e("div",{staticClass:"comments-section"},[e("div",{staticClass:"section-header"},[e("h3",{staticClass:"section-title"},[e("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" 全部评论 "),e("span",{staticClass:"comment-count"},[t._v(t._s(t.commentlist.length))])])]),0===t.commentlist.length?e("div",{staticClass:"empty-comments"},[e("i",{staticClass:"el-icon-chat-line-round"}),e("p",[t._v("还没有评论，快来发表你的见解吧！")])]):t._e(),e("div",{staticClass:"comments-list"},t._l(t.commentlist,(function(a){return e("div",{key:a.commentId,staticClass:"comment-item"},[e("div",{staticClass:"comment-main"},[e("div",{staticClass:"comment-avatar"},[e("img",{staticClass:"avatarImg",attrs:{src:a.avatar||"api/defaultAvatar.jpg",alt:"头像"}}),a.isTop?e("div",{staticClass:"comment-badge"},[t._v("置顶")]):t._e()]),e("div",{staticClass:"comment-content"},[e("div",{staticClass:"comment-header"},[e("div",{staticClass:"comment-user"},[e("span",{staticClass:"user-name"},[t._v(t._s(a.nickName))]),a.createBy===t.info.userId?e("span",{staticClass:"user-tag"},[t._v("楼主")]):t._e(),e("span",{staticClass:"comment-time"},[t._v(t._s(a.postTime))])]),e("div",{staticClass:"comment-actions"},[e("div",{staticClass:"action-item",class:{active:1==a.likeType},on:{click:function(e){return t.commentlike(a.commentId)}}},[e("i",{staticClass:"el-icon-star-on"}),e("span",[t._v(t._s(a.goodCount||0))])]),e("div",{staticClass:"action-item",on:{click:function(e){return t.pl1(a)}}},[e("i",{staticClass:"el-icon-edit-outline"}),e("span",[t._v("回复")])]),t.user&&t.user.userId===t.info.userId?e("div",{staticClass:"action-item",on:{click:function(e){return t.zd(a.commentId)}}},[e("i",{staticClass:"el-icon-top"}),e("span",[t._v("置顶")])]):t._e(),!t.user||t.user.userId!==a.userId&&t.user.userId!==t.info.userId?t._e():e("div",{staticClass:"action-item danger",on:{click:function(e){return t.del(a.id)}}},[e("i",{staticClass:"el-icon-delete"}),e("span",[t._v("删除")])])])]),e("div",{staticClass:"comment-body",domProps:{innerHTML:t._s(a.content)}}),a.imgPath?e("div",{staticClass:"comment-images"},[e("img",{attrs:{src:t.getImageUrl(a.imgPath),alt:"评论图片"}})]):t._e()])]),a.children&&a.children.length>0?e("div",{staticClass:"comment-replies"},t._l(a.children,(function(s){return e("div",{key:s.commentId,staticClass:"reply-item"},[e("div",{staticClass:"reply-avatar"},[e("img",{attrs:{src:s.avatar||"api/defaultAvatar.jpg",alt:"头像"}})]),e("div",{staticClass:"reply-content"},[e("div",{staticClass:"reply-header"},[e("div",{staticClass:"reply-user"},[e("span",{staticClass:"user-name"},[t._v(t._s(s.nickName))]),e("span",{staticClass:"reply-to"},[t._v("回复")]),e("span",{staticClass:"user-name"},[t._v(t._s(s.replyNickName))]),e("span",{staticClass:"reply-time"},[t._v(t._s(s.postTime))])]),e("div",{staticClass:"reply-actions"},[e("div",{staticClass:"action-item",class:{active:1==s.likeType},on:{click:function(e){return t.commentlike(s.commentId)}}},[e("i",{staticClass:"el-icon-star-on"}),e("span",[t._v(t._s(s.goodCount||0))])]),e("div",{staticClass:"action-item",on:{click:function(e){return t.pl2(s,a)}}},[e("i",{staticClass:"el-icon-edit-outline"}),e("span",[t._v("回复")])]),t.user&&t.user.userId===t.info.userId?e("div",{staticClass:"action-item",on:{click:function(e){return t.zd(s.commentId)}}},[e("i",{staticClass:"el-icon-top"}),e("span",[t._v("置顶")])]):t._e(),!t.user||t.user.userId!==s.userId&&t.user.userId!==t.info.userId?t._e():e("div",{staticClass:"action-item danger",on:{click:function(e){return t.del(s.id)}}},[e("i",{staticClass:"el-icon-delete"}),e("span",[t._v("删除")])])])]),e("div",{staticClass:"reply-body",domProps:{innerHTML:t._s(s.content)}}),s.imgPath?e("div",{staticClass:"reply-images"},[e("img",{attrs:{src:t.getImageUrl(s.imgPath),alt:"回复图片"}})]):t._e()])])})),0):t._e()])})),0)])])])],1),e("el-dialog",{attrs:{title:0===t.form.pCommentId?"发表评论":"回复评论",visible:t.fromVisible,width:"600px","close-on-click-modal":!1,"custom-class":"comment-dialog"},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"内容",prop:"content",required:""}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入评论内容...",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),e("el-form-item",{attrs:{label:"图片"}},[e("div",{staticClass:"image-uploader"},[e("el-upload",{staticClass:"upload-area",attrs:{action:t.getUploadUrl(),"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[e("div",{staticClass:"upload-content"},[t.form.imagePath?t._e():e("i",{staticClass:"el-icon-plus upload-icon"}),t.form.imagePath?e("img",{staticClass:"upload-preview",attrs:{src:t.getImageUrl(t.form.imagePath)}}):t._e()])]),e("div",{staticClass:"upload-tip"},[t._v("支持上传图片，大小不超过2MB")])],1)])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("确定")])],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-content"},[e("div",{staticClass:"loading-spinner"},[e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"})]),e("div",{staticClass:"loading-text"},[t._v("正在加载内容...")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachments-title"},[e("i",{staticClass:"el-icon-document"}),e("span",[t._v("附件下载")])])}],o=(a(44114),a(18962)),r=a(94097),l={name:"ArticleDetail",components:{SidebarNav:r.A},data(){return{info:{},fromVisible:!1,form:{},total:0,commentlist:[],havelike:!1,fjlist:[],comment:"",comment1:"",receive:"",receive1:"",receive3:"",loading:!1,user:null,token:"",loadingPage:!0,loadingTime:0,treedata:[],activeNav:"home"}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.startLoadingTimer(),this.getdata(),this.getBoardList()},methods:{getImageUrl(t){if(console.log("userhomedetail getImageUrl imagePath:",t),!t)return"";const e="https://orkj406039jmw6me.top/api/"+t.replace(/^api\//,"");return console.log("userhomedetail getImageUrl url:",e),e},getUploadUrl(){return"https://orkj406039jmw6me.top/api/file/upload"},goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/userhome")},startLoadingTimer(){this.loadingTime=setTimeout((()=>{this.loadingPage&&console.log("页面加载时间较长，请检查网络连接...")}),3e3)},clearLoadingTimer(){this.loadingTime&&(clearTimeout(this.loadingTime),this.loadingTime=0)},async getBoardList(){try{const t=await o.A.get("/board/list");200==t.code&&(this.treedata=t.data)}catch(t){console.error(t)}},handleNavClick(t){console.log("navType",t),this.activeNav=t},handleNodeClick(t){console.log("===",t),this.$router.push({path:"/userhome",query:{boardId:0!=t.pid?t.id:"",pBoardId:0!=t.pid?t.pid:t.id}})},formatFileSize(t){if(0===t)return"0 B";const e=1024,a=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+a[s]},handleAvatarSuccess(t){this.form.imagePath=t.data,this.$forceUpdate()},beforeAvatarUpload(t){const e=t.type.startsWith("image/"),a=t.size/1024/1024<2;return e||this.$message.error("只能上传图片文件!"),a||this.$message.error("图片大小不能超过2MB!"),e&&a},pl1(t){let e=localStorage.getItem("userinfo");e?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:t.commentId,replyUserId:t.userId,imagePath:""}):this.$message.error("你还未登录")},pl2(t,e){let a=localStorage.getItem("userinfo");a?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:e.commentId,replyUserId:t.userId,imagePath:""}):this.$message.error("你还未登录")},pl(){let t=localStorage.getItem("userinfo");t?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:0,imagePath:""}):this.$message.error("你还未登录")},async zd(t){let e=localStorage.getItem("userinfo");if(e)try{const e=await o.A.post("/article/changeTop",{commentId:t});200==e.code&&(this.$message.success(e.message||"操作成功"),this.getdata())}catch(a){console.error(a)}else this.$message.error("你还未登录")},async commentlike(t){let e=localStorage.getItem("userinfo");if(e)try{const e=await o.A.post("/article/commentlike",{commentId:t});200==e.code&&this.getdata()}catch(a){console.error(a)}else this.$message.error("你还未登录")},async getlist(){try{const t=await o.A.post("/article/loadcomment",{articleId:this.info.id});200==t.code&&(this.commentlist=t.data)}catch(t){this.commentlist=[]}},async xiazai(t){try{const e=await o.A.get("/article/downloadAttachment?fileId="+t.fileId);console.log(e),this.$message.success("开始下载")}catch(e){console.error(e)}},async like(){let t=localStorage.getItem("userinfo");if(t)try{const t=await o.A.post("/article/dolike",{id:this.info.id});200==t.code&&this.getdata()}catch(e){console.error(e)}else this.$message.error("你还未登录")},del(t){this.$confirm("确定要删除这条评论吗？删除后不可恢复。","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",customClass:"delete-confirm"}).then((async()=>{try{const e=await o.A.delete("/comment/"+t);200==e.code&&(this.$message.success("删除成功"),this.getdata())}catch(e){console.error(e)}})).catch((()=>{}))},async save(){if(this.form.content&&""!==this.form.content.trim()){this.loading=!0;try{console.log("form",this.form);const t=await o.A.post("/article/postcomment",{articleId:this.form.articleId,pCommentId:this.form.pCommentId,content:this.form.content,imagePath:this.form.imagePath,replyUserId:this.form.replyUserId});200==t.code&&(this.$message.success("评论成功"),this.fromVisible=!1,this.getdata())}catch(t){console.error(t)}finally{this.loading=!1}}else this.$message.warning("请输入评论内容")},async getdata(){try{const t=await o.A.post("/article/detail",{id:this.$route.query.id});200==t.code&&(this.info=t.data.article,this.fjlist=t.data.attachments||[],this.havelike=t.data.havelike,await this.getlist())}catch(t){console.error(t)}finally{setTimeout((()=>{this.loadingPage=!1,this.clearLoadingTimer()}),1e3)}}},beforeDestroy(){this.clearLoadingTimer()}},n=l,c=a(81656),d=(0,c.A)(n,s,i,!1,null,"6ccc5815",null),u=d.exports},45986:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global"},[e("div",{staticClass:"head"},[t._m(0),e("div",{}),e("div",{staticClass:"user-info-container"},[t.isLoggedIn?e("div",{staticClass:"user-dropdown"},[e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",{staticClass:"user-profile"},[e("div",{staticClass:"avatar-container"},[t.user.avatar?e("img",{staticClass:"user-avatar",attrs:{src:t.getImageUrl(t.user.avatar),alt:"用户头像"}}):e("img",{staticClass:"user-avatar",attrs:{src:a(41670),alt:"用户头像"}})]),e("span",{staticClass:"user-name"},[t._v(t._s(t.user.userName))]),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"personalCenter"}},[e("i",{staticClass:"el-icon-user"}),t._v("个人中心 ")]),e("el-dropdown-item",{attrs:{command:"myBlog",divided:""}},[e("i",{staticClass:"el-icon-document"}),t._v("我的博客 ")]),e("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e("i",{staticClass:"el-icon-switch-button"}),t._v("退出登录 ")])],1)],1)],1):e("div",{staticClass:"button-container"},[e("div",{staticClass:"btn btn-primary",on:{click:t.goLogo}},[t._v("登录")]),e("div",{staticClass:"btn btn-secondary",on:{click:t.goLogo}},[t._v("注册")])])])]),e("router-view")],1)},i=[function(){var t=this,e=t._self._c;return e("div",[e("h3",{staticClass:"title"},[t._v("BROAD")])])}],o=(a(44114),a(18962)),r={data(){return{user:{},activeIndex:"/userhome"}},computed:{isLoggedIn(){return!!window.localStorage.getItem("token")&&!!this.user.userName}},mounted(){const t=window.localStorage.getItem("token");t&&this.getinfo(),this.activeIndex=this.$route.path},watch:{"$route.path"(t){this.activeIndex=t}},methods:{getImageUrl(t){return t?"https://orkj406039jmw6me.top/api/file/getImage/"+t:""},goHome(){"/userhome"!==this.$route.path&&(this.activeIndex="/userhome",this.$router.push("/userhome"))},goToPersonalCenter(){this.isLoggedIn?"/userinfo"!==this.$route.path&&(this.activeIndex="/userinfo",this.$router.push("/userinfo")):this.$message.warning("请先登录后再访问个人中心")},goToUserBlog(){this.isLoggedIn?(this.activeIndex="/userblog",this.$router.push("/userblog")):this.$message.warning("请先登录")},async getinfo(){try{const t=await o.A.get("/info");t.data&&t.data.userName?(console.log("res.data",t.data),this.user=t.data,window.localStorage.setItem("userinfo",JSON.stringify(this.user))):this.clearUserData()}catch(t){console.error("获取用户信息失败:",t),this.clearUserData()}},goLogo(){this.$router.push("/login")},async logout(){try{await o.A.post("/logout"),console.log("登出成功")}catch(t){console.error("登出请求失败:",t)}finally{this.clearUserData(),this.$message.success("已退出登录"),this.$router.push("/login")}},clearUserData(){window.localStorage.removeItem("userinfo"),window.localStorage.removeItem("token"),window.sessionStorage.clear(),this.user={},this.$store&&this.$store.commit("CLEAR_USER_STATE")},handleCommand(t){switch(t){case"personalCenter":this.goToPersonalCenter();break;case"myBlog":this.goToUserBlog();break;case"logout":this.logout();break}}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"554490ea",null),d=c.exports},3440:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticStyle:{width:"50%",margin:"0 auto"}},[e("div",{staticClass:"back-navigation"},[e("el-button",{staticClass:"back-btn",attrs:{type:"text"},on:{click:t.goBack}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" 返回上一页 ")])],1),e("el-form",{staticStyle:{"padding-right":"50px"},attrs:{model:t.user,"label-width":"100px"}},[e("div",{staticStyle:{margin:"15px","text-align":"center"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.getUploadUrl(),"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.user.avatar?e("img",{staticClass:"avatar",attrs:{src:t.getImageUrl(t.user.avatar)}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"账号",prop:"userName"}},[e("el-input",{attrs:{disabled:"",placeholder:"账号"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),e("el-form-item",{attrs:{label:"密码",prop:"password"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[e("el-button",{attrs:{type:"info"},on:{click:t.goBack}},[t._v("返 回")]),e("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("保 存")])],1)],1)],1)],1)},i=[],o=(a(44114),a(18962)),r={name:"AdminPerson",data(){return{user:{avatar:""}}},created(){},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo"))},methods:{getImageUrl(t){return t?"https://orkj406039jmw6me.top/api/file/getImage/"+t:""},getUploadUrl(){return"https://orkj406039jmw6me.top/api/file/upload"},goBack(){this.$router&&this.$router.history.length>1?this.$router.go(-1):this.$router.push("/")},handleAvatarSuccess(t){this.user.avatar=t.data},async update(){const t=await o.A.post("/user/update",{params:this.user});console.log(t),1==t.code&&(this.$message.success(t.data),window.localStorage.setItem("userinfo",JSON.stringify(this.user)))},handleAvatarSuccess1(t,e,a){this.$set(this.user,"license",t.data)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"7f147539",null),d=c.exports},72413:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global3"},[0==t.tableData.length?e("el-empty",{attrs:{descrption:"请先加入小组~"}}):e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"groupName",label:"小组名称"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail(a.row.id)}}},[t._v("查看问题和讨论")])]}}])})],1)],1)},i=[],o=(a(44114),a(18962)),r={data(){return{list:[],tableData:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{detail(t){this.$router.push({path:"/userquestion",query:{id:t}})},async getdata(){const t=await o.A.get("/group/usergrouplist?uid="+this.user.id);console.log(t),this.tableData=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"600a9133",null),d=c.exports},42257:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global3"},[0==t.tableData.length?e("el-empty",{attrs:{descrption:"请先加入小组~"}}):e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"问题名称"}}),e("el-table-column",{attrs:{prop:"teacherName",label:"提问教师"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail(a.row.id)}}},[t._v("查看讨论")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail1(a.row.id)}}},[t._v("评论")])]}}])})],1),e("el-dialog",{attrs:{title:"查看评价",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},t._l(t.commentlist,(function(a){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[null!==a.avatar?e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.avatar,alt:""}}):e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.teacheravatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(null==a.username?a.teachername:a.username))]),e("div",{staticClass:"username"},[t._v(t._s(a.name))])]),e("div",{staticClass:"dianzan",staticStyle:{flex:"1","text-align":"right"}},[1==a.dianzan?e("i",{staticClass:"el-icon-star-off",staticStyle:{color:"blue"},on:{click:function(e){return t.changestar(a)}}}):t._e(),0==a.dianzan?e("i",{staticClass:"el-icon-star-off",on:{click:function(e){return t.changestar(a)}}}):t._e()])])})),0),e("el-dialog",{attrs:{title:"评价",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"内容",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=(a(98992),a(3949),a(18962)),r={data(){return{fromVisible:!1,form:{},list:[],fromVisible1:!1,qid:"",commentlist:[],tableData:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{async changestar(t){t.dianzan=!t.dianzan,this.commentlist=JSON.parse(JSON.stringify(this.commentlist));const e=await o.A.post("/star/star",{aid:t.id,tid:this.user.id,qqid:this.qid});console.log(e)},async save(){await o.A.post("/answer/add",{name:this.form.content,qid:this.qid,uid:this.user.id});this.fromVisible=!1,this.$message.success("成功")},detail1(t){this.qid=t,this.fromVisible=!0},async detail(t){const e=await o.A.get("/answer/list?id="+t);console.log(e),this.commentlist=e.data,this.commentlist.forEach((t=>{t.dianzan=!1})),this.fromVisible1=!0},async getdata(){const t=await o.A.get("/group/userqlist",{params:{pageNum:1,pageSize:1e4,keyword:"",tid:this.$route.query.id}});console.log(t),this.tableData=t.data.records}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"69e24c94",null),d=c.exports},68128:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("div",{staticStyle:{width:"70%",margin:"20px auto"}},[t._v(" 智能推荐 ")]),e("el-card",{staticClass:"hotellist"},t._l(t.tableData2,(function(a){return e("div",{staticClass:"hotelitem",on:{click:function(e){return t.godetail(a)}}},[e("img",{staticStyle:{width:"200px"},attrs:{src:a.img,alt:"",srcset:""}}),e("div",[t._v(t._s(a.name))]),e("div",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("￥"+t._s(a.price))])])})),0),e("div",{staticStyle:{width:"70%",margin:"20px auto"}},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},i=[],o=(a(44114),a(18962)),r={data(){return{tableData:[],tableData1:[],tableData2:[],queryform:{pageNum:1,pageSize:10,keyword:""},user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getlist()},methods:{chaxun(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},godetail(t){this.$router.push({path:"/userhomedetail",query:{id:t.id}})},test(t){this.$router.push({path:"/usertest?id="+t})},async test1(t){const e=await o.A.post("/group/addGroup",{uid:this.user.id,gid:t});1==e.code&&this.$message.success("加入成功")},detail(t){this.$router.push({path:"/usertypedetail?id="+t})},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},async getlist(){const t=await o.A.get("/goods/alllist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData2=t.data.records,this.total=t.data.total)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"8b39b9ce",null),d=c.exports},8972:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"globalsource"},[e("div",{staticClass:"sourcename"},[t._v(t._s(t.info.name))]),e("div",{staticClass:"sourceinfo"},[e("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a(74026),alt:""}}),t._v(" "),e("span",[t._v(t._s(0==t.info.watchnum?0:t.info.watchnum))]),e("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a(68677),alt:""}}),t._v(" "),e("span",[t._v(t._s(0==t.info.downloadnum?0:t.info.downloadnum))]),t._v(" "),e("span",[t._v(t._s(t.info.createtime))])]),e("div",{staticClass:"sourceurl"},[e("video",{staticStyle:{width:"100%",height:"200px"},attrs:{controls:"",autoplay:"",src:t.info.url}})]),e("div",[t._v(t._s(t.info.info))]),e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.download()}}},[t._v("下载")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.pingjia()}}},[t._v("评价")])],1),e("h3",[t._v("评价信息")]),t._l(t.commentlist,(function(a){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.avatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(a.username))]),e("div",{staticClass:"username"},[t._v(t._s(a.content))])])])})),e("el-dialog",{attrs:{title:"评价",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"内容",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],2)},i=[],o=(a(44114),a(18962)),r={data(){return{user:{},fromVisible:!1,info:{},form:{},commentlist:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdetail()},methods:{pingjia(){this.form={},this.fromVisible=!0},async save(){this.form.sourceid=this.info.id,this.form.userid=this.user.id;const t=await o.A.post("/source/pingjia",this.form);console.log(t),1==t.code&&(this.$message.success("成功"),this.fromVisible=!1,this.getdetail())},async getdetail(){const t=await o.A.get("/source/detail?id="+this.$route.query.id);console.log(t),this.info=t.data;const e=await o.A.get("/source/pingjialist?id="+this.$route.query.id);console.log(e),this.commentlist=e.data},personal(){this.$router.push({path:"/userinfo"})},async download(){window.location.href=this.info.url;await o.A.post("/source/add",{id:this.info.id,downloadnum:this.info.downloadnum+1});this.getdetail()},logout(){window.localStorage.clear(),this.$router.push({path:"/"})}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"2ff1a758",null),d=c.exports},54400:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.info.name))]),e("div",{staticClass:"list"},t._l(t.list,(function(a,s){return e("div",{staticClass:"listitem"},[e("div",{staticClass:"question"},[t._v(t._s(s+1)+"."+t._s(a.name))]),"选择题"==a.type?e("div",{staticClass:"daan"},[e("el-radio-group",{on:{input:t.change},model:{value:a.daan,callback:function(e){t.$set(a,"daan",e)},expression:"item.daan"}},[e("el-radio",{attrs:{label:"A"}},[t._v("A."+t._s(a.optiona))]),e("el-radio",{attrs:{label:"B"}},[t._v("B."+t._s(a.optionb))]),e("el-radio",{attrs:{label:"C"}},[t._v("C."+t._s(a.optionc))])],1)],1):e("div",{staticClass:"daan"},[e("el-radio-group",{on:{input:t.change},model:{value:a.daan,callback:function(e){t.$set(a,"daan",e)},expression:"item.daan"}},[e("el-radio",{attrs:{label:"T"}},[t._v("A.T")]),e("el-radio",{attrs:{label:"F"}},[t._v("B.F")])],1)],1)])})),0),e("div",{staticClass:"buttoncz"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")]),e("el-button",{attrs:{type:"primary"},on:{click:t.fahui}},[t._v("返回")])],1)])},i=[],o=(a(44114),a(98992),a(3949),a(18962)),r={data(){return{info:{},list:[],user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{fahui(){this.$router.go(-1)},change(){this.$forceUpdate(),this.list=JSON.parse(JSON.stringify(this.list)),console.log(this.list)},async getdata(){const t=await o.A.get("/tiku/detail?id="+this.$route.query.id);console.log(t),this.info=t.data.tiku,this.list=t.data.list,this.list.forEach((t=>{t.daan=""}))},async submit(){let t=[],e=[];this.list.forEach((a=>{t.push(a.rightreply),e.push(a.daan)}));const a=await o.A.post("/tiku/addsj",{name:this.info.name,biaozhundaan:JSON.stringify(t),xueshengdaan:JSON.stringify(e),userid:this.user.id,score:0});console.log(a),this.$message.success("成功"),this.fahui()}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"5de9cbf8",null),d=c.exports},96562:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail"},[e("div",{staticClass:"homedetail"},[e("div",{staticClass:"detailimg"},[e("img",{attrs:{src:t.info.avatar,alt:""}})]),e("div",{staticClass:"info"},[e("div",[t._v("名称:"+t._s(t.info.name))]),e("div",[t._v("类型:"+t._s(t.info.type))]),e("div",[e("el-input-number",{model:{value:t.info.num,callback:function(e){t.$set(t.info,"num",e)},expression:"info.num"}})],1),e("div",[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.addcollect()}}},[t._v("加入购物车")])],1)])]),e("div",{staticClass:"hotellist"},[e("div",{staticClass:"comment"},[t._v("评价信息")]),t._l(t.commentlist,(function(a){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.avatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(a.username))]),e("div",{staticClass:"username"},[t._v(t._s(a.content))])])])}))],2),e("el-dialog",{attrs:{title:"评价",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"内容",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{info:{},tableData:[],fromVisible:!1,commentlist:[],form:{},user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdetail()},methods:{yuding(){this.form={},this.fromVisible=!0},async getdetail(){const t=await o.A.get("/guke/detail?id="+this.$route.query.id);console.log(t),this.info=t.data},async save(){this.form.subjectid=this.info.id,this.form.userid=this.user.id;const t=await o.A.post("/subject/pingjia",this.form);console.log(t),1==t.code&&(this.$message.success("成功"),this.fromVisible=!1,this.getdetail())},async addcollect(){this.$confirm("是否确认选课？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const t=await o.A.post("/subject/check",{userid:this.user.id,subjectid:this.info.id});console.log(t),1==t.code&&this.$message({type:"success",message:"选课成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},async getlist(){const t=await o.A.get("/hotal/typelist",{params:{pageNum:1,pageSize:1e3,hotelId:this.$route.query.id,keyword:""}});console.log(t),1==t.code&&(this.tableData=t.data.records)}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"5a7a4178",null),d=c.exports},74210:function(t,e,a){a.d(e,{A:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入关键词搜索"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("重置")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"avatar",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:a.row.avatar,"preview-src-list":[a.row.avatar]}}):t._e()]}}])}),e("el-table-column",{attrs:{prop:"teachername",label:"创建人"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.wtch(a.row.id)}}},[t._v("查看小组成员")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(a.row.id)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"小组成员",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},[e("el-table",{attrs:{data:t.tableData1,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"userName",label:"名称"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del1(a.row.id)}}},[t._v("删除")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"小组信息",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"名称",prop:"gname"}},[e("el-input",{attrs:{placeholder:"名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"图片",prop:"avatar"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/files/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.avatar?e("img",{staticClass:"avatar",attrs:{src:t.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(18962),r={data(){return{fileList:[],teacherlist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,tableData1:[],token:"",name:null,fromVisible:!1,fromVisible1:!1,avatar:"",queryform:{keyword:"",pageNum:1,tid:0,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"请输入名称",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist(),"ADMIN"==this.user.role&&this.getall()},methods:{shenhe(t){},async wtch(t){const e=await o.A.get("/group/groupuserlist?gid="+t);console.log(e),this.fromVisible1=!0,this.tableData1=e.data},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/teacher/all");console.log(t),this.teacherlist=t.data},del1(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/group/deleteusergroup?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.fromVisible1=!1)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},del(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=await o.A.get("/group/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.form.teacherid=t.teacherid,"ADMIN"==this.user.role&&this.getall(),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"TEACHER"==this.user.role&&(this.queryform.tid=this.user.id);const t=await o.A.get("/group/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,"TEACHER"==this.user.role&&(this.form.teachid=this.user.id);const t=await o.A.post("/group/add",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("操作成功"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},l=r,n=a(81656),c=(0,n.A)(l,s,i,!1,null,"55edb403",null),d=c.exports}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,i,o){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],o=t[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&o||r>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[n])}))?s.splice(n--,1):(l=!1,o<r&&(r=o));if(l){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"static/js/about.16833202.js"}}(),function(){a.miniCssF=function(t){return"static/css/about.2999188e.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="hard-diancan-front:";a.l=function(s,i,o,r){if(t[s])t[s].push(i);else{var l,n;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+o){l=u;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+o),l.src=s),t[s]=[i];var m=function(e,a){l.onerror=l.onload=null,clearTimeout(h);var i=t[s];if(delete t[s],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var t=function(t,e,s,i,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",a.nc&&(r.nonce=a.nc);var l=function(a){if(r.onerror=r.onload=null,"load"===a.type)i();else{var s=a&&a.type,l=a&&a.target&&a.target.href||e,n=new Error("Loading CSS chunk "+t+" failed.\n("+s+": "+l+")");n.name="ChunkLoadError",n.code="CSS_CHUNK_LOAD_FAILED",n.type=s,n.request=l,r.parentNode&&r.parentNode.removeChild(r),o(n)}};return r.onerror=r.onload=l,r.href=e,s?s.parentNode.insertBefore(r,s.nextSibling):document.head.appendChild(r),r},e=function(t,e){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===t||o===e))return i}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){i=r[s],o=i.getAttribute("data-href");if(o===t||o===e)return i}},s=function(s){return new Promise((function(i,o){var r=a.miniCssF(s),l=a.p+r;if(e(r,l))return i();t(s,l,null,i,o)}))},i={737:0};a.f.miniCss=function(t,e){var a={594:1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=s(t).then((function(){i[t]=0}),(function(e){throw delete i[t],e})))}}}(),function(){var t={737:0};a.f.j=function(e,s){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var o=new Promise((function(a,s){i=t[e]=[a,s]}));s.push(i[2]=o);var r=a.p+a.u(e),l=new Error,n=function(s){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var o=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,i[1](l)}};a.l(r,n,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,o,r=s[0],l=s[1],n=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(n)var d=n(a)}for(e&&e(s);c<r.length;c++)o=r[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},s=self["webpackChunkhard_diancan_front"]=self["webpackChunkhard_diancan_front"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[315,652,566,486,98,270,957,38,287,450,818,545,967,661,791,624,323,281,76,667,558,755,701,714,399,969,12,675,404,275,406,582,282,912,183,304,97,1,189,385,869,641],(function(){return a(89624)}));s=a.O(s)})();