(function(){"use strict";var t={12212:function(t,e,s){s.d(e,{A:function(){return v}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"forum-container"},[e("ForumSidebar",{attrs:{"tree-data":t.treedata,"expanded-keys":t.expandedKeys,"current-node-key":t.currentNodeKey,"active-board-id":t.queryform.boardId,"is-mobile":t.isMobile,"is-sidebar-collapsed":t.isSidebarCollapsed,"is-sidebar-open":t.isSidebarOpen,query:t.$route.query},on:{"node-click":t.handleNodeClick,close:t.closeSidebar,navigate:t.handleNavigate,"select-community":t.handleCommunitySelect}}),t.isMobile?e("div",{staticClass:"sidebar-overlay",class:{"overlay-active":t.isSidebarOpen&&t.isMobile},on:{click:t.closeSidebar}}):t._e(),e("div",{staticClass:"main-content"},[e("div",{staticClass:"filter-bar"},[e("div",{staticClass:"filter-left"},[e("div",{staticClass:"sort-tabs"},[e("div",{staticClass:"sort-tab",class:{active:"all"===t.currentSort},on:{click:function(e){return t.handleSort("all")}}},[e("i",{staticClass:"el-icon-star-off"}),e("span",[t._v(t._s(t.$t("forum.all")))])]),e("div",{staticClass:"sort-tab",class:{active:"hot"===t.currentSort},on:{click:function(e){return t.handleSort("hot")}}},[e("i",{staticClass:"el-icon-trophy"}),e("span",[t._v(t._s(t.$t("forum.hot")))])]),e("div",{staticClass:"sort-tab",class:{active:"latest"===t.currentSort},on:{click:function(e){return t.handleSort("latest")}}},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(t._s(t.$t("forum.latest")))])])]),e("div",{staticClass:"filter-info"},[t._v(" "+t._s(t.$t("forum.currentFilter"))),e("span",{staticClass:"active-filter"},[t._v(t._s(t.currentFilter||t.$t("forum.allPosts")))]),t.queryform.boardId||t.queryform.pBoardId?e("span",{staticClass:"reset-filter",on:{click:t.resetFilter}},[e("i",{staticClass:"el-icon-close"}),t._v(" "+t._s(t.$t("forum.resetFilter"))+" ")]):t._e()])]),t.isLoggedIn?e("div",{staticClass:"publish-section"},[e("publish-article",{attrs:{"button-text":t.$t("forum.publishArticle"),"button-icon":"el-icon-edit","button-type":"primary","button-round":!0,"is-mobile":t.isMobile},on:{success:t.handleArticlePublished}})],1):t._e(),t.isMobile?t._e():e("div",{staticClass:"create-board-section"},[e("el-button",{attrs:{type:"success",icon:"el-icon-folder-add",round:""},on:{click:t.openCreateBoardDialog}},[t._v(" "+t._s(t.$t("forum.createBoard"))+" ")])],1)]),e("create-board-dialog",{attrs:{visible:t.showCreateBoardDialog,"is-mobile":t.isMobile,boards:t.treedata},on:{"update:visible":function(e){t.showCreateBoardDialog=e},success:t.handleBoardCreated}}),e("div",{staticClass:"posts-container"},[0!==t.contentlist.length||t.isInitialized?0===t.contentlist.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"}},[e("path",{attrs:{d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("p",{staticClass:"empty-title"},[t._v(t._s(t.$t("common.noData")))]),e("p",{staticClass:"empty-desc"},[t._v(t._s(t.$t("forum.publishArticle"))+"!")])]):t._e():e("div",{staticClass:"skeleton-loading"},t._l(3,(function(s){return e("div",{key:s,staticClass:"skeleton-card"},[t._m(0,!0),e("div",{staticClass:"skeleton-title"}),t._m(1,!0)])})),0),t._l(t.contentlist,(function(s){return e("post-card",{key:s.id,attrs:{post:s,"hot-threshold":100,"summary-length":100},on:{click:t.godetail}})}))],2),e("div",{staticClass:"pagination-container"},[e("el-pagination",{key:t.queryform.pageNum,staticClass:"forum-pagination",attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),e("HotCommunities",{attrs:{query:t.queryform},on:{"select-community":t.handleCommunitySelect}}),e("div",{staticClass:"ai-chat-wrapper"},[e("transition",{attrs:{name:"chat-slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isChatOpen,expression:"isChatOpen"}],staticClass:"ai-chat-float"},[e("ChatWindow",{attrs:{messages:t.chatMessages,isChatLoading:t.isChatLoading,isOnline:!0,knowledgeBase:t.knowledgeBase},on:{sendMessage:t.handleSendMessage,close:t.toggleChat}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isChatOpen,expression:"!isChatOpen"}],staticClass:"ai-chat-toggle",class:{active:t.isChatOpen,disabled:!t.isLoggedIn},attrs:{title:t.isLoggedIn?"":"ËØ∑ÂÖàÁôªÂΩï"},on:{click:t.toggleChat}},[e("div",{staticClass:"toggle-icon"},[t.isChatOpen?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"}})]):e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177 7.547 7.547 0 01-1.705-1.715.75.75 0 00-1.152.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"}})])]),!t.isChatOpen&&t.unreadCount>0?e("div",{staticClass:"notification-badge"},[t._v(t._s(t.unreadCount))]):t._e(),t.isLoggedIn?t._e():e("div",{staticClass:"lock-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3a5.25 5.25 0 00-5.25-5.25zm-3.75 8.25v-3a3.75 3.75 0 117.5 0v3h-7.5z","clip-rule":"evenodd"}})])])])],1)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"skeleton-header"},[e("div",{staticClass:"skeleton-avatar"}),e("div",{staticClass:"skeleton-user"},[e("div",{staticClass:"skeleton-line skeleton-name"}),e("div",{staticClass:"skeleton-line skeleton-time"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"skeleton-content"},[e("div",{staticClass:"skeleton-line"}),e("div",{staticClass:"skeleton-line"}),e("div",{staticClass:"skeleton-line short"})])}],o=(s(44114),s(17642),s(58004),s(33853),s(45876),s(32475),s(15024),s(31698),s(81454),s(18962)),r=s(4742),n=s(33827),l=s(36096),c=s(4380),d=s(33045),h=s(36197),u=s(81629),m={name:"UserHome",components:{PublishArticle:r.A,ChatWindow:n.A,ForumSidebar:l.A,HotCommunities:c.A,PostCard:d.A,CreateBoardDialog:u.A},data(){return{defaultProps:{children:"children",label:"name"},total:0,treedata:[],contentlist:[],queryform:{boardId:"",pageNum:1,pBoardId:"",pageSize:10,status:1},user:{},currentFilter:"",currentSort:"all",expandedKeys:[1,2,5],currentNodeKey:null,isInitialized:!1,isRestoringFilterState:!1,hasTriedRestoreState:!1,chatMessages:[],isChatLoading:!1,knowledgeBase:[],isChatOpen:!1,unreadCount:0,aiConfig:null,isMobile:window.innerWidth<=768,isSidebarOpen:!1,isSidebarCollapsed:!1,activeCollapseNames:[],windowWidth:window.innerWidth,showCreateBoardDialog:!1}},computed:{isLoggedIn(){return!!window.localStorage.getItem("token")}},mounted(){console.log("[UserHome] mounted ÂºÄÂßãÊâßË°å"),this.user=JSON.parse(window.localStorage.getItem("userinfo")||"{}"),this.getlist().then((()=>{if(console.log("[UserHome] getlist ÂÆåÊàêÔºåÂºÄÂßãÊ£ÄÊü•Á≠õÈÄâÁä∂ÊÄÅ",{routeQuery:this.$route.query,isInitialized:this.isInitialized}),!this.$route.query.boardId&&!this.$route.query.pBoardId){console.log("[UserHome] URL Êó†ÂèÇÊï∞ÔºåÂ∞ùËØïÊÅ¢Â§çÁ≠õÈÄâÁä∂ÊÄÅ"),this.hasTriedRestoreState=!0;const t=this.restoreFilterState();if(console.log("[UserHome] ÊÅ¢Â§çÁªìÊûú:",t),t)return this.isInitialized=!0,void console.log("[UserHome] Áä∂ÊÄÅÊÅ¢Â§çÊàêÂäüÔºåËÆæÁΩÆ isInitialized = trueÔºåÂΩìÂâç pageNum:",this.queryform.pageNum)}console.log("[UserHome] Êó†ÈúÄÊÅ¢Â§çÁä∂ÊÄÅÊàñÊÅ¢Â§çÂ§±Ë¥•ÔºåÊâßË°åÈªòËÆ§ÂàùÂßãÂåñ"),this.hasTriedRestoreState=!0,this.isInitialized=!0,this.handleRouteQuery(this.$route.query)})),this.loadAiConfig(),this.loadKnowledgeBase(),0===this.chatMessages.length&&(this.chatMessages=this.loadChatMessages()),window.addEventListener("storage",this.handleStorageChange),this.checkMobile(),window.addEventListener("resize",this.handleResize),this.$root.$on("toggle-mobile-sidebar",this.handleToggleFromLogo),this.$root.$on("search-articles",this.handleSearchFromHeader),this.$root.$on("clear-search",this.handleClearSearchFromHeader)},beforeDestroy(){window.removeEventListener("storage",this.handleStorageChange),window.removeEventListener("resize",this.handleResize),this.$root.$off("toggle-mobile-sidebar",this.handleToggleFromLogo),this.$root.$off("search-articles",this.handleSearchFromHeader),this.$root.$off("clear-search",this.handleClearSearchFromHeader)},activated(){this.loadAiConfig(),this.loadKnowledgeBase()},watch:{$route(t,e){"/userhome"===t.path&&"/ai-settings"===e.path&&(this.loadAiConfig(),this.loadKnowledgeBase()),"/userhome"===t.path&&"/userhomedetail"===e.path&&(!this.isInitialized||this.isRestoringFilterState||this.hasTriedRestoreState||(console.log("[UserHome] ‰ªéËØ¶ÊÉÖÈ°µËøîÂõûÔºåÊÅ¢Â§çÁ≠õÈÄâÁä∂ÊÄÅ"),this.hasTriedRestoreState=!0,this.restoreFilterState()))},"$route.query":{immediate:!0,handler(t){if(console.log("[UserHome] watch $route.query Ëß¶Âèë",{newQuery:t,isInitialized:this.isInitialized,hasTriedRestoreState:this.hasTriedRestoreState,isRestoringFilterState:this.isRestoringFilterState}),this.isInitialized){if(this.hasTriedRestoreState&&!t.boardId&&!t.pBoardId)return void console.log("[UserHome] Â∑≤ÊÅ¢Â§çÁä∂ÊÄÅ‰∏î URL Êó†ÂèÇÊï∞ÔºåË∑≥Ëøá handleRouteQuery");this.handleRouteQuery(t)}}},chatMessages:{handler(t){this.saveChatMessages(t)},deep:!0},treedata:{handler(){},immediate:!1}},methods:{saveFilterState(){const t={boardId:this.queryform.boardId,pBoardId:this.queryform.pBoardId,pageNum:this.queryform.pageNum,currentSort:this.currentSort,currentFilter:this.currentFilter,currentNodeKey:this.currentNodeKey};console.log("[UserHome] ‰øùÂ≠òÁ≠õÈÄâÁä∂ÊÄÅ:",t);try{sessionStorage.setItem("forum_filter_state",JSON.stringify(t)),console.log("[UserHome] Á≠õÈÄâÁä∂ÊÄÅÂ∑≤‰øùÂ≠òÂà∞ sessionStorage")}catch(e){console.error("[UserHome] ‰øùÂ≠òÁ≠õÈÄâÁä∂ÊÄÅÂ§±Ë¥•:",e)}},restoreFilterState(){try{const t=sessionStorage.getItem("forum_filter_state");if(console.log("[UserHome] Â∞ùËØïÊÅ¢Â§çÁ≠õÈÄâÁä∂ÊÄÅÔºå‰øùÂ≠òÁöÑÁä∂ÊÄÅ:",t),t){const e=JSON.parse(t);return console.log("[UserHome] Ëß£ÊûêÂêéÁöÑÁ≠õÈÄâÁä∂ÊÄÅ:",e),this.isRestoringFilterState=!0,this.$set(this.queryform,"boardId",e.boardId||""),this.$set(this.queryform,"pBoardId",e.pBoardId||""),this.$set(this.queryform,"pageNum",e.pageNum||1),this.currentSort=e.currentSort||"all",this.currentFilter=e.currentFilter||this.$t("forum.allPosts"),this.currentNodeKey=e.currentNodeKey,console.log("[UserHome] ÊÅ¢Â§çÂêéÁöÑÂèÇÊï∞:",{boardId:this.queryform.boardId,pBoardId:this.queryform.pBoardId,pageNum:this.queryform.pageNum,currentSort:this.currentSort,currentFilter:this.currentFilter,currentNodeKey:this.currentNodeKey}),(this.queryform.boardId||this.queryform.pBoardId)&&this.updateExpandedKeys(),this.getcontent().finally((()=>{this.isRestoringFilterState=!1,this.$forceUpdate(),console.log("[UserHome] Á≠õÈÄâÁä∂ÊÄÅÊÅ¢Â§çÂÆåÊàêÔºåÂÜÖÂÆπÂ∑≤ÈáçÊñ∞Âä†ËΩΩÔºåÂΩìÂâç pageNum:",this.queryform.pageNum)})),console.log("[UserHome] Á≠õÈÄâÁä∂ÊÄÅÂ∑≤ÊÅ¢Â§ç:",e),!0}console.log("[UserHome] Ê≤°ÊúâÊâæÂà∞‰øùÂ≠òÁöÑÁ≠õÈÄâÁä∂ÊÄÅ")}catch(t){console.error("[UserHome] ÊÅ¢Â§çÁ≠õÈÄâÁä∂ÊÄÅÂ§±Ë¥•:",t)}return!1},clearFilterState(){try{sessionStorage.removeItem("forum_filter_state")}catch(t){console.error("[UserHome] Ê∏ÖÈô§Á≠õÈÄâÁä∂ÊÄÅÂ§±Ë¥•:",t)}},handleStorageChange(t){"huomiao_ai_config"===t.key&&this.loadAiConfig(),"huomiao_knowledge_base"===t.key&&this.loadKnowledgeBase(),"huomiao_ai_online"===t.key&&this.loadAiConfig(),"huomiao_chat_cleared"===t.key&&(this.chatMessages=this.loadChatMessages())},loadChatMessages(){try{const t=localStorage.getItem("huomiao_chat_history");if(t)return JSON.parse(t)}catch(t){console.error("Âä†ËΩΩËÅäÂ§©ÂéÜÂè≤Â§±Ë¥•:",t)}return[{id:"welcome",role:"model",text:"‰Ω†Â•ΩÔºÅÊàëÊòØËÆ∫ÂùõÂ∞èÂä©ÊâãÁÅ´Â¶ôÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü",timestamp:Date.now()}]},saveChatMessages(t){try{localStorage.setItem("huomiao_chat_history",JSON.stringify(t))}catch(e){console.error("‰øùÂ≠òËÅäÂ§©ÂéÜÂè≤Â§±Ë¥•:",e)}},loadAiConfig(){try{const t=h.A.loadConfig();this.aiConfig={protocol:t.protocol||"openai-compatible",baseUrl:t.baseUrl||"",apiKey:t.apiKey||"",modelId:t.modelId||"",systemPrompt:t.systemPrompt||""}}catch(t){console.error("Âä†ËΩΩ AI ÈÖçÁΩÆÂ§±Ë¥•:",t)}},loadKnowledgeBase(){try{const t=localStorage.getItem("huomiao_knowledge_base");this.knowledgeBase=t?JSON.parse(t):[]}catch(t){console.error("Âä†ËΩΩÁü•ËØÜÂ∫ìÂ§±Ë¥•:",t),this.knowledgeBase=[]}},initData(){this.getlist().then((()=>{this.isInitialized=!0,this.handleRouteQuery(this.$route.query)}))},handleRouteQuery(t){if(console.log("[UserHome] handleRouteQuery Ë¢´Ë∞ÉÁî®",{query:t,isInitialized:this.isInitialized,isRestoringFilterState:this.isRestoringFilterState,currentPageNum:this.queryform.pageNum}),this.isInitialized)if(this.isRestoringFilterState)console.log("[UserHome] handleRouteQuery: Ê≠£Âú®ÊÅ¢Â§çÁä∂ÊÄÅÔºåË∑≥Ëøá");else{if(!t.pBoardId&&!t.boardId){const t=this.queryform.boardId||this.queryform.pBoardId;return t?void console.log("[UserHome] URL Êó†ÂèÇÊï∞Ôºå‰ΩÜ‰øùÊåÅÂ∑≤ÊÅ¢Â§çÁöÑÁ≠õÈÄâÊù°‰ª∂",{boardId:this.queryform.boardId,pBoardId:this.queryform.pBoardId,pageNum:this.queryform.pageNum}):(console.log("[UserHome] URL Êó†ÂèÇÊï∞‰∏îÊó†Á≠õÈÄâÊù°‰ª∂ÔºåÈáçÁΩÆ‰∏∫ÂÖ®ÈÉ®Â∏ñÂ≠ê"),this.queryform.boardId="",this.queryform.pBoardId="",this.queryform.pageNum=1,this.currentNodeKey=null,this.currentFilter=this.$t("forum.allPosts"),void this.getcontent())}console.log("[UserHome] URL ÊúâÂèÇÊï∞ÔºåÊ†πÊçÆÂèÇÊï∞ËÆæÁΩÆÁ≠õÈÄâÊù°‰ª∂"),this.queryform.boardId=t.boardId||"",this.queryform.pBoardId=t.pBoardId||"",this.queryform.pageNum=1,this.currentNodeKey=null,t.boardId?this.currentNodeKey=parseInt(t.boardId):t.pBoardId&&(this.currentNodeKey=parseInt(t.pBoardId)),this.updateExpandedKeys(),this.updateCurrentFilter(),this.getcontent()}else console.log("[UserHome] handleRouteQuery: Êú™ÂàùÂßãÂåñÔºåË∑≥Ëøá")},updateExpandedKeys(){const t=new Set([...this.expandedKeys]);if(this.queryform.pBoardId&&t.add(parseInt(this.queryform.pBoardId)),this.queryform.boardId&&this.treedata.length>0){const e=(t,s)=>{for(const i of t)if(i.children){for(const e of i.children)if(e.id==s)return i.id;const t=e(i.children,s);if(t)return t}return null},s=e(this.treedata,this.queryform.boardId);s&&t.add(s)}this.expandedKeys=Array.from(t)},handleNodeClick(t){const e={};0!=t.pid?(e.boardId=t.id,e.pBoardId=t.pid):e.pBoardId=t.id;const s=this.$route.query,i=s.boardId==e.boardId&&s.pBoardId==e.pBoardId;i?(this.queryform.boardId=e.boardId||"",this.queryform.pBoardId=e.pBoardId||"",this.queryform.pageNum=1,this.currentNodeKey=t.id,this.updateExpandedKeys(),this.updateCurrentFilter(),this.getcontent(),this.saveFilterState()):this.$router.push({path:"/userhome",query:e}).catch((t=>{"NavigationDuplicated"!==t.name&&console.error("ÂØºËà™ÈîôËØØ:",t)})),this.isMobile&&this.isSidebarOpen&&this.toggleSidebar()},goHome(){const t=this.$route.query.boardId||this.$route.query.pBoardId;"/userhome"!==this.$route.path?this.$router.push({path:"/userhome",query:{}}):t&&this.$router.push({path:"/userhome",query:{}}).catch((t=>{"NavigationDuplicated"!==t.name&&console.error("ÂØºËà™ÈîôËØØ:",t)})),this.clearFilterState()},handleNavigate(t){"home"===t?this.goHome():"community"===t?this.$message.info("Á§æÂå∫ÂπøÂú∫ÂäüËÉΩÂºÄÂèë‰∏≠..."):"createBoard"===t&&this.openCreateBoardDialog()},resetFilter(){this.queryform.boardId="",this.queryform.pBoardId="",this.queryform.pageNum=1,this.currentFilter=this.$t("forum.allPosts"),this.getcontent(),this.clearFilterState(),this.isMobile&&this.isSidebarOpen&&(this.isSidebarOpen=!1),(this.$route.query.boardId||this.$route.query.pBoardId)&&this.$router.push({path:"/userhome",query:{}}),this.$message.success(this.$t("forum.resetFilter")+" - "+this.$t("forum.allPosts"))},getTreeIcon(t){return t.children&&t.children.length>0?"el-icon-folder":"el-icon-document"},isSubCategoryActive(t){return this.queryform.boardId==t},godetail(t){this.saveFilterState(),this.$router.push({path:"/userhomedetail",query:{id:t.id}})},handleCurrentChange(t){this.queryform.pageNum=t,this.getcontent(),this.saveFilterState()},async getlist(){try{const t=await o.A.get("/board/list");return 200==t.code||1==t.code?(this.treedata=t.data,this.$nextTick((()=>{this.checkMobile()})),Promise.resolve()):(console.error("[getlist] Ëé∑ÂèñÂ§±Ë¥•:",t.msg),Promise.reject(new Error(t.msg)))}catch(t){return console.error("[getlist] ËØ∑Ê±ÇÂºÇÂ∏∏:",t),Promise.reject(t)}},async getcontent(){console.log("[UserHome] getcontent Ë¢´Ë∞ÉÁî®",{pageNum:this.queryform.pageNum,pageSize:this.queryform.pageSize,boardId:this.queryform.boardId,pBoardId:this.queryform.pBoardId});try{const t={pageNum:this.queryform.pageNum,pageSize:this.queryform.pageSize,statusInteger:1};this.queryform.pBoardId&&(t.pBoardId=this.queryform.pBoardId),this.queryform.boardId&&(t.boardId=this.queryform.boardId),console.log("[UserHome] getcontent ËØ∑Ê±ÇÂèÇÊï∞:",t);const e=await o.A.post("/article/list",t);200==e.code||1==e.code?(this.$set(this,"contentlist",e.data.records||[]),this.$set(this,"total",e.data.total||0),console.log("[UserHome] getcontent ËØ∑Ê±ÇÊàêÂäü",{"ËøîÂõûÁöÑÈ°µÁ†Å":e.data.current,"ÊÄªËÆ∞ÂΩïÊï∞":e.data.total,"ÂΩìÂâçÈ°µËÆ∞ÂΩïÊï∞":(e.data.records||[]).length})):(this.$set(this,"contentlist",[]),this.$set(this,"total",0))}catch(t){console.error("[UserHome] getcontent ËØ∑Ê±ÇÂ§±Ë¥•:",t),this.$set(this,"contentlist",[]),this.$set(this,"total",0)}},updateCurrentFilter(){if(!this.queryform.boardId&&!this.queryform.pBoardId)return void(this.currentFilter=this.$t("forum.allPosts"));const t=(e,s)=>{for(const i of e){if(i.id==s)return i.name;if(i.children&&i.children.length>0){const e=t(i.children,s);if(e)return e}}return null};let e="";this.queryform.boardId?e=t(this.treedata,this.queryform.boardId):this.queryform.pBoardId&&(e=t(this.treedata,this.queryform.pBoardId)),this.currentFilter=e||"Á≠õÈÄâÂÜÖÂÆπ"},handleArticlePublished(){this.$message.success("ÊñáÁ´†ÂèëÂ∏ÉÊàêÂäüÔºÅ"),this.getcontent()},async handleSort(t){if(this.currentSort===t)return;this.currentSort=t;const e={all:this.$t("forum.allPosts"),hot:this.$t("forum.hot")+" "+this.$t("nav.forum"),latest:this.$t("forum.latest")+" "+this.$t("nav.forum")};this.currentFilter=e[t],this.queryform.pageNum=1,"hot"===t?await this.getTopReadArticles():"latest"===t?await this.getLatestArticles():await this.getcontent(),this.saveFilterState()},async getLatestArticles(){try{const t=await o.A.post("/article/latest");200==t.code||1==t.code?(this.$set(this,"contentlist",t.data||[]),this.$set(this,"total",(t.data||[]).length)):(this.$set(this,"contentlist",[]),this.$set(this,"total",0),this.$message.error(t.msg||"Ëé∑ÂèñÊúÄÊñ∞ÊñáÁ´†Â§±Ë¥•"))}catch(t){console.error("Ëé∑ÂèñÊúÄÊñ∞ÊñáÁ´†Â§±Ë¥•:",t),this.$set(this,"contentlist",[]),this.$set(this,"total",0),this.$message.error("Ëé∑ÂèñÊúÄÊñ∞ÊñáÁ´†Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï")}},async getTopReadArticles(){try{const t=await o.A.post("/article/topReadCount");200==t.code||1==t.code?(this.$set(this,"contentlist",t.data||[]),this.$set(this,"total",(t.data||[]).length)):(this.$set(this,"contentlist",[]),this.$set(this,"total",0),this.$message.error(t.msg||"Ëé∑ÂèñÁÉ≠Èó®ÊñáÁ´†Â§±Ë¥•"))}catch(t){console.error("Ëé∑ÂèñÁÉ≠Èó®ÊñáÁ´†Â§±Ë¥•:",t),this.$set(this,"contentlist",[]),this.$set(this,"total",0),this.$message.error("Ëé∑ÂèñÁÉ≠Èó®ÊñáÁ´†Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï")}},handleCommunitySelect(t){this.queryform.boardId=t.boardId,this.queryform.pBoardId=t.pBoardId,this.queryform.pageNum=1,this.currentFilter=t.name,this.getcontent(),this.saveFilterState(),this.isMobile&&this.isSidebarOpen&&(this.isSidebarOpen=!1),this.$message.success(`Â∑≤Á≠õÈÄâÔºö${t.name}`)},toggleChat(){this.isChatOpen||this.isLoggedIn?(this.isChatOpen=!this.isChatOpen,this.isChatOpen&&(this.unreadCount=0)):this.$message.warning("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI ËÅäÂ§©ÂäüËÉΩ")},async handleSendMessage(t){if(this.isLoggedIn){if(t.trim()){this.chatMessages.push({id:Date.now().toString(),role:"user",text:t,timestamp:Date.now()}),this.isChatLoading=!0;try{await this.callAiServiceStream()}catch(e){console.error("AI ÊúçÂä°Ë∞ÉÁî®Â§±Ë¥•:",e),this.chatMessages.push({id:(Date.now()+1).toString(),role:"system",text:"AI ÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ",timestamp:Date.now()}),this.isChatLoading=!1}}}else this.$message.warning("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI ËÅäÂ§©ÂäüËÉΩ")},async callAiServiceStream(){try{const t=(Date.now()+1).toString();let e="",s=[],i=!1,a=-1;h.A.chatStream(this.chatMessages,(s=>{i?(e+=s,this.chatMessages[a].text=e,this.$set(this.chatMessages,a,{...this.chatMessages[a]})):(this.chatMessages.push({id:t,role:"model",text:s,timestamp:Date.now(),usedKnowledge:[]}),a=this.chatMessages.length-1,i=!0)}),(t=>{s=t,a>=0&&(this.chatMessages[a].usedKnowledge=t)}),(()=>{if(this.isChatLoading=!1,this.isChatOpen||this.unreadCount++,s&&s.length>0&&a>=0){const t=s.map((t=>`üìö ${t.title}`)).join("\n");this.chatMessages[a].text+=`\n\n---\n${t}`,this.$set(this.chatMessages,a,{...this.chatMessages[a]})}}),(t=>{console.error("AI ÊµÅÂºèÂìçÂ∫îÈîôËØØ:",t),i&&a>=0&&this.chatMessages.splice(a,1),this.chatMessages.push({id:(Date.now()+2).toString(),role:"system",text:this.getFriendlyErrorMessage(t),timestamp:Date.now()}),this.isChatLoading=!1}))}catch(t){throw console.error("AI ÊúçÂä°ÈîôËØØ:",t),this.isChatLoading=!1,t}},getFriendlyErrorMessage(t){const e=t.message||t.toString()||"";return e.includes("API Key")||e.includes("apiKey")?"ËØ∑ÂÖàÈÖçÁΩÆÊúâÊïàÁöÑ API Key„ÄÇÈÖçÁΩÆË∑ØÂæÑÔºöÁÆ°ÁêÜÂêéÂè∞ ‚Üí ‰ø°ÊÅØÁÆ°ÁêÜ ‚Üí AIËÆæÁΩÆÁÆ°ÁêÜ":e.includes("ÁΩëÁªú")||e.includes("fetch")||e.includes("timeout")?"ÁΩëÁªúËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËÆæÁΩÆÂêéÈáçËØï":e.includes("rate limit")||e.includes("429")?"ËØ∑Ê±ÇËøá‰∫éÈ¢ëÁπÅÔºåËØ∑Á®çÂêéÂÜçËØï":e.includes("quota")||e.includes("balance")?"API È¢ùÂ∫¶‰∏çË∂≥ÔºåËØ∑Ê£ÄÊü•Ë¥¶Êà∑‰ΩôÈ¢ù":"Êä±Ê≠âÔºåÊàëÊöÇÊó∂Êó†Ê≥ïÂõûÂ§ç„ÄÇËØ∑Á®çÂêéÂÜçËØïÊàñËÅîÁ≥ªÁÆ°ÁêÜÂëò"},async callAiService(){try{return new Promise(((t,e)=>{let s="",i=[];h.A.chatStream(this.chatMessages,(t=>{s+=t}),(t=>{i=t}),(()=>{t({reply:s,usedKnowledge:i,latency:0})}),(t=>{e(t)}))}))}catch(t){throw console.error("AI ÊúçÂä°ÈîôËØØ:",t),t}},handleToggleFromLogo(){this.isMobile&&this.toggleSidebar()},checkMobile(){const t=window.innerWidth;this.windowWidth=t,this.isMobile=t<=768,this.isMobile?this.isSidebarCollapsed=!0:this.isSidebarCollapsed=!1},handleResize(){this.checkMobile()},toggleSidebar(){this.isMobile?(this.isSidebarOpen=!this.isSidebarOpen,this.isSidebarOpen?document.body.style.overflow="hidden":document.body.style.overflow=""):this.isSidebarCollapsed=!this.isSidebarCollapsed},closeSidebar(){this.isMobile&&this.isSidebarOpen&&(console.log("[UserHome] ÂÖ≥Èó≠ÁßªÂä®Á´Ø‰æßËæπÊ†è"),this.isSidebarOpen=!1,document.body.style.overflow="")},async handleSearchFromHeader(t){console.log("[UserHome] Êî∂Âà∞ÊêúÁ¥¢ËØ∑Ê±Ç:",t);try{const e=await o.A.post("/article/aiSearch",{question:t});200===e.code||1===e.code?(console.log("[UserHome] ÊêúÁ¥¢ÁªìÊûú:",e.data),e.data&&Array.isArray(e.data)?(this.$set(this,"contentlist",e.data),this.$set(this,"total",e.data.length||0)):e.data&&e.data.records?(this.$set(this,"contentlist",e.data.records||[]),this.$set(this,"total",e.data.total||0)):(this.$set(this,"contentlist",[]),this.$set(this,"total",0)),this.currentFilter=`ÊêúÁ¥¢Ôºö"${t}"`,this.queryform.pageNum=1,this.$message.success("ÊêúÁ¥¢ÂÆåÊàê")):(this.$message.error(e.msg||"ÊêúÁ¥¢Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï"),this.$set(this,"contentlist",[]),this.$set(this,"total",0))}catch(e){console.error("[UserHome] ÊêúÁ¥¢Â§±Ë¥•:",e),this.$message.error("ÊêúÁ¥¢Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï"),this.$set(this,"contentlist",[]),this.$set(this,"total",0)}},handleClearSearchFromHeader(){console.log("[UserHome] Êî∂Âà∞Ê∏ÖÈô§ÊêúÁ¥¢ËØ∑Ê±Ç"),this.currentFilter=this.$t("forum.allPosts"),this.getcontent()},openCreateBoardDialog(){this.isLoggedIn?this.showCreateBoardDialog=!0:this.$message.warning("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÂàõÂª∫ÊùøÂùó")},async handleBoardCreated(){console.log("[UserHome] ÊùøÂùóÂàõÂª∫ÊàêÂäüÔºåÂà∑Êñ∞ÊùøÂùóÂàóË°®"),await this.getlist()}}},g=m,p=s(81656),f=(0,p.A)(g,i,a,!1,null,"2ee26fe0",null),v=f.exports},42051:function(t,e,s){s.d(e,{A:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"forum-container"},[t.loadingPage?e("div",{staticClass:"page-loading"},[e("div",{staticClass:"loading-content"},[t._m(0),e("div",{staticClass:"loading-text"},[t._v(t._s(t.$t("article.loadingContent")))])])]):t._e(),t.isMobile?e("div",{staticClass:"sidebar-overlay",class:{"overlay-active":t.isSidebarOpen&&t.isMobile},on:{click:t.toggleSidebar}}):t._e(),e("ForumSidebar",{attrs:{"tree-data":t.treedata,"expanded-keys":t.expandedKeys,"current-node-key":t.currentNodeKey,"active-board-id":t.queryform.boardId,"is-mobile":t.isMobile,"is-sidebar-collapsed":t.isSidebarCollapsed,"is-sidebar-open":t.isSidebarOpen,query:t.$route.query},on:{"node-click":t.handleNodeClick,close:t.toggleSidebar,navigate:t.handleNavigate}}),e("div",{staticClass:"main-content"},[e("div",{staticClass:"back-button-container"},[e("el-button",{staticClass:"back-button",attrs:{icon:"el-icon-arrow-left",type:"text"},on:{click:t.goBack}},[t._v(" "+t._s(t.$t("article.backToPrevious"))+" ")])],1),e("div",{staticClass:"container-box"},[e("div",{staticClass:"article-card"},[e("div",{staticClass:"article-header"},[e("h1",{staticClass:"article-title"},[t._v(t._s(t.info.title))]),e("div",{staticClass:"article-meta"},[e("div",{staticClass:"meta-item"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(t._s(t.info.postTime))])]),e("div",{staticClass:"meta-item"},[e("i",{staticClass:"el-icon-user"}),e("span",[t._v(t._s(t.info.nickName))])])])]),e("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.info.content)}}),t.fjlist.length>0?e("div",{staticClass:"attachments"},[e("div",{staticClass:"attachments-title"},[e("i",{staticClass:"el-icon-document"}),e("span",[t._v(t._s(t.$t("article.attachmentDownload")))])]),e("div",{staticClass:"attachments-list"},t._l(t.fjlist,(function(s){return e("div",{key:s.fileId,staticClass:"attachment-item",on:{click:function(e){return t.xiazai(s)}}},[e("i",{staticClass:"el-icon-download attachment-icon"}),e("span",{staticClass:"attachment-name"},[t._v(t._s(s.fileName))]),s.fileSize?e("span",{staticClass:"attachment-size"},[t._v(t._s(t.$formatFileSize(s.fileSize)))]):t._e()])})),0)]):t._e(),e("div",{staticClass:"article-actions"},[e("div",{staticClass:"action-item",class:{active:t.havelike},on:{click:t.like}},[e("i",{staticClass:"el-icon-star-on"}),e("span",[t._v(t._s(t.info.goodCount||0))])]),e("div",{staticClass:"action-btn"},[e("i",{staticClass:"el-icon-s-comment"}),e("span",{staticClass:"action-text"},[t._v(t._s(t.$t("article.comments")))]),e("span",{staticClass:"action-count"},[t._v(t._s(t.info.commentCount||0))])]),e("div",{staticClass:"action-btn"},[e("i",{staticClass:"el-icon-view"}),e("span",{staticClass:"action-text"},[t._v(t._s(t.$t("article.view")))]),e("span",{staticClass:"action-count"},[t._v(t._s(t.info.readCount||0))])]),e("el-button",{staticClass:"comment-btn",attrs:{type:"primary",disabled:t.commentButtonDisabled},on:{click:t.pl}},[e("i",{staticClass:"el-icon-edit"}),t._v(" "+t._s(t.commentButtonText)+" ")])],1)]),e("div",{staticClass:"comments-section"},[e("div",{staticClass:"section-header"},[e("h3",{staticClass:"section-title"},[e("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "+t._s(t.$t("article.allComments"))+" "),e("span",{staticClass:"comment-count"},[t._v(t._s(t.commentlist.length))])])]),0===t.commentlist.length?e("div",{staticClass:"empty-comments"},[e("div",{staticClass:"empty-comment-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"}},[e("path",{attrs:{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("p",{staticClass:"empty-comment-title"},[t._v(t._s(t.$t("article.noCommentsYet")))]),e("p",{staticClass:"empty-comment-desc"},[t._v(t._s(t.$t("article.beFirstToComment")))])]):t._e(),e("div",{staticClass:"comments-list"},t._l(t.commentlist,(function(s){return e("div",{key:s.commentId,staticClass:"comment-item"},[e("comment-item",{attrs:{comment:s,type:"main","current-user-id":t.user?t.user.id:null,"article-author-id":t.info.userId,"can-pin":t.user&&t.user.userId==t.info.userId},on:{like:t.commentlike,reply:t.pl1,pin:t.zd,delete:t.delComment}}),s.children&&s.children.length>0?e("div",{staticClass:"comment-replies"},t._l(s.children,(function(i){return e("comment-item",{key:i.commentId,attrs:{comment:i,type:"reply","current-user-id":t.user?t.user.id:null,"article-author-id":t.info.userId,"can-pin":t.user&&t.user.userId==t.info.userId},on:{like:t.commentlike,reply:()=>t.pl2(i,s),pin:t.zd,delete:t.delComment}})})),1):t._e()],1)})),0)])])]),e("el-dialog",{class:t.isMobile?"mobile-comment-dialog":"comment-dialog",attrs:{title:0===t.form.pCommentId?t.$t("article.publishComment"):t.$t("article.replyToComment"),visible:t.fromVisible,width:t.isMobile?"100%":"600px","close-on-click-modal":!1,"modal-append-to-body":!0,"append-to-body":!0,"custom-class":"comment-dialog-wrapper"},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticClass:"comment-form",attrs:{model:t.form,"label-width":t.isMobile?"60px":"80px"}},[e("el-form-item",{attrs:{label:t.$t("article.contentLabel"),prop:"content",required:""}},[e("el-input",{staticClass:"comment-textarea",attrs:{type:"textarea",rows:t.isMobile?6:4,placeholder:t.isMobile?t.$t("article.saySomething"):t.$t("article.enterCommentContent"),maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),e("el-form-item",{attrs:{label:t.$t("article.imageLabel")}},[t.isMobile?[t.form.imagePath?t._e():e("oss-image-upload",{attrs:{"upload-type":"comment","max-size":1,tip:t.$t("article.uploadImage"),"size-tip":"Â§ßÂ∞è‰∏çË∂ÖËøá1MB","upload-class":"upload-area"},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"upload-content mobile-upload"},[e("i",{staticClass:"el-icon-plus upload-icon"})])]},proxy:!0}],null,!1,1607958322),model:{value:t.form.imagePath,callback:function(e){t.$set(t.form,"imagePath",e)},expression:"form.imagePath"}}),t.form.imagePath?e("div",{staticClass:"mobile-image-preview"},[e("div",{staticClass:"preview-wrapper"},[e("img",{staticClass:"preview-image",attrs:{src:t.$getImageUrl(t.form.imagePath)}}),e("i",{staticClass:"el-icon-error close-icon",on:{click:function(e){t.form.imagePath=""}}})])]):t._e()]:[e("oss-image-upload",{attrs:{"upload-type":"comment","max-size":1,tip:t.$t("article.uploadImage"),"size-tip":"Â§ßÂ∞è‰∏çË∂ÖËøá1MB","upload-class":"upload-area"},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"upload-content",class:{"mobile-upload":t.isMobile}},[t.form.imagePath?t._e():e("i",{staticClass:"el-icon-plus upload-icon"}),t.form.imagePath?e("img",{staticClass:"upload-preview",attrs:{src:t.$getImageUrl(t.form.imagePath)}}):t._e()])]},proxy:!0}],null,!1,1306826488),model:{value:t.form.imagePath,callback:function(e){t.$set(t.form,"imagePath",e)},expression:"form.imagePath"}}),e("div",{staticClass:"upload-tip"},[t._v("ÊîØÊåÅ‰∏ä‰º†ÂõæÁâáÔºåÂ§ßÂ∞è‰∏çË∂ÖËøá1MB")])]],2)],1),e("div",{class:t.isMobile?"mobile-dialog-footer":"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isMobile?[e("el-button",{staticClass:"mobile-btn mobile-btn-cancel",attrs:{size:"large"},on:{click:function(e){t.fromVisible=!1}}},[t._v("ÂèñÊ∂à")]),e("el-button",{staticClass:"mobile-btn mobile-btn-confirm",attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:t.save}},[t._v(" "+t._s(t.loading?t.$t("article.publishing"):t.$t("article.publish"))+" ")])]:[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("ÂèñÊ∂à")]),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("Á°ÆÂÆö")])]],2)],1)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-spinner"},[e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"}),e("div",{staticClass:"spinner"})])}],o=(s(44114),s(18962)),r=s(36096),n=s(8723),l=s(92646),c=s(65383),d={name:"ArticleDetail",components:{ForumSidebar:r.A,OssImageUpload:n.A,UserAvatar:l.A,CommentItem:c.A},data(){return{info:{},fromVisible:!1,form:{},total:0,commentlist:[],havelike:!1,fjlist:[],comment:"",comment1:"",receive:"",receive1:"",receive3:"",loading:!1,user:null,token:"",commentButtonDisabled:!0,commentButtonText:"",loadingPage:!0,loadingTime:0,keyboardOpen:!1,treedata:[],expandedKeys:[1,2,5],currentNodeKey:null,queryform:{boardId:"",pBoardId:""},isMobile:!1,isSidebarOpen:!1,isSidebarCollapsed:!1,windowWidth:window.innerWidth}},mounted(){this.commentButtonText=this.$t("article.publishComment"),this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.startLoadingTimer(),this.getdata(),this.getBoardList(),this.checkMobile(),window.addEventListener("resize",this.handleResize),this.$root.$on("toggle-mobile-sidebar",this.handleToggleFromLogo),setTimeout((()=>{this.commentButtonDisabled=!1}),500)},methods:{goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/userhome")},startLoadingTimer(){this.loadingTime=setTimeout((()=>{this.loadingPage}),3e3)},clearLoadingTimer(){this.loadingTime&&(clearTimeout(this.loadingTime),this.loadingTime=0)},async getBoardList(){try{const t=await o.A.get("/board/list");200==t.code&&(this.treedata=t.data)}catch(t){console.error(t)}},handleNavClick(t){this.activeNav=t},handleNodeClick(t){this.$router.push({path:"/userhome",query:{boardId:0!=t.pid?t.id:"",pBoardId:0!=t.pid?t.pid:t.id}}),window.innerWidth<=768&&this.closeMobileSidebar()},handleNavigate(t){"home"===t?this.$router.push({path:"/userhome",query:{}}):"community"===t&&this.$message.info("Á§æÂå∫ÂπøÂú∫ÂäüËÉΩÂºÄÂèë‰∏≠...")},toggleMobileSidebar(){this.mobileSidebarOpen=!this.mobileSidebarOpen},closeMobileSidebar(){this.mobileSidebarOpen=!1},handleToggleFromLogo(){this.toggleMobileSidebar()},pl1(t){const e=localStorage.getItem("userinfo");e?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:t.commentId,replyUserId:t.userId,imagePath:""},this.$nextTick((()=>{this.isMobile&&this.setupMobileKeyboardListener()}))):this.$message.error(this.$t("article.notLoggedIn"))},pl2(t,e){const s=localStorage.getItem("userinfo");s?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:e.commentId,replyUserId:t.userId,imagePath:""},this.$nextTick((()=>{this.isMobile&&this.setupMobileKeyboardListener()}))):this.$message.error(this.$t("article.notLoggedIn"))},pl(){if(this.commentButtonDisabled)return void console.log("[ËØÑËÆ∫] ÊåâÈíÆËøòÂú®Á¶ÅÁî®ÊúüÂÜÖÔºåÂøΩÁï•ÁÇπÂáª");const t=localStorage.getItem("userinfo");t?(this.fromVisible=!0,this.form={articleId:this.info.id,pCommentId:0,imagePath:""},this.$nextTick((()=>{this.isMobile&&this.setupMobileKeyboardListener()}))):this.$message.error(this.$t("article.notLoggedIn"))},async zd(t){const e=localStorage.getItem("userinfo");if(e)try{const e=await o.A.post("/article/changeTop",{commentId:t});200==e.code&&(this.$message.success(e.message||this.$t("article.operationSuccess")),this.getdata())}catch(s){console.error(s)}else this.$message.error(this.$t("article.notLoggedIn"))},async commentlike(t){const e=localStorage.getItem("userinfo");if(e)try{const e=await o.A.post("/article/commentlike",{commentId:t});200==e.code&&this.getdata()}catch(s){console.error(s)}else this.$message.error(this.$t("article.notLoggedIn"))},async getlist(){try{const t=await o.A.post("/article/loadcomment",{articleId:this.info.id});200==t.code&&(this.commentlist=t.data)}catch(t){console.error("Âä†ËΩΩËØÑËÆ∫Â§±Ë¥•:",t),this.commentlist=[]}},async xiazai(t){try{await o.A.get("/article/downloadAttachment?fileId="+t.fileId);this.$message.success(this.$t("article.startDownload"))}catch(e){console.error(e)}},async like(){const t=localStorage.getItem("userinfo");if(!t)return void this.$message.error(this.$t("article.notLoggedIn"));const e=this.havelike,s=this.info.goodCount||0;this.havelike=!e,this.info.goodCount=e?s-1:s+1;try{const t=await o.A.post("/article/dolike",{id:this.info.id});200==t.code||(this.havelike=e,this.info.goodCount=s,this.$message.error(t.msg||this.$t("article.operationFailed")))}catch(i){this.havelike=e,this.info.goodCount=s,this.$message.error("ÁΩëÁªúÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï")}},async delComment(t){this.$confirm(this.$t("article.deleteCommentConfirm"),this.$t("common.confirm"),{confirmButtonText:this.$t("article.confirmDelete"),cancelButtonText:this.$t("common.cancel"),type:"warning",customClass:"delete-confirm"}).then((async()=>{try{const e=await o.A.post("/article/deletecomment",{commentId:t});200==e.code||1==e.code?(this.$message.success(this.$t("article.deleteSuccess")),this.getlist(),this.info&&void 0!==this.info.commentCount&&(this.info.commentCount=Math.max(0,this.info.commentCount-1))):this.$message.error(e.msg||this.$t("article.deleteFailed"))}catch(e){console.error("Âà†Èô§ËØÑËÆ∫Â§±Ë¥•:",e),this.$message.error(this.$t("article.operationRetry"))}})).catch((()=>{}))},async save(){if(this.form.content&&""!==this.form.content.trim()){this.loading=!0;try{const t=await o.A.post("/article/postcomment",{articleId:this.form.articleId,pCommentId:this.form.pCommentId,content:this.form.content,imagePath:this.form.imagePath,replyUserId:this.form.replyUserId});200==t.code&&(this.$message.success(this.$t("article.commentSuccess")),this.fromVisible=!1,this.getdata())}catch(t){console.error(t)}finally{this.loading=!1}}else this.$message.warning(this.$t("article.enterCommentContent"))},async getdata(){try{const t=await o.A.post("/article/detail",{id:this.$route.query.id});200==t.code&&(this.info=t.data.article,this.fjlist=t.data.attachments||[],this.havelike=!0===t.data.haveLike||1===t.data.haveLike,await this.getlist())}catch(t){console.error(t)}finally{setTimeout((()=>{this.loadingPage=!1,this.clearLoadingTimer()}),1e3)}},checkMobile(){const t=window.innerWidth;this.windowWidth=t,this.isMobile=t<=768,this.isMobile?this.isSidebarCollapsed=!0:this.isSidebarCollapsed=!1},handleResize(){this.checkMobile()},toggleSidebar(){this.isMobile?(this.isSidebarOpen=!this.isSidebarOpen,this.isSidebarOpen?document.body.style.overflow="hidden":document.body.style.overflow=""):this.isSidebarCollapsed=!this.isSidebarCollapsed},setupMobileKeyboardListener(){this.removeMobileKeyboardListener(),this.initialHeight=window.innerHeight,this.keyboardShowHandler=()=>{const t=window.innerHeight;t<this.initialHeight-150?(this.keyboardOpen=!0,this.addKeyboardOpenClass()):(this.keyboardOpen=!1,this.removeKeyboardOpenClass())},window.addEventListener("resize",this.keyboardShowHandler),window.visualViewport&&window.visualViewport.addEventListener("resize",this.keyboardShowHandler)},addKeyboardOpenClass(){const t=document.querySelector(".mobile-comment-dialog");t&&t.classList.add("keyboard-open")},removeKeyboardOpenClass(){const t=document.querySelector(".mobile-comment-dialog");t&&t.classList.remove("keyboard-open")},removeMobileKeyboardListener(){this.keyboardShowHandler&&(window.removeEventListener("resize",this.keyboardShowHandler),window.visualViewport&&window.visualViewport.removeEventListener("resize",this.keyboardShowHandler),this.keyboardShowHandler=null),this.removeKeyboardOpenClass()}},beforeDestroy(){this.clearLoadingTimer(),window.removeEventListener("resize",this.handleResize),this.$root.$off("toggle-mobile-sidebar",this.handleToggleFromLogo),this.removeMobileKeyboardListener()}},h=d,u=s(81656),m=(0,u.A)(h,i,a,!1,null,"351badc8",null),g=m.exports},4373:function(t,e,s){s.d(e,{A:function(){return u}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global"},[e("div",{staticClass:"head"},[e("div",{staticClass:"logo-container"},["/userhome"!==t.$route.path?e("div",{staticClass:"back-button",on:{click:t.goBack}},[e("i",{staticClass:"el-icon-arrow-left"})]):t._e(),t.isMobile&&"/userhome"===t.$route.path?e("div",{staticClass:"mobile-menu-icon",on:{click:function(e){return e.stopPropagation(),t.handleMenuClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-s-unfold"})]):t._e(),e("h2",{staticClass:"title",on:{click:t.handleLogoClick}},[t._v("BROAD FORUM")])]),"/userhome"===t.$route.path?e("div",{staticClass:"search-container"},[e("el-input",{staticClass:"head-search-input",attrs:{placeholder:t.$t("search.placeholder"),clearable:""},on:{clear:t.handleSearchClear},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}},[e("el-button",{staticClass:"head-search-button",attrs:{slot:"append"},on:{click:t.handleSearch},slot:"append"},[t._v(" "+t._s(t.$t("search.askAI"))+" ")])],1)],1):t._e(),e("div",{staticClass:"user-info-container"},[e("div",{staticClass:"language-switcher-container"},[e("LanguageSwitcher")],1),t.isLoggedIn?e("div",{staticClass:"user-dropdown"},[e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",{staticClass:"user-profile"},[e("div",{staticClass:"avatar-container"},[e("user-avatar",{attrs:{src:t.user.avatar,size:"small",clickable:!1}})],1),e("span",{staticClass:"user-name"},[t._v(t._s(t.user.userName))]),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"personalCenter"}},[e("i",{staticClass:"el-icon-user"}),t._v(t._s(t.$t("user.profile"))+" ")]),e("el-dropdown-item",{attrs:{command:"myBlog",divided:""}},[e("i",{staticClass:"el-icon-document"}),t._v(t._s(t.$t("forum.myPosts"))+" ")]),e("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e("i",{staticClass:"el-icon-switch-button"}),t._v(t._s(t.$t("common.logout"))+" ")])],1)],1)],1):e("div",{staticClass:"button-container"},[e("div",{staticClass:"btn btn-primary",on:{click:t.goLogo}},[t._v(t._s(t.$t("common.login")))]),e("div",{staticClass:"btn btn-secondary",on:{click:t.goRegister}},[t._v(t._s(t.$t("common.register")))])])])]),e("keep-alive",[e("router-view")],1)],1)},a=[],o=(s(44114),s(18962)),r=s(92646),n=s(23155),l={components:{UserAvatar:r.A,LanguageSwitcher:n.A},data(){return{user:{},activeIndex:"/userhome",isMobile:!1,searchKeyword:""}},computed:{isLoggedIn(){return!!window.localStorage.getItem("token")&&!!this.user.userName}},mounted(){const t=window.localStorage.getItem("token");t&&this.getinfo(),this.activeIndex=this.$route.path,this.checkMobile(),window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},watch:{"$route.path"(t){this.activeIndex=t}},methods:{goHome(){"/userhome"!==this.$route.path&&(this.activeIndex="/userhome",this.$router.push("/userhome").catch((t=>{if("NavigationDuplicated"!==t.name)throw t})))},goToPersonalCenter(){this.isLoggedIn?"/userinfo"!==this.$route.path&&(this.activeIndex="/userinfo",this.$router.push("/userinfo").catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))):this.$message.warning(this.$t("error.unauthorized"))},goToUserBlog(){this.isLoggedIn?"/userblog"!==this.$route.path&&(this.activeIndex="/userblog",this.$router.push("/userblog").catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))):this.$message.warning(this.$t("error.unauthorized"))},async getinfo(){try{const t=await o.A.get("/info");t.data&&t.data.userName?(console.log("res.data",t.data),this.user=t.data,window.localStorage.setItem("userinfo",JSON.stringify(this.user))):this.clearUserData()}catch(t){console.error("Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•:",t),this.clearUserData()}},goLogo(){"/login"!==this.$route.path&&this.$router.push("/login").catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))},goRegister(){const t=this.$route.query.inviterId;console.log("ÂÆåÊï¥ÁöÑURL:",window.location.href),console.log("Ëé∑ÂèñÂà∞ÁöÑinviterId:",t),t?(console.log("Ë∑≥ËΩ¨Âà∞Ê≥®ÂÜåÈ°µÈù¢ÔºåÊê∫Â∏¶ÈÇÄËØ∑Á†Å:",t),this.$router.push({path:"/register",query:{inviterId:t}}).catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))):(console.log("Ë∑≥ËΩ¨Âà∞Ê≥®ÂÜåÈ°µÈù¢ÔºåÊó†ÈÇÄËØ∑Á†Å"),this.$router.push("/register").catch((t=>{if("NavigationDuplicated"!==t.name)throw t})))},async logout(){try{await o.A.post("/logout"),console.log("ÁôªÂá∫ÊàêÂäü")}catch(t){console.error("ÁôªÂá∫ËØ∑Ê±ÇÂ§±Ë¥•:",t)}finally{this.clearUserData(),this.$message.success(this.$t("auth.logoutSuccess")),this.$router.push("/login").catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))}},clearUserData(){window.localStorage.removeItem("userinfo"),window.localStorage.removeItem("token"),window.sessionStorage.clear(),this.user={},this.$store&&this.$store.commit("CLEAR_USER_STATE")},handleLogoClick(){this.isMobile&&"/userhome"===this.$route.path?this.$root.$emit("toggle-mobile-sidebar"):"/userhome"!==this.$route.path&&this.$router.push("/userhome").catch((t=>{if("NavigationDuplicated"!==t.name)throw t}))},goBack(){this.$router.go(-1)},handleMenuClick(){this.$root.$emit("toggle-mobile-sidebar")},checkMobile(){this.isMobile=window.innerWidth<=768},handleResize(){this.checkMobile()},handleCommand(t){switch(t){case"personalCenter":this.goToPersonalCenter();break;case"myBlog":this.goToUserBlog();break;case"logout":this.logout();break}},handleSearch(){this.searchKeyword&&this.searchKeyword.trim()?this.$root.$emit("search-articles",this.searchKeyword):this.$message.warning(this.$t("search.enterKeyword"))},handleSearchClear(){this.searchKeyword="",this.$root.$emit("clear-search"),this.$message.success(this.$t("search.cleared"))}}},c=l,d=s(81656),h=(0,d.A)(c,i,a,!1,null,"acfb51fc",null),u=h.exports},4849:function(t,e,s){s.d(e,{A:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userinfo-container"},[t._m(0),e("div",{staticClass:"profile-card"},[e("div",{staticClass:"card-header"},[e("button",{staticClass:"back-btn",on:{click:t.goBack}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M19 12H5M12 19l-7-7 7-7"}})]),e("span",[t._v(t._s(t.$t("common.back")))])]),e("h2",{staticClass:"page-title"},[t._v(t._s(t.$t("user.profile")))]),e("div",{staticClass:"spacer"})]),e("div",{staticClass:"card-content"},[e("el-form",{ref:"profileForm",staticClass:"profile-form",attrs:{model:t.user,rules:t.rules,"label-position":"top"}},[e("div",{staticClass:"avatar-section"},[e("oss-image-upload",{attrs:{"upload-type":"avatar","max-size":1,tip:t.$t("user.clickToUploadAvatar"),"size-tip":t.$t("user.uploadAvatarFormatTip"),"upload-class":"avatar-uploader"},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"avatar-wrapper"},[t.user.avatar?e("img",{staticClass:"avatar",attrs:{src:t.$getImageUrl(t.user.avatar)}}):e("div",{staticClass:"avatar-placeholder"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"}},[e("path",{attrs:{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}})])]),e("div",{staticClass:"avatar-overlay"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}})]),e("span",[t._v(t._s(t.$t("user.changeAvatar")))])])])]},proxy:!0}]),model:{value:t.user.avatar,callback:function(e){t.$set(t.user,"avatar",e)},expression:"user.avatar"}}),e("p",{staticClass:"avatar-tip"},[t._v(t._s(t.$t("user.uploadAvatarTip")))])],1),e("div",{staticClass:"form-fields"},[e("el-form-item",{attrs:{label:t.$t("user.accountLabel"),prop:"userName"}},[e("div",{staticClass:"input-wrapper"},[e("div",{staticClass:"input-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}}),e("circle",{attrs:{cx:"12",cy:"7",r:"4"}})])]),e("el-input",{staticClass:"modern-input",attrs:{disabled:"",placeholder:t.$t("user.accountLabel")},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1)]),e("el-form-item",{attrs:{label:t.$t("user.newPassword"),prop:"password"}},[e("div",{staticClass:"input-wrapper"},[e("div",{staticClass:"input-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("rect",{attrs:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}}),e("path",{attrs:{d:"M7 11V7a5 5 0 0110 0v4"}})])]),e("el-input",{staticClass:"modern-input",attrs:{placeholder:t.$t("user.leaveEmptyToKeepPassword"),type:"password","show-password":""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("p",{staticClass:"field-tip"},[t._v(t._s(t.$t("user.leaveEmptyPasswordTip")))])])],1),e("div",{staticClass:"action-buttons"},[e("button",{staticClass:"btn btn-secondary",on:{click:t.goBack}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M19 12H5M12 19l-7-7 7-7"}})]),e("span",[t._v(t._s(t.$t("common.cancel")))])]),e("button",{class:["btn btn-primary",{"btn-loading":"loading"===t.saveStatus,"btn-success":"success"===t.saveStatus,"btn-error":"error"===t.saveStatus}],attrs:{disabled:t.saving||"loading"===t.saveStatus},on:{click:t.update}},[e("span",{staticClass:"btn-content"},["idle"===t.saveStatus?e("svg",{staticClass:"save-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}}),e("path",{attrs:{d:"M17 21v-8H7v8"}}),e("path",{attrs:{d:"M7 3v5h8"}})]):t._e(),"loading"===t.saveStatus?e("svg",{staticClass:"loading-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"}})]):t._e(),"success"===t.saveStatus?e("svg",{staticClass:"success-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("path",{attrs:{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}}),e("path",{attrs:{d:"M22 4L12 14.01l-3-3"}})]):t._e(),"error"===t.saveStatus?e("svg",{staticClass:"error-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"}},[e("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),e("path",{attrs:{d:"M15 9l-6 6"}}),e("path",{attrs:{d:"M9 9l6 6"}})]):t._e(),e("span",{staticClass:"btn-text"},["idle"===t.saveStatus?[t._v(t._s(t.$t("user.saveChanges")))]:"loading"===t.saveStatus?[t._v(t._s(t.$t("common.saving")))]:"success"===t.saveStatus?[t._v(t._s(t.$t("message.saveSuccess")))]:"error"===t.saveStatus?[t._v(t._s(t.$t("message.saveFailed")))]:t._e()],2)]),e("span",{ref:"saveBtnRipple",staticClass:"btn-ripple"})])])])],1)])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-decoration"},[e("div",{staticClass:"circle circle-1"}),e("div",{staticClass:"circle circle-2"}),e("div",{staticClass:"circle circle-3"})])}],o=(s(44114),s(18962)),r=s(8723),n={name:"UserInfo",components:{OssImageUpload:r.A},data(){return{user:{avatar:"",userName:"",password:""},saving:!1,saveStatus:"idle"}},computed:{rules(){return{password:[{min:6,message:this.$t("user.passwordMinLength"),trigger:"blur"}]}}},mounted(){this.loadUserInfo()},methods:{loadUserInfo(){const t=window.localStorage.getItem("userinfo");t&&(this.user=JSON.parse(t))},goBack(){this.$router&&this.$router.history.length>1?this.$router.go(-1):this.$router.push("/userhome")},async update(){this.$refs.profileForm.validate((async t=>{if(t){this.saveStatus="loading",this.saving=!0;try{const t={...this.user};t.password||delete t.password;const e=await o.A.post("/user/update",t);1===e.code||200===e.code?(this.saveStatus="success",this.$message.success(this.$t("message.saveSuccess")),window.localStorage.setItem("userinfo",JSON.stringify(this.user)),setTimeout((()=>{this.saveStatus="idle",this.goBack()}),1500)):(this.saveStatus="error",this.$message.error(e.msg||e.data||this.$t("message.saveFailed")),setTimeout((()=>{this.saveStatus="idle"}),2e3))}catch(e){console.error(e),this.saveStatus="error",this.$message.error(this.$t("error.operationFailed")),setTimeout((()=>{this.saveStatus="idle"}),2e3)}finally{this.saving=!1}}}))}}},l=n,c=s(81656),d=(0,c.A)(l,i,a,!1,null,"dba0f72e",null),h=d.exports},55044:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global3"},[0==t.tableData.length?e("el-empty",{attrs:{descrption:"ËØ∑ÂÖàÂä†ÂÖ•Â∞èÁªÑ~"}}):e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"Â∫èÂè∑",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"groupName",label:"Â∞èÁªÑÂêçÁß∞"}}),e("el-table-column",{attrs:{label:"Êìç‰Ωú",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail(s.row.id)}}},[t._v("Êü•ÁúãÈóÆÈ¢òÂíåËÆ®ËÆ∫")])]}}])})],1)],1)},a=[],o=(s(44114),s(18962)),r={data(){return{list:[],tableData:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{detail(t){this.$router.push({path:"/userquestion",query:{id:t}})},async getdata(){const t=await o.A.get("/group/usergrouplist?uid="+this.user.id);console.log(t),this.tableData=t.data}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"58e82dd0",null),d=c.exports},18478:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global3"},[0==t.tableData.length?e("el-empty",{attrs:{descrption:"ËØ∑ÂÖàÂä†ÂÖ•Â∞èÁªÑ~"}}):e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"Â∫èÂè∑",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"ÈóÆÈ¢òÂêçÁß∞"}}),e("el-table-column",{attrs:{prop:"teacherName",label:"ÊèêÈóÆÊïôÂ∏à"}}),e("el-table-column",{attrs:{label:"Êìç‰Ωú",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail(s.row.id)}}},[t._v("Êü•ÁúãËÆ®ËÆ∫")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.detail1(s.row.id)}}},[t._v("ËØÑËÆ∫")])]}}])})],1),e("el-dialog",{attrs:{title:"Êü•ÁúãËØÑ‰ª∑",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},t._l(t.commentlist,(function(s){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[null!==s.avatar?e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.avatar,alt:""}}):e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.teacheravatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(null==s.username?s.teachername:s.username))]),e("div",{staticClass:"username"},[t._v(t._s(s.name))])]),e("div",{staticClass:"dianzan",staticStyle:{flex:"1","text-align":"right"}},[1==s.dianzan?e("i",{staticClass:"el-icon-star-off",staticStyle:{color:"blue"},on:{click:function(e){return t.changestar(s)}}}):t._e(),0==s.dianzan?e("i",{staticClass:"el-icon-star-off",on:{click:function(e){return t.changestar(s)}}}):t._e()])])})),0),e("el-dialog",{attrs:{title:"ËØÑ‰ª∑",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"ÂÜÖÂÆπ",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("Âèñ Ê∂à")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Á°Æ ÂÆö")])],1)],1)],1)},a=[],o=(s(98992),s(3949),s(18962)),r={data(){return{fromVisible:!1,form:{},list:[],fromVisible1:!1,qid:"",commentlist:[],tableData:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{async changestar(t){t.dianzan=!t.dianzan,this.commentlist=JSON.parse(JSON.stringify(this.commentlist));const e=await o.A.post("/star/star",{aid:t.id,tid:this.user.id,qqid:this.qid});console.log(e)},async save(){await o.A.post("/answer/add",{name:this.form.content,qid:this.qid,uid:this.user.id});this.fromVisible=!1,this.$message.success("ÊàêÂäü")},detail1(t){this.qid=t,this.fromVisible=!0},async detail(t){const e=await o.A.get("/answer/list?id="+t);console.log(e),this.commentlist=e.data,this.commentlist.forEach((t=>{t.dianzan=!1})),this.fromVisible1=!0},async getdata(){const t=await o.A.get("/group/userqlist",{params:{pageNum:1,pageSize:1e4,keyword:"",tid:this.$route.query.id}});console.log(t),this.tableData=t.data.records}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"448a3e53",null),d=c.exports},26710:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("div",{staticStyle:{width:"70%",margin:"20px auto"}},[t._v(" Êô∫ËÉΩÊé®Ëçê ")]),e("el-card",{staticClass:"hotellist"},t._l(t.tableData2,(function(s){return e("div",{staticClass:"hotelitem",on:{click:function(e){return t.godetail(s)}}},[e("img",{staticStyle:{width:"200px"},attrs:{src:s.img,alt:"",srcset:""}}),e("div",[t._v(t._s(s.name))]),e("div",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("Ôø•"+t._s(s.price))])])})),0),e("div",{staticStyle:{width:"70%",margin:"20px auto"}},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},a=[],o=(s(44114),s(18962)),r={data(){return{tableData:[],tableData1:[],tableData2:[],queryform:{pageNum:1,pageSize:10,keyword:""},user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getlist()},methods:{chaxun(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},godetail(t){this.$router.push({path:"/userhomedetail",query:{id:t.id}})},test(t){this.$router.push({path:"/usertest?id="+t})},async test1(t){const e=await o.A.post("/group/addGroup",{uid:this.user.id,gid:t});1==e.code&&this.$message.success("Âä†ÂÖ•ÊàêÂäü")},detail(t){this.$router.push({path:"/usertypedetail?id="+t})},handleCurrentChange(t){this.queryform.pageNum=t,this.getlist()},async getlist(){const t=await o.A.get("/goods/alllist",{params:this.queryform});console.log(t),1==t.code&&(this.tableData2=t.data.records,this.total=t.data.total)}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"2004efa4",null),d=c.exports},39311:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"globalsource"},[e("div",{staticClass:"sourcename"},[t._v(t._s(t.info.name))]),e("div",{staticClass:"sourceinfo"},[e("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s(74026),alt:""}}),t._v(" "),e("span",[t._v(t._s(0==t.info.watchnum?0:t.info.watchnum))]),e("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s(68677),alt:""}}),t._v(" "),e("span",[t._v(t._s(0==t.info.downloadnum?0:t.info.downloadnum))]),t._v(" "),e("span",[t._v(t._s(t.info.createtime))])]),e("div",{staticClass:"sourceurl"},[e("video",{staticStyle:{width:"100%",height:"200px"},attrs:{controls:"",autoplay:"",src:t.info.url}})]),e("div",[t._v(t._s(t.info.info))]),e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.download()}}},[t._v("‰∏ãËΩΩ")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.pingjia()}}},[t._v("ËØÑ‰ª∑")])],1),e("h3",[t._v("ËØÑ‰ª∑‰ø°ÊÅØ")]),t._l(t.commentlist,(function(s){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.avatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(s.username))]),e("div",{staticClass:"username"},[t._v(t._s(s.content))])])])})),e("el-dialog",{attrs:{title:"ËØÑ‰ª∑",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"ÂÜÖÂÆπ",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("Âèñ Ê∂à")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Á°Æ ÂÆö")])],1)],1)],2)},a=[],o=(s(44114),s(18962)),r={data(){return{user:{},fromVisible:!1,info:{},form:{},commentlist:[]}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdetail()},methods:{pingjia(){this.form={},this.fromVisible=!0},async save(){this.form.sourceid=this.info.id,this.form.userid=this.user.id;const t=await o.A.post("/source/pingjia",this.form);console.log(t),1==t.code&&(this.$message.success("ÊàêÂäü"),this.fromVisible=!1,this.getdetail())},async getdetail(){const t=await o.A.get("/source/detail?id="+this.$route.query.id);console.log(t),this.info=t.data;const e=await o.A.get("/source/pingjialist?id="+this.$route.query.id);console.log(e),this.commentlist=e.data},personal(){this.$router.push({path:"/userinfo"})},async download(){window.location.href=this.info.url;await o.A.post("/source/add",{id:this.info.id,downloadnum:this.info.downloadnum+1});this.getdetail()},logout(){window.localStorage.clear(),this.$router.push({path:"/"})}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"6a4907e4",null),d=c.exports},19688:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"global1"},[e("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.info.name))]),e("div",{staticClass:"list"},t._l(t.list,(function(s,i){return e("div",{staticClass:"listitem"},[e("div",{staticClass:"question"},[t._v(t._s(i+1)+"."+t._s(s.name))]),"ÈÄâÊã©È¢ò"==s.type?e("div",{staticClass:"daan"},[e("el-radio-group",{on:{input:t.change},model:{value:s.daan,callback:function(e){t.$set(s,"daan",e)},expression:"item.daan"}},[e("el-radio",{attrs:{label:"A"}},[t._v("A."+t._s(s.optiona))]),e("el-radio",{attrs:{label:"B"}},[t._v("B."+t._s(s.optionb))]),e("el-radio",{attrs:{label:"C"}},[t._v("C."+t._s(s.optionc))])],1)],1):e("div",{staticClass:"daan"},[e("el-radio-group",{on:{input:t.change},model:{value:s.daan,callback:function(e){t.$set(s,"daan",e)},expression:"item.daan"}},[e("el-radio",{attrs:{label:"T"}},[t._v("A.T")]),e("el-radio",{attrs:{label:"F"}},[t._v("B.F")])],1)],1)])})),0),e("div",{staticClass:"buttoncz"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("Êèê‰∫§")]),e("el-button",{attrs:{type:"primary"},on:{click:t.fahui}},[t._v("ËøîÂõû")])],1)])},a=[],o=(s(44114),s(98992),s(3949),s(18962)),r={data(){return{info:{},list:[],user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdata()},methods:{fahui(){this.$router.go(-1)},change(){this.$forceUpdate(),this.list=JSON.parse(JSON.stringify(this.list)),console.log(this.list)},async getdata(){const t=await o.A.get("/tiku/detail?id="+this.$route.query.id);console.log(t),this.info=t.data.tiku,this.list=t.data.list,this.list.forEach((t=>{t.daan=""}))},async submit(){const t=[],e=[];this.list.forEach((s=>{t.push(s.rightreply),e.push(s.daan)}));const s=await o.A.post("/tiku/addsj",{name:this.info.name,biaozhundaan:JSON.stringify(t),xueshengdaan:JSON.stringify(e),userid:this.user.id,score:0});console.log(s),this.$message.success("ÊàêÂäü"),this.fahui()}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"0751ed0a",null),d=c.exports},36108:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail"},[e("div",{staticClass:"homedetail"},[e("div",{staticClass:"detailimg"},[e("img",{attrs:{src:t.info.avatar,alt:""}})]),e("div",{staticClass:"info"},[e("div",[t._v("ÂêçÁß∞:"+t._s(t.info.name))]),e("div",[t._v("Á±ªÂûã:"+t._s(t.info.type))]),e("div",[e("el-input-number",{model:{value:t.info.num,callback:function(e){t.$set(t.info,"num",e)},expression:"info.num"}})],1),e("div",[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.addcollect()}}},[t._v("Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶")])],1)])]),e("div",{staticClass:"hotellist"},[e("div",{staticClass:"comment"},[t._v("ËØÑ‰ª∑‰ø°ÊÅØ")]),t._l(t.commentlist,(function(s){return e("div",{staticClass:"commentylist"},[e("div",{staticClass:"avatar",staticStyle:{width:"50px",height:"50px","border-radius":"50%","margin-right":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.avatar,alt:""}})]),e("div",{staticClass:"user"},[e("div",{staticClass:"username",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(s.username))]),e("div",{staticClass:"username"},[t._v(t._s(s.content))])])])}))],2),e("el-dialog",{attrs:{title:"ËØÑ‰ª∑",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"ÂÜÖÂÆπ",prop:"name"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("Âèñ Ê∂à")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Á°Æ ÂÆö")])],1)],1)],1)},a=[],o=s(18962),r={data(){return{info:{},tableData:[],fromVisible:!1,commentlist:[],form:{},user:{}}},mounted(){this.user=JSON.parse(window.localStorage.getItem("userinfo")),this.getdetail()},methods:{yuding(){this.form={},this.fromVisible=!0},async getdetail(){const t=await o.A.get("/guke/detail?id="+this.$route.query.id);console.log(t),this.info=t.data},async save(){this.form.subjectid=this.info.id,this.form.userid=this.user.id;const t=await o.A.post("/subject/pingjia",this.form);console.log(t),1==t.code&&(this.$message.success("ÊàêÂäü"),this.fromVisible=!1,this.getdetail())},async addcollect(){this.$confirm("ÊòØÂê¶Á°ÆËÆ§ÈÄâËØæÔºü, ÊòØÂê¶ÁªßÁª≠?","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then((async()=>{const t=await o.A.post("/subject/check",{userid:this.user.id,subjectid:this.info.id});console.log(t),1==t.code&&this.$message({type:"success",message:"ÈÄâËØæÊàêÂäü!"})})).catch((()=>{this.$message({type:"info",message:"Â∑≤ÂèñÊ∂àÂà†Èô§"})}))},async getlist(){const t=await o.A.get("/hotal/typelist",{params:{pageNum:1,pageSize:1e3,hotelId:this.$route.query.id,keyword:""}});console.log(t),1==t.code&&(this.tableData=t.data.records)}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"4aafddc4",null),d=c.exports},76417:function(t,e,s){s.d(e,{A:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"mb"},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÊêúÁ¥¢"},model:{value:t.queryform.keyword,callback:function(e){t.$set(t.queryform,"keyword",e)},expression:"queryform.keyword"}}),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("Êü•ËØ¢")]),e("el-button",{attrs:{type:"info",plain:""},on:{click:function(e){return t.research()}}},[t._v("ÈáçÁΩÆ")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(e){return t.add()}}},[t._v("Êñ∞Â¢û")])],1),e("el-card",[e("div",{staticClass:"table"},[e("el-table",{attrs:{data:t.tableData,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"Â∫èÂè∑",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"name",label:"ÂêçÁß∞"}}),e("el-table-column",{attrs:{prop:"avatar",label:"Â§¥ÂÉè"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.avatar?e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:s.row.avatar,"preview-src-list":[s.row.avatar]}}):t._e()]}}])}),e("el-table-column",{attrs:{prop:"teachername",label:"ÂàõÂª∫‰∫∫"}}),e("el-table-column",{attrs:{label:"Êìç‰Ωú",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.wtch(s.row.id)}}},[t._v("Êü•ÁúãÂ∞èÁªÑÊàêÂëò")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleEdit(s.row)}}},[t._v("ÁºñËæë")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del(s.row.id)}}},[t._v("Âà†Èô§")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.queryform.pageNum,"page-sizes":[5,10,20],"page-size":t.queryform.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),e("el-dialog",{attrs:{title:"Â∞èÁªÑÊàêÂëò",visible:t.fromVisible1,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible1=e}}},[e("el-table",{attrs:{data:t.tableData1,strip:""}},[e("el-table-column",{attrs:{prop:"id",label:"Â∫èÂè∑",width:"70",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"userName",label:"ÂêçÁß∞"}}),e("el-table-column",{attrs:{label:"Êìç‰Ωú",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.del1(s.row.id)}}},[t._v("Âà†Èô§")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"Â∞èÁªÑ‰ø°ÊÅØ",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"ÂêçÁß∞",prop:"gname"}},[e("el-input",{attrs:{placeholder:"ÂêçÁß∞"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"ÂõæÁâá",prop:"avatar"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/files/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[""!==t.avatar?e("img",{staticClass:"avatar",attrs:{src:t.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("Âèñ Ê∂à")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Á°Æ ÂÆö")])],1)],1)],1)},a=[],o=s(18962),r={data(){return{fileList:[],teacherlist:[],tableData:[],pageNum:1,pageSize:10,total:0,username:null,tableData1:[],token:"",name:null,fromVisible:!1,fromVisible1:!1,avatar:"",queryform:{keyword:"",pageNum:1,tid:0,pageSize:10},license:"",form:{avatar:"",license:""},user:{},rules:{cname:[{required:!0,message:"ËØ∑ËæìÂÖ•ÂêçÁß∞",trigger:"blur"}]},ids:[],businessList:[],categoryList:[],hotellist:[],sjlist:[]}},mounted(){this.token=window.localStorage.getItem("token"),this.user=JSON.parse(window.localStorage.getItem("userinfo")),console.log(this.user),this.getlist(),"ADMIN"==this.user.role&&this.getall()},methods:{shenhe(t){},async wtch(t){const e=await o.A.get("/group/groupuserlist?gid="+t);console.log(e),this.fromVisible1=!0,this.tableData1=e.data},selectcaf(t){this.$forceUpdate()},handleFileSuccess(t){this.form.img=t.data},async getall(){const t=await o.A.get("/teacher/all");console.log(t),this.teacherlist=t.data},del1(t){this.$confirm("Ê≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ËØ•Êñá‰ª∂, ÊòØÂê¶ÁªßÁª≠?","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then((async()=>{const e=await o.A.get("/group/deleteusergroup?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"Âà†Èô§ÊàêÂäü!"}),this.fromVisible1=!1)})).catch((()=>{this.$message({type:"info",message:"Â∑≤ÂèñÊ∂àÂà†Èô§"})}))},del(t){this.$confirm("Ê≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ËØ•Êñá‰ª∂, ÊòØÂê¶ÁªßÁª≠?","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then((async()=>{const e=await o.A.get("/group/delete?id="+t);console.log(e),1==e.code&&(this.$message({type:"success",message:"Âà†Èô§ÊàêÂäü!"}),this.getlist())})).catch((()=>{this.$message({type:"info",message:"Â∑≤ÂèñÊ∂àÂà†Èô§"})}))},force(t){this.form.timeRange=t,this.$forceUpdate()},handleEdit(t){this.form=t,this.avatar=t.avatar,this.form.teacherid=t.teacherid,"ADMIN"==this.user.role&&this.getall(),this.fromVisible=!0},search(){this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},research(){this.queryform.keyword="",this.queryform.pageNum=1,this.queryform.pageSize=10,this.getlist()},async getlist(){"TEACHER"==this.user.role&&(this.queryform.tid=this.user.id);const t=await o.A.get("/group/list",{params:this.queryform});console.log(t),1==t.code&&(this.tableData=t.data.records,this.total=t.data.total)},add(){this.avatar="",this.license="",this.fileList=[],this.form={},this.fromVisible=!0},handleLicenseSuccess(t){},async save(){this.form.avatar=this.avatar,"TEACHER"==this.user.role&&(this.form.teachid=this.user.id);const t=await o.A.post("/group/add",this.form);1==t.code&&(this.fromVisible=!1,this.$message.success("Êìç‰ΩúÊàêÂäü"),this.getlist())},handleCurrentChange(t){},handleAvatarSuccess(t){console.log(t),this.avatar=t.data,console.log(this.form.avatar)},handleAvatarSuccess1(t){this.license=t.data}}},n=r,l=s(81656),c=(0,l.A)(n,i,a,!1,null,"13461b58",null),d=c.exports}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,i,a,o){if(!i){var r=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],o=t[d][2];for(var n=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(n=!1,o<r&&(r=o));if(n){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,a,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,i){return s.f[i](t,e),e}),[]))}}(),function(){s.u=function(t){return"static/js/about.f56572ec.js"}}(),function(){s.miniCssF=function(t){return"static/css/about.4a2c2a6f.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="hard-diancan-front:";s.l=function(i,a,o,r){if(t[i])t[i].push(a);else{var n,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+o){n=h;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",e+o),n.src=i),t[i]=[a];var u=function(e,s){n.onerror=n.onload=null,clearTimeout(m);var a=t[i];if(delete t[i],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((function(t){return t(s)})),e)return e(s)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var t=function(t,e,i,a,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",s.nc&&(r.nonce=s.nc);var n=function(s){if(r.onerror=r.onload=null,"load"===s.type)a();else{var i=s&&s.type,n=s&&s.target&&s.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+i+": "+n+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=n,r.parentNode&&r.parentNode.removeChild(r),o(l)}};return r.onerror=r.onload=n,r.href=e,i?i.parentNode.insertBefore(r,i.nextSibling):document.head.appendChild(r),r},e=function(t,e){for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var a=s[i],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===t||o===e))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){a=r[i],o=a.getAttribute("data-href");if(o===t||o===e)return a}},i=function(i){return new Promise((function(a,o){var r=s.miniCssF(i),n=s.p+r;if(e(r,n))return a();t(i,n,null,a,o)}))},a={475:0};s.f.miniCss=function(t,e){var s={594:1};a[t]?e.push(a[t]):0!==a[t]&&s[t]&&e.push(a[t]=i(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}}(),function(){var t={475:0};s.f.j=function(e,i){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise((function(s,i){a=t[e]=[s,i]}));i.push(a[2]=o);var r=s.p+s.u(e),n=new Error,l=function(i){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;n.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",n.name="ChunkLoadError",n.type=o,n.request=r,a[1](n)}};s.l(r,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,o,r=i[0],n=i[1],l=i[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var d=l(s)}for(e&&e(i);c<r.length;c++)o=r[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},i=self["webpackChunkhard_diancan_front"]=self["webpackChunkhard_diancan_front"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[315,652,566,486,98,270,957,38,287,450,818,545,967,661,791,624,323,281,76,667,558,755,701,714,399,969,12,675,404,275,406,582,282,137,183,304,97,1,189,749,133,242,641],(function(){return s(27962)}));i=s.O(i)})();